import{$,a0 as ue,a1 as H,a2 as yi,a3 as vi,r as d,a4 as O,a5 as ji,j as n,c as S,a6 as Ie,a7 as wi,a8 as ki,a9 as Ni,aa as Si,ab as Vs,ac as Ci,ad as Ei,ae as Ii,af as Li,ag as Ti,ah as $s,q as Ae,p as Y,ai as J,aj as Ri,ak as Pi,al as Ai,am as qn,an as Qn,ao as _i,ap as Yn,aq as un,ar as Oi,as as dn,at as Hs,au as Mi,av as U,aw as Di}from"./vendor-Bguz3SJh.js";import{_ as Bi,i as Fi,H as fe,u as mn,a as yt,t as Ht,r as Ui,F as Vi,b as C,c as $i,L as vt,d as oe,N as tt,e as Hi,f as Ws,T as me,g as Wi,h as Gs,j as Gi,k as Ki,l as zi,m as qi,n as Qi,o as Yi,p as Xi,B as Ji,q as Zi}from"./react-dom-D3kPhowv.js";import{c as ea,a as ta,d as na,f as sa,i as ra,n as ia,p as aa,t as oa,v as la,z as ca,h as ua,s as da,b as ma,m as ha,l as fa,e as ga,g as xa,j as pa,k as ba,o as ya,q as va,r as ja,u as wa,w as ka,x as Na,y as Sa,A as Ca,B as Ea,C as Ia,D as La,E as Ta,F as Ra,G as Pa,H as Aa,I as _a,J as Oa,K as Ma,L as Da,M as Ba,N as Fa,O as Ua,P as Va,Q as $a}from"./locales-D0ZXrpVY.js";import{g as hn,I,a as w,U as Ks,F as Ha,b as zs,s as Wa,c as De}from"./Icons-BDmmcH-N.js";import{f as Z}from"./auth-72H9TcpW.js";import{d as Ga,f as Ka,g as fn,h as qs,l as za,F as qa}from"./caption-parsing-C0s0SQwl.js";import{H as de}from"./hls-Di-l_7QN.js";import"./language-db-CEuuI_gH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const Qa="modulepreload",Ya=function(e){return"/"+e},Xn={},Ke=function(t,s,r){let i=Promise.resolve();if(s&&s.length>0){const a=document.getElementsByTagName("link");i=Promise.all(s.map(o=>{if(o=Ya(o),o in Xn)return;Xn[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!r)for(let p=a.length-1;p>=0;p--){const g=a[p];if(g.href===o&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":Qa,l||(m.as="script",m.crossOrigin=""),m.href=o,document.head.appendChild(m),l)return new Promise((p,g)=>{m.addEventListener("load",p),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function Xa(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=e;let l,c;const u=async(p=!0)=>{await c};async function m(){if("serviceWorker"in navigator){const{Workbox:p}=await Ke(()=>import("./workbox-window.prod.es5-DFjpnwFp.js"),__vite__mapDeps([]));l=new p("/sw.js",{scope:"/",type:"classic"}),l.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),l.addEventListener("installed",g=>{g.isUpdate||r==null||r()}),l.register({immediate:t}).then(g=>{a?a("/sw.js",g):i==null||i(g)}).catch(g=>{o==null||o(g)})}}return c=m(),u}const Ja=60*60*1e3;Xa({immediate:!0,onRegisteredSW(e,t){t&&setInterval(async()=>{if(!(!t.installing&&navigator)||"connection"in navigator&&!navigator.onLine)return;const s=await fetch(e,{cache:"no-store",headers:{cache:"no-store","cache-control":"no-cache"}});(s==null?void 0:s.status)===200&&await t.update()},Ja)}});let A=function(e){return e.MOVIE="movie",e.SERIES="series",e.ANIME="anime",e}({}),nt=0;const K=$(ue(H(e=>({bookmarks:{},updateQueue:[],removeBookmark(t){e(s=>{nt+=1,s.updateQueue.push({id:nt.toString(),action:"delete",tmdbId:t}),delete s.bookmarks[t]})},addBookmark(t){e(s=>{nt+=1,s.updateQueue.push({id:nt.toString(),action:"add",tmdbId:t.tmdbId,type:t.type,title:t.title,year:t.releaseYear,poster:t.poster}),s.bookmarks[t.tmdbId]={type:t.type,title:t.title,year:t.releaseYear,poster:t.poster,updatedAt:Date.now()}})},replaceBookmarks(t){e(s=>{s.bookmarks=t})},clear(){e(t=>{t.bookmarks={}})},clearUpdateQueue(){e(t=>{t.updateQueue=[]})},removeUpdateItem(t){e(s=>{s.updateQueue=[...s.updateQueue.filter(r=>r.id!==t)]})}})),{name:"__MW::bookmarks"})),he={},Qs={};async function Za(){var e,t;for(const[s,r]of Object.values(Qs)){const i=r.versions.sort((u,m)=>u.version-m.version),a=s._raw(),o=a["--version"]&&typeof a["--version"]=="number"?a["--version"]:0,l=i.filter(u=>u.version>=o);let c=a;try{for(const u of l)u.migrate&&(localStorage.setItem(`BACKUP-v${u.version}-${r.key}`,JSON.stringify(c)),c=await u.migrate(c))}catch(u){console.error(`FAILED TO MIGRATE STORE ${r.key}`,u),c=((t=(e=l[l.length-1]).create)==null?void 0:t.call(e))??{}}s.save(c)}}function eo(e){const t=e.key??"",s=e.versions.sort((l,c)=>c.version-l.version)[0];function r(l){return he[t]||(he[t]=[]),he[t].push(l),{destroy(){he[t]=he[t].filter(c=>c===l)}}}function i(){var c;const l=((c=s.create)==null?void 0:c.call(s))??{};return l["--version"]=s.version,l}function a(){const l=localStorage.getItem(t);if(!l)return i();try{return JSON.parse(l)}catch(c){return console.error(`FAILED TO PARSE LOCALSTORAGE FOR KEY ${t}`,c),i()}}function o(l){const c={...l};c["--version"]=s.version,localStorage.setItem(t,JSON.stringify(c)),he[t]||(he[t]=[]),he[t].forEach(u=>u(window.structuredClone(l)))}return{get(){const l=a();return delete l["--version"],l},_raw(){return a()},onChange:r,save:o}}function to(e){var r;const t=e.versions.sort((i,a)=>i.version-a.version);if(t.forEach((i,a,o)=>{if(a!==0&&i.version!==o[a-1].version+1)throw new Error("Version list of store is not incremental")}),t.forEach(i=>{if(i.version<0)throw new Error("Versions cannot be negative")}),((r=t[0])==null?void 0:r.version)!==0)throw new Error("Version 0 doesn't exist in version list of store");if(!e.versions[e.versions.length-1].create)throw new Error("Missing create function on latest version of store");if(!e.key)throw new Error("storage key not set in store");const s=[...t];s.pop(),s.forEach(i=>{if(!i.migrate)throw new Error(`Migration missing on version ${i.version}`)})}function jt(){const e={versions:[],key:null};return{setKey(t){return e.key=t,this},addVersion(t){return e.versions.push(t),this},build(){to(e);const t=eo(e);return Qs[e.key??""]=[t,e],t}}}const Jn="https://apis.justwatch.com",no="https://images.justwatch.com";function so(e){if(e===A.MOVIE)return"movie";if(e===A.SERIES)return"show";throw new Error("unsupported type")}function ro(e){if(e==="movie")return A.MOVIE;if(e==="show")return A.SERIES;throw new Error("unsupported type")}function io(e,t){var i,a;const s=ro(e.object_type);let r;return s===A.SERIES&&(r=(i=e.seasons)==null?void 0:i.sort((o,l)=>o.season_number-l.season_number).map(o=>({id:o.id.toString(),number:o.season_number,title:o.title}))),{title:e.title,id:e.id.toString(),year:(a=e.original_release_year)==null?void 0:a.toString(),poster:e.poster?`${no}${e.poster.replace("{profile}","s166")}`:void 0,type:s,seasons:r,seasonData:t?{id:t.id.toString(),number:t.season_number,title:t.title,episodes:t.episodes.sort((o,l)=>o.episode_number-l.episode_number).map(o=>({id:o.id.toString(),number:o.episode_number,title:o.title}))}:void 0}}var Ys={VITE_PWA_ENABLED:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,PACKAGE_VERSION:"4.5.1"};const ao="4.5.1",oo="https://movie-web.github.io/links/discord",lo="https://github.com/movie-web/movie-web",co="https://ko-fi.com/movieweb",Zn=Ys.VITE_GA_ID,ze=Ys.VITE_BACKEND_URL;var te={VITE_PWA_ENABLED:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,PACKAGE_VERSION:"4.5.1"};const uo={TMDB_READ_API_KEY:te.VITE_TMDB_READ_API_KEY,APP_VERSION:void 0,GITHUB_LINK:void 0,DONATION_LINK:void 0,DISCORD_LINK:void 0,ONBOARDING_CHROME_EXTENSION_INSTALL_LINK:te.VITE_ONBOARDING_CHROME_EXTENSION_INSTALL_LINK,ONBOARDING_FIREFOX_EXTENSION_INSTALL_LINK:te.VITE_ONBOARDING_FIREFOX_EXTENSION_INSTALL_LINK,ONBOARDING_PROXY_INSTALL_LINK:te.VITE_ONBOARDING_PROXY_INSTALL_LINK,DMCA_EMAIL:te.VITE_DMCA_EMAIL,CORS_PROXY_URL:te.VITE_CORS_PROXY_URL,NORMAL_ROUTER:te.VITE_NORMAL_ROUTER,BACKEND_URL:te.VITE_BACKEND_URL,DISALLOWED_IDS:te.VITE_DISALLOWED_IDS,TURNSTILE_KEY:te.VITE_TURNSTILE_KEY,CDN_REPLACEMENTS:te.VITE_CDN_REPLACEMENTS,HAS_ONBOARDING:te.VITE_HAS_ONBOARDING};function mo(e){var s;let t=(s=window==null?void 0:window.__CONFIG__)==null?void 0:s[`VITE_${e}`];return t!=null&&t.length===0&&(t=void 0),uo[e]??t??void 0}function ne(e,t){var s;return((s=mo(e))==null?void 0:s.toString())??t??""}function _(){const e=ne("DMCA_EMAIL"),t=ne("ONBOARDING_CHROME_EXTENSION_INSTALL_LINK"),s=ne("ONBOARDING_FIREFOX_EXTENSION_INSTALL_LINK"),r=ne("ONBOARDING_PROXY_INSTALL_LINK"),i=ne("TURNSTILE_KEY");return{APP_VERSION:ao,GITHUB_LINK:lo,DONATION_LINK:co,DISCORD_LINK:oo,DMCA_EMAIL:e.length>0?e:null,ONBOARDING_CHROME_EXTENSION_INSTALL_LINK:t.length>0?t:null,ONBOARDING_FIREFOX_EXTENSION_INSTALL_LINK:s.length>0?s:null,ONBOARDING_PROXY_INSTALL_LINK:r.length>0?r:null,BACKEND_URL:ne("BACKEND_URL",ze),TMDB_READ_API_KEY:ne("TMDB_READ_API_KEY"),PROXY_URLS:ne("CORS_PROXY_URL").split(",").map(a=>a.trim()),NORMAL_ROUTER:ne("NORMAL_ROUTER","false")==="true",HAS_ONBOARDING:ne("HAS_ONBOARDING","false")==="true",TURNSTILE_KEY:i.length>0?i:null,DISALLOWED_IDS:ne("DISALLOWED_IDS","").split(",").map(a=>a.trim()).filter(a=>a.length>0),CDN_REPLACEMENTS:ne("CDN_REPLACEMENTS","").split(",").map(a=>a.split(":").map(o=>o.trim()).filter(o=>o.length>0)).filter(a=>a.length===2)}}let q=function(e){return e.MOVIE="movie",e.TV="tv",e}({});const ho="^1.0.2";function Xs(e){return yi.satisfies(e,ho)}const Js={PREPARE_STREAM:1,SET_DOMAINS_HLS:2},fo=new Promise(e=>{setTimeout(()=>{e()},500)});let Wt=!1;async function wt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;return await fo,new Promise(r=>{s>=0&&setTimeout(()=>r(null),s),vi({name:e,body:t}).then(i=>{Wt=!0,r(i)}).catch(()=>{Wt=!1,r(null)})})}async function Zs(e){return wt("makeRequest",e)}async function er(e){return wt("prepareStream",e)}async function go(e){return wt("openPage",e)}async function tr(){return await wt("hello",void 0,500)}function ce(){return Wt}async function Jh(){const e=await tr();return!(e!=null&&e.success)||!Xs(e.version)?!1:e.allowed&&e.hasPermission}const F=$(ue(H(e=>({account:null,backendUrl:null,proxySet:null,setAccount(t){e(s=>{s.account=t})},removeAccount(){e(t=>{t.account=null})},setBackendUrl(t){e(s=>{s.backendUrl=t})},setProxySet(t){e(s=>{s.proxySet=t})},setAccountProfile(t){e(s=>{s.account&&(s.account.profile=t)})},updateAccount(t){e(s=>{s.account&&(s.account={...s.account,...t})})},updateDeviceName(t){e(s=>{s.account&&(s.account.deviceName=t)})}})),{name:"__MW::auth"})),xo=`${ze}/metrics/providers`,po=`${ze}/metrics/captcha`,bo=()=>ji(32);function yo(){return ce()?"extension":F.getState().proxySet?"custom-proxy":"default"}function nr(e,t){const s=e.toString(),r=(e.stack??"").split(`
`,t+1);return r.pop(),`${s}

${r.join(`
`)}`}async function vo(e){if(ze)return O(xo,{method:"POST",body:{items:e,tool:yo(),batchId:bo()}})}const jo={success:"success",notfound:"notfound",failure:"failed",pending:null,waiting:null};function Ee(e,t,s,r,i){var c,u;const a=(c=e.episode)==null?void 0:c.tmdbId,o=(u=e.season)==null?void 0:u.tmdbId;let l;return i instanceof Error&&(l=i),{status:r,providerId:t,title:e.title,tmdbId:e.tmdbId,type:e.type,embedId:s??void 0,episodeId:a,seasonId:o,errorMessage:l==null?void 0:l.message,fullError:l?nr(l,5):void 0}}function es(e,t,s){const r=jo[s.status];if(!r)return null;let i,a;e.type==="show"&&(i=e.episode.tmdbId,a=e.season.tmdbId);let o;return s.error instanceof Error&&(o=s.error),{status:r,providerId:t,title:e.title,tmdbId:e.tmdbId,type:e.type,embedId:s.embedId,episodeId:i,seasonId:a,errorMessage:s.reason??(o==null?void 0:o.message),fullError:o?nr(o,5):void 0}}function Zh(e,t,s){const r=[];return t.forEach(i=>{const a=s[i.id];i.children.forEach(l=>{const c=s[l];if(!c.embedId)return;const u=es(e,a.id,c);u&&r.push(u)});const o=es(e,a.id,a);o&&r.push(o)}),r}function sr(){return{report:d.useCallback(t=>{t.length!==0&&vo(t).catch(()=>{})},[])}}function ts(e){ze&&O(po,{method:"POST",body:{success:e}}).catch(()=>{})}const dt=$(H((e,t)=>({isInWidget:!1,turnstiles:[],cbs:[],processToken(s,r){const i=t().cbs,a=t().turnstiles.find(o=>o.id===r);(a==null?void 0:a.id)===r&&(i.forEach(o=>o(s)),e(o=>{o.cbs=[]}))},getToken(){return new Promise((s,r)=>{e(i=>{i.cbs=[...i.cbs,a=>{a?s(a):r(new Error("Failed to get token"))}]})})},setTurnstile(s,r,i){e(a=>{a.turnstiles=a.turnstiles.filter(o=>o.id!==s),r&&a.turnstiles.push({controls:r,isInPopout:i,id:s})})}})));function rr(){const e=dt.getState().turnstiles,t=e.find(s=>s.isInPopout);return t||e[0]}function wo(){return!!rr()}async function ko(){const e=rr();try{window.turnstile.execute(document.querySelector(`#${e.id}`),{});const t=await dt.getState().getToken();return ts(!0),t}catch(t){throw ts(!1),t}}function ir(e){const t=_().TURNSTILE_KEY,s=d.useRef(null),r=dt(a=>a.setTurnstile),i=dt(a=>a.processToken);return t?n.jsx("div",{className:S({hidden:!e.isInPopout}),children:n.jsx(Bi,{sitekey:t,onLoad:(a,o)=>{s.current=a,r(a,o,!!e.isInPopout)},onError:()=>{const a=s.current;a&&i(null,a)},onVerify:a=>{var l;const o=s.current;o&&(i(a,o),(l=e.onUpdateShow)==null||l.call(e,!1))},onBeforeInteractive:()=>{var a;(a=e.onUpdateShow)==null||a.call(e,!0)},refreshExpired:"never",execution:"render"})}):null}let mt=null,Be=null;function ef(e){mt=e}function kt(){return mt??[]}function gn(e){Be=e}function No(){if(!Be)return null;try{const e=wi(Be);if(!e.exp)return`jwt|${Be}`;if(Date.now()/1e3<e.exp)return`jwt|${Be}`}catch{}return null}async function tf(e){if(mt)return;mt=(await dr(`${e}/metadata`)).flat()}function ns(e){let t={};return e.type==="show"&&(t={episodeNumber:e.episode.number.toString(),episodeTmdbId:e.episode.tmdbId,seasonNumber:e.season.number.toString(),seasonTmdbId:e.season.tmdbId}),{type:e.type,releaseYear:e.releaseYear.toString(),imdbId:e.imdbId,tmdbId:e.tmdbId,title:e.title,...t}}function st(e,t){Object.entries(t).forEach(s=>{s[1]&&e.searchParams.set(s[0],s[1])})}function Gt(e){const t=s=>new URL(`${e}${s}`);return{scrapeSource(s,r){const i=t("/scrape/source");return st(i,ns(r)),st(i,{id:s}),i.toString()},scrapeAll(s){const r=t("/scrape");return st(r,ns(s)),r.toString()},scrapeEmbed(s,r){const i=t("/scrape/embed");return st(i,{id:s,url:r}),i.toString()}}}async function xn(){let e=No();return!e&&wo()&&(e=`turnstile|${await ko()}`),e}function ss(e){return e.length===0?{}:JSON.parse(e)}async function Kt(e,t){const s=await xn(),r=new URL(e);s&&r.searchParams.set("token",s);const i=new EventSource(r.toString());let a,o;const l=new Promise((c,u)=>{o=c,a=u});return t.forEach(c=>{i.addEventListener(c,u=>{i.close(),o(ss(u.data))})}),i.addEventListener("token",c=>{gn(ss(c.data))}),i.addEventListener("error",c=>{if(i.close(),c.data){const u=JSON.parse(c.data);let m=new Error("scrape error");u.name===Ie.name&&(m=new Ie("Notfound from server")),Object.assign(m,u),a(m);return}console.error("Failed to connect to SSE",c),a(c)}),i.addEventListener("message",c=>{if(!c){i.close();return}setTimeout(()=>{a(new Error("SSE closed improperly"))},1e3)}),{promise:()=>l,on(c,u){i.addEventListener(c,m=>u(JSON.parse(m.data)))}}}const So=_().PROXY_URLS,Co=["proxy","api"];function rs(e){try{return!!new URL(e)}catch{return!1}}function Eo(e){return Co.includes(e)}function Io(e){const t=e.split(";").map(s=>s.split("=",2).filter(r=>r.length!==0)).filter(s=>s.length===2);return Object.fromEntries(t)}function ar(){const e=F.getState().proxySet??So,t=[];return e.forEach(s=>{if(!s.startsWith("|")&&rs(s)){t.push({url:s,type:"proxy"});return}const r=/^\|([^|]+)\|(.*)$/g.exec(s);if(!r||!r[2]||!rs(r[2]))return;const a=Io(r[1]).type??"proxy";Eo(a)&&t.push({url:r[2],type:a})}),t}function pn(){return ar().filter(e=>e.type==="proxy").map(e=>e.url)}function Lo(){return ar().filter(e=>e.type==="api").map(e=>e.url)}function To(e){return typeof e=="string"?"string":e instanceof FormData?"FormData":e instanceof URLSearchParams?"URLSearchParams":"object"}function Ro(e){return e instanceof FormData||e instanceof URLSearchParams?[...e]:e}function or(e){let t=-1;return()=>{const s=e();(t===-1||t>=s.length)&&(t=Math.floor(Math.random()*s.length));const r=s[t];return t=(t+1)%s.length,r}}const lr=or(pn),cr=or(Lo);async function Po(e,t){const s=await xn(),r=new Headers(t==null?void 0:t.headers);s&&r.set("X-Token",s);const i=await fetch(e,t?{...t,headers:r}:void 0),a=i.headers.get("X-Token");return a&&gn(a),i}function Ao(){return async(t,s)=>ki(lr(),Po)(t,s)}function _o(e,t){const s=e.map(r=>r.toLowerCase());return new Headers(Object.entries(t).filter(r=>s.includes(r[0].toLowerCase())))}function Oo(){return async(t,s)=>{const r=await Zs({url:t,...s,body:Ro(s.body),bodyType:To(s.body)});if(!(r!=null&&r.success))throw new Error(`extension error: ${r==null?void 0:r.error}`);const i=r.response;return{body:i.body,finalUrl:i.finalUrl,statusCode:i.statusCode,headers:_o(s.readHeaders,i.headers)}}}const ur=O.create({retry:0});function is(e,t){let s=e;return Object.entries(t).forEach(r=>{let[i,a]=r;s=s.replace(`{${i}}`,encodeURIComponent(a))}),s}function dr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ur(e,t)}async function bn(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=(s==null?void 0:s.baseURL)??"";r.length>0&&r.endsWith("/")&&t.startsWith("/")?r+=t.slice(1):r.length>0&&!r.endsWith("/")&&!t.startsWith("/")?r+=`/${t}`:r+=t;const i=new URL(r);Object.entries((s==null?void 0:s.params)??{}).forEach(l=>{let[c,u]=l;i.searchParams.set(c,u)}),Object.entries((s==null?void 0:s.query)??{}).forEach(l=>{let[c,u]=l;i.searchParams.set(c,u)});let a=s.headers??{};const o=await xn();return o&&(a={...a,"X-Token":o}),ur(e,{...s,baseURL:void 0,params:{destination:i.toString()},query:{},headers:a,onResponse(l){var u;const c=l.response.headers.get("X-Token");c&&gn(c),(u=s.onResponse)==null||u.call(s,l)}})}function zt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return bn(lr(),e,t)}function ht(e){if(e===A.MOVIE)return q.MOVIE;if(e===A.SERIES)return q.TV;throw new Error("unsupported type")}function ft(e){if(e==="movie")return A.MOVIE;if(e==="show")return A.SERIES;throw new Error("unsupported type")}function qe(e){if(e===q.MOVIE)return A.MOVIE;if(e===q.TV)return A.SERIES;throw new Error("unsupported type")}function Mo(e){if(e===q.MOVIE)return"movie";if(e===q.TV)return"show";throw new Error("unsupported type")}function Do(e,t){var i,a;const s=qe(e.object_type);let r;return s===A.SERIES&&(r=(i=e.seasons)==null?void 0:i.sort((o,l)=>o.season_number-l.season_number).map(o=>({title:o.title,id:o.id.toString(),number:o.season_number}))),{title:e.title,id:e.id.toString(),year:(a=e.original_release_year)==null?void 0:a.toString(),poster:e.poster,type:s,seasons:r,seasonData:t?{id:t.id.toString(),number:t.season_number,title:t.title,episodes:t.episodes.sort((o,l)=>o.episode_number-l.episode_number).map(o=>({id:o.id.toString(),number:o.episode_number,title:o.title,air_date:o.air_date}))}:void 0}}function Bo(e){const t=Mo(e.object_type);return{title:e.title,id:e.id.toString(),year:e.original_release_year??0,poster:e.poster,type:t}}function Fe(e,t,s){return["tmdb",ht(e),t,Ni(s,{lower:!0,strict:!0})].join("-")}function Fo(e){return Fe(ft(e.type),e.id,e.title)}function nf(e){const[t,s,r]=e.split("-",3);if(t!=="tmdb")return null;let i;try{i=qe(s)}catch{return null}return{type:i,id:r}}const Uo="https://api.themoviedb.org/3",Vo={accept:"application/json",Authorization:`Bearer ${_().TMDB_READ_API_KEY}`};async function $e(e,t){return await dr(encodeURI(e),{headers:Vo,baseURL:Uo,params:{...t}})}async function mr(e){return(await $e("search/multi",{query:e,include_adult:!1,language:"en-US",page:1})).results.filter(r=>r.media_type===q.MOVIE||r.media_type===q.TV)}async function $o(e){const t=await mr(e);if(t.length===0)return;const s=t[0],r=s.media_type===q.MOVIE?s.title:s.name;return`/media/${Fe(qe(s.media_type),s.id.toString(),r)}`}function Nt(e,t){if(t===q.MOVIE)return $e(`/movie/${e}`,{append_to_response:"external_ids"});if(t===q.TV)return $e(`/tv/${e}`,{append_to_response:"external_ids"});throw new Error("Invalid media type")}function gt(e){if(e)return`https://image.tmdb.org/t/p/w342/${e}`}async function hr(e,t){return(await $e(`/tv/${e}/season/${t}`)).episodes.map(r=>({id:r.id,episode_number:r.episode_number,title:r.name,air_date:r.air_date}))}async function fr(e){const s=(await $e(`/find/${e}`,{external_source:"imdb_id"})).movie_results[0];if(s)return s.id.toString()}function Ho(e,t){if(qe(t)===A.SERIES){const i=e;return{title:i.name,poster:gt(i.poster_path),id:i.id,original_release_year:new Date(i.first_air_date).getFullYear(),object_type:t}}const r=e;return{title:r.title,poster:gt(r.poster_path),id:r.id,original_release_year:new Date(r.release_date).getFullYear(),object_type:t}}function Wo(e,t){if(t===A.MOVIE){const s=e;return{id:e.id,title:s.title,object_type:ht(t),poster:gt(s.poster_path)??void 0,original_release_year:new Date(s.release_date).getFullYear()}}if(t===A.SERIES){const s=e;return{id:e.id,title:s.name,object_type:ht(t),seasons:s.seasons.map(r=>({id:r.id,season_number:r.season_number,title:r.name})),poster:gt(s.poster_path)??void 0,original_release_year:new Date(s.first_air_date).getFullYear()}}throw new Error("unsupported type")}async function qt(e,t,s){const r=await Nt(t,ht(e));if(!r)return null;const i=r.external_ids.imdb_id??void 0;let a;if(e===A.SERIES){const c=r.seasons;let u=c.find(m=>m.id.toString()===s);if(u||(u=c.find(m=>m.season_number===1)),u){const m=await hr(r.id.toString(),u.season_number);a={id:u.id.toString(),season_number:u.season_number,title:u.name,episodes:m}}}const o=Wo(r,e);if(!o)return null;const l=Do(o,a);return l?{meta:l,imdbId:i,tmdbId:t}:null}async function gr(e,t,s){var c,u,m,p,g;const r=so(e);let i;try{const h=is("/content/titles/{type}/{id}/locale/en_US",{type:r,id:t});i=await zt(h,{baseURL:Jn})}catch(h){if(h instanceof Si&&(h.statusCode===400||h.statusCode===404))return null;throw h}let a=(c=i.external_ids.find(h=>h.provider==="imdb_latest"))==null?void 0:c.external_id;a||(a=(u=i.external_ids.find(h=>h.provider==="imdb"))==null?void 0:u.external_id);let o=(m=i.external_ids.find(h=>h.provider==="tmdb_latest"))==null?void 0:m.external_id;o||(o=(p=i.external_ids.find(h=>h.provider==="tmdb"))==null?void 0:p.external_id);let l;if(i.object_type==="show"){const h=s??((g=i.seasons)==null?void 0:g[0].id.toString())??"",f=is("/content/titles/show_season/{id}/locale/en_US",{id:h});l=await zt(f,{baseURL:Jn})}return{meta:io(i,l),imdbId:a,tmdbId:o}}function Qt(e){return!!(e.startsWith("/media/JW")||e.startsWith("/media/tmdb-show"))}function Go(e){return!!e.startsWith("/media/tmdb-show")}async function Ko(e){if(!Qt(e))return;const t=e.split("/").slice(2),[,s,r]=t[0].split("-",3),i=t.slice(1).map(u=>`/${u}`).join("");if(Go(e)){const u=await Nt(r,q.TV);return`/media/${Fe(A.SERIES,u.id.toString(),u.name)}${i}`}const a=qe(s),o=await gr(a,r);if(!o)return;const{tmdbId:l,imdbId:c}=o;if(!(!l&&!c)&&c&&a===A.MOVIE){const u=await fr(c);if(u)return`/media/${Fe(a,u,o.meta.title)}`;if(l)return`/media/${Fe(a,l,o.meta.title)}`}}class xr{constructor(){this.INTERVAL_MS=2*60*1e3,this._interval=null,this._compare=null,this._storage=[]}initialize(){if(this._interval)throw new Error("cache is already initialized");this._interval=setInterval(()=>{const t=new Date;this._storage.filter(s=>!(s.expiry<t))},this.INTERVAL_MS)}destroy(){this._interval&&clearInterval(this._interval),this.clear()}setCompare(t){this._compare=t}has(t){return!!this.get(t)}get(t){if(!this._compare)throw new Error("Compare function not set");const s=this._storage.find(r=>this._compare&&this._compare(r.key,t));if(s)return s.value}set(t,s,r){if(!this._compare)throw new Error("Compare function not set");const i=this._storage.find(o=>this._compare&&this._compare(o.key,t)),a=new Date(new Date().getTime()+r*1e3);if(i){i.key=t,i.value=s,i.expiry=a;return}this._storage.push({key:t,value:s,expiry:a})}remove(t){if(!this._compare)throw new Error("Compare function not set");this._storage.filter(s=>!(this._compare&&this._compare(s.key,t)))}clear(){this._storage=[]}}const Ue=new xr;Ue.setCompare((e,t)=>e.searchQuery.trim()===t.searchQuery.trim());Ue.initialize();async function pr(e){if(Ue.has(e))return Ue.get(e);const{searchQuery:t}=e,r=(await mr(t)).map(l=>{const c=Ho(l,l.media_type);return Bo(c)}),i=r.filter(l=>l.poster),a=r.filter(l=>!l.poster),o=i.concat(a);return Ue.set(e,o,3600),o}function as(e){return e.trim().toLowerCase().replace(/['":]/g,"").replace(/[^a-zA-Z0-9]+/g,"_")}function zo(e,t){return as(e)===as(t)}async function br(e,t){const s=(a,o)=>Math.abs(a-o)<=1,r={},i=await Promise.all(Object.values(e).map(async a=>{const o=Number(a.year.toString().split("-")[0]),c=(await pr({searchQuery:`${a.title} ${o}`})).find(u=>s(Number(u.year),o)&&zo(u.title,a.title));if(!c){console.error(`No item found for migration: ${a.title}`);return}return{id:a.mediaId,data:c}}));for(const a of i.filter(Boolean)){if(!a)continue;let o=[["0","0"]];if(a.data.type==="show"){const l=await qt(A.SERIES,a.data.id);if(!l||!(l!=null&&l.meta.seasons))return;o=[...new Set(t!=null&&t.items?t.items.filter(m=>m.mediaId===a.id).map(m=>m.seasonId):["0"])].map(m=>{var p,g;return{num:m,season:(g=(p=l.meta)==null?void 0:p.seasons)==null?void 0:g[Math.max(0,m-1)]}}).map(m=>{var p;return m?[m.num,(p=m==null?void 0:m.season)==null?void 0:p.id]:[]}).filter(m=>m.length>0)}r[a.id]||(r[a.id]={}),await Promise.all(o.map(async l=>{let[c,u]=l;c&&(r[a.id][c]=await qt(ft(a.data.type),a.data.id,u==="0"||u===null?void 0:u))}))}return r}async function qo(e){const t=e;if(!t)return;const s={};t.bookmarks.forEach(a=>{s[a.mediaId]||(s[a.mediaId]=a)});const r=await br(s);return r?{bookmarks:Object.keys(r).map(a=>r[a][0]).map(a=>a==null?void 0:a.meta).filter(Boolean)}:void 0}async function Qo(e){var o,l,c,u;const t=e;if(!t)return;const s={};t.items.forEach(m=>{s[m.mediaId]||(s[m.mediaId]=m)});const r=await br(s,t);if(!r)return;const i={...t,items:[]},a=Date.now();for(const m of t.items)if(m.mediaType==="movie"){if(!((o=r[m.mediaId][0])!=null&&o.meta))continue;const p={item:{meta:(l=r[m.mediaId][0])==null?void 0:l.meta},progress:m.progress,percentage:m.percentage,watchedAt:Date.now()};t.items=t.items.filter(g=>JSON.stringify(g)!==JSON.stringify(m)),i.items.push(p)}else if(m.mediaType==="series"){if(!((c=r[m.mediaId][m.seasonId])!=null&&c.meta))continue;const p=(u=r[m.mediaId][m.seasonId])==null?void 0:u.meta;if(p.type!=="series")return;const g={item:{meta:p,series:{episode:Number(m.episodeId),season:Number(m.seasonId),seasonId:p.seasonData.id,episodeId:p.seasonData.episodes[Number(m.episodeId)-1].id}},progress:m.progress,percentage:m.percentage,watchedAt:a+Number(m.seasonId)*1e3+Number(m.episodeId)};if(i.items.find(h=>{var f,v;return h.item.meta.id===g.item.meta.id&&((f=h.item.series)==null?void 0:f.episodeId)===((v=g.item.series)==null?void 0:v.episodeId)}))continue;t.items=t.items.filter(h=>JSON.stringify(h)!==JSON.stringify(m)),i.items.push(g)}return i}function Yo(e){return e!=null}async function yr(e,t){const s=await gr(t,e);if(!s)return;const{tmdbId:r,imdbId:i}=s;if(!(!r&&!i)){if(i&&t===A.MOVIE){const a=await fr(i);if(a)return a}if(r)return r}}async function Xo(e){const t=e.bookmarks.map(async s=>({...s,id:await yr(s.id,s.type).catch(()=>{})}));return{bookmarks:(await Promise.all(t)).filter(s=>s.id)}}async function Jo(e){return{items:(await Promise.all(e.items.map(async s=>{try{const r=await yr(s.item.meta.id,s.item.meta.type);if(!r)return null;const i=structuredClone(s);if(i.item.meta.id=r,i.item.series){const a=i.item.series,l=(await Nt(r,q.TV)).seasons.find(m=>m.season_number===a.season);if(!l)return null;const u=(await hr(r,l.season_number)).find(m=>m.episode_number===a.episode);if(!u)return null;i.item.series.episodeId=u.id.toString(),i.item.series.seasonId=l.id.toString()}return i}catch{return null}}))).filter(Yo)}}const Zo={[A.ANIME]:null,[A.MOVIE]:"movie",[A.SERIES]:"show"};jt().setKey("mw-bookmarks").addVersion({version:0,migrate(e){return qo(e)}}).addVersion({version:1,migrate(e){return Xo(e)}}).addVersion({version:2,migrate(e){const t={};for(const s of e.bookmarks){const r=Zo[s.type];r&&(t[s.id]={title:s.title,year:s.year?Number(s.year):void 0,poster:s.poster,type:r,updatedAt:Date.now()})}return K.getState().replaceBookmarks(t),{bookmarks:[]}}}).addVersion({version:3,create(){return{bookmarks:[]}}}).build();const el={description:"movie-web is a web application that searches the internet for streams. The team aims for a mostly minimalistic approach to consuming content.",faqTitle:"Common questions",q1:{body:"movie-web does not host any content. When you click on something to watch, the internet is searched for the selected media (On the loading screen and in the 'video sources' tab you can see which source you're using). Media never gets uploaded by movie-web, everything is through this searching mechanism.",title:"Where does the content come from?"},q2:{body:"It's not possible to request a show or movie, movie-web does not manage any content. All content is viewed through sources on the internet.",title:"Where can I request a show or movie?"},q3:{body:"Our search results are powered by The Movie Database (TMDB) and display regardless of whether our sources actually have the content.",title:"The search results display the show or movie, why can't I play it?"},title:"About movie-web"},tl={copied:"Copied",copy:"Copy"},nl={createAccount:"Don't have an account yet? <0>Create an account.</0>",deviceNameLabel:"Device name",deviceNamePlaceholder:"Personal phone",generate:{description:"Your passphrase acts as your username and password. Make sure to keep it safe as you will need to enter it to login to your account",next:"I have saved my passphrase",passphraseFrameLabel:"Passphrase",title:"Your passphrase"},hasAccount:"Already have an account? <0>Login here.</0>",login:{description:"Please enter your passphrase to login to your account",deviceLengthError:"Please enter a device name",passphraseLabel:"12-Word passphrase",passphrasePlaceholder:"Passphrase",submit:"Login",title:"Login to your account",validationError:"Incorrect or incomplete passphrase"},register:{information:{color1:"Profile color one",color2:"Profile color two",header:"Enter a name for your device and pick colours and a user icon of your choosing",icon:"User icon",next:"Next",title:"Account information"}},trust:{failed:{text:"Did you configure it correctly?",title:"Failed to reach server"},noHostTitle:"Server not configured!",noHost:"The server has not been configured, therefore you cannot create an account",host:"You are connecting to <0>{{hostname}}</0> - please confirm you trust it before making an account",no:"Go back",title:"Do you trust this server?",yes:"I trust this server"},verify:{description:"Please enter your passphrase from earlier to confirm you have saved it and to create your account",invalidData:"Data is not valid",noMatch:"Passphrase doesn't match",passphraseLabel:"Your 12-word passphrase",recaptchaFailed:"ReCaptcha validation failed",register:"Create account",title:"Confirm your passphrase"}},sl={badge:"It broke",details:"Error details",reloadPage:"Reload the page",showError:"Show error details",title:"We encountered an error!"},rl={legal:{disclaimer:"Disclaimer",disclaimerText:"movie-web does not host any files, it merely links to 3rd party services. Legal issues should be taken up with the file hosts and providers. movie-web is not responsible for any media files shown by the video providers."},links:{discord:"Discord",dmca:"DMCA",github:"GitHub"},tagline:"Watch your favourite shows and movies with this open source streaming app."},il={name:"movie-web",pages:{about:"About",dmca:"DMCA",login:"Login",onboarding:"Setup",pagetitle:"{{title}} - movie-web",register:"Register",settings:"Settings"}},al={bookmarks:{sectionTitle:"Bookmarks"},continueWatching:{sectionTitle:"Continue Watching"},mediaList:{stopEditing:"Stop editing"},search:{allResults:"That's all we have!",failed:"Failed to find media, try again!",loading:"Loading...",noResults:"We couldn't find anything!",placeholder:{default:"What do you want to watch?",extra:["What do you want to explore?","What's on your watchlist?","What's your favorite movie?","What's your favorite series?"]},sectionTitle:"Search results"},titles:{day:{default:"What would you like to watch this afternoon?",extra:["Feeling adventurous? Jurassic Park might be the perfect choice."]},morning:{default:"What would you like to watch this morning?",extra:["I hear Before Sunrise is good"]},night:{default:"What would you like to watch tonight?",extra:["Tired? I hear The Exorcist is good."]}}},ol={episodeDisplay:"S{{season}} E{{episode}}",types:{movie:"Movie",show:"Show"}},ll={banner:{offline:"Check your internet connection"},menu:{about:"About us",donation:"Donate",logout:"Log out",register:"Sync to cloud",settings:"Settings",support:"Support"}},cl={badge:"Not found",goHome:"Back to home",message:"We looked everywhere: under the bins, in the closet, behind the proxy but ultimately couldn't find the page you are looking for.",title:"Couldn't find that page"},ul={defaultConfirm:{cancel:"Cancel",confirm:"Use default setup",description:"The default setup does not have the best streams and can be unbearably slow.",title:"Are you sure?"},extension:{back:"Go back",explainer:"Using the browser extension, you can get the best streams we have to offer. With just a simple install.",explainerIos:"Unfortunately, the browser extension is not supported on iOS, Press <bold>Go back</bold> to choose another option.",extensionHelp:"If you've installed the extension but it's not detected, <bold>open the extension through your browsers extension menu</bold> and follow the steps on screen.",linkChrome:"Install Chrome extension",linkFirefox:"Install Firefox extension",notDetecting:"Installed on Chrome, but the site isn't detecting it? Try reloading the page!",notDetectingAction:"Reload page",status:{disallowed:"Extension is not enabled for this page",disallowedAction:"Enable extension",failed:"Failed to request status",loading:"Waiting for you to install the extension",outdated:"Extension version too old",success:"Extension is working as expected!"},submit:"Continue",title:"Let's start with an extension"},proxy:{back:"Go back",explainer:"With the proxy method, you can get great quality streams by making a self-service proxy.",input:{errorConnection:"Could not connect to proxy",errorInvalidUrl:"Not a valid URL",errorNotProxy:"Expected a proxy but got a website",label:"Proxy URL",placeholder:"https://"},link:"Learn how to make a proxy",submit:"Submit proxy",title:"Let's make a new proxy"},start:{explainer:"To get the best streams possible, you will need to choose which streaming method you want to use.",options:{default:{text:"I don't want good quality streams,<0 /> <1>use the default setup</1>"},extension:{action:"Install extension",description:"Install browser extension and gain access to the best sources.",quality:"Best quality",title:"Browser extension"},proxy:{action:"Setup proxy",description:"Setup a proxy in just 5 minutes and gain access to great sources.",quality:"Good quality",title:"Custom proxy"}},title:"Let's get you setup with movie-web"}},dl={close:"Close"},ml={back:{default:"Back to home",short:"Back"},casting:{enabled:"Casting to device..."},menus:{downloads:{disclaimer:"Downloads are taken directly from the provider. movie-web does not have control over how the downloads are provided.",copyHlsPlaylist:"Copy HLS playlist link",downloadSubtitle:"Download current subtitle",downloadVideo:"Download video",hlsDisclaimer:"Downloads are taken directly from the provider. movie-web does not have control over how the downloads are provided.<br /><br />Please note that you are downloading an HLS playlist, <bold>it is not recommended to download if you are not familiar with advanced streaming formats</bold>. Try different sources for different formats.",onAndroid:{1:"To download on Android, click the download button then, on the new page, <bold>tap and hold</bold> on the video, then select <bold>save</bold>.",shortTitle:"Download / Android",title:"Downloading on Android"},onIos:{1:"To download on iOS, click the download button then, on the new page, click <bold><ios_share /></bold>, then <bold>Save to Files <ios_files /></bold>.",shortTitle:"Download / iOS",title:"Downloading on iOS"},onPc:{1:"On PC, click the download button then, on the new page, right click the video and select <bold>Save video as</bold>",shortTitle:"Download / PC",title:"Downloading on PC"},title:"Download"},episodes:{button:"Episodes",emptyState:"There are no episodes in this season, check back later!",episodeBadge:"E{{episode}}",loadingError:"Error loading season",loadingList:"Loading...",loadingTitle:"Loading...",unairedEpisodes:"One or more episodes in this season have been disabled because they haven't been aired yet."},playback:{speedLabel:"Playback speed",title:"Playback settings"},quality:{automaticLabel:"Automatic quality",hint:"You can try <0>switching source</0> to get different quality options.",iosNoQuality:"Due to Apple-defined limitations, quality selection is not available on iOS for this source. You can try <0>switching to another source</0> to get different quality options.",title:"Quality"},settings:{downloadItem:"Download",enableSubtitles:"Enable Subtitles",experienceSection:"Viewing experience",playbackItem:"Playback settings",qualityItem:"Quality",sourceItem:"Video sources",subtitleItem:"Subtitle settings",videoSection:"Video settings"},sources:{failed:{text:"There was an error while trying to find any videos, please try a different source.",title:"Failed to scrape"},noEmbeds:{text:"We were unable to find any embeds, please try a different source.",title:"No embeds found"},noStream:{text:"This source has no streams for this movie or show.",title:"No stream"},title:"Sources",unknownOption:"Unknown"},subtitles:{customChoice:"Select subtitle from file",customizeLabel:"Customize",offChoice:"Off",settings:{backlink:"Custom subtitles",delay:"Subtitle delay",fixCapitals:"Fix capitalization"},title:"Subtitles",unknownLanguage:"Unknown"}},metadata:{api:{text:"Could not load API metadata, please check your internet connection.",title:"Failed to load API metadata"},dmca:{badge:"Removed",text:"This media is no longer available due to a takedown notice or copyright claim.",title:"Media has been removed"},extensionPermission:{badge:"Permission Missing",button:"Use extension",text:"You have the browser extension, but we need your permission to get started using the extension.",title:"Configure the extension"},failed:{badge:"Failed",homeButton:"Go home",text:"Could not load the media's metadata from TMDB. Please check whether TMDB is down or blocked on your internet connection.",title:"Failed to load metadata"},notFound:{badge:"Not found",homeButton:"Back to home",text:"We couldn't find the media you requested. Either it's been removed or you tampered with the URL.",title:"Couldn't find that media."}},nextEpisode:{cancel:"Cancel",next:"Next episode"},playbackError:{badge:"Playback error",errors:{errorAborted:"The fetching of the media was aborted by the user's request.",errorDecode:"Despite having previously been determined to be usable, an error occurred while trying to decode the media resource, resulting in an error.",errorGenericMedia:"Unknown media error occurred.",errorNetwork:"Some kind of network error occurred which prevented the media from being successfully fetched, despite having previously been available.",errorNotSupported:"The media or media provider object is not supported."},homeButton:"Go home",text:"There was an error trying to play the media. Please try again.",title:"Failed to play video!"},scraping:{items:{failure:"Error occurred",notFound:"Doesn't have the video",pending:"Checking for videos..."},notFound:{badge:"Not found",detailsButton:"Show details",homeButton:"Go home",text:"We have searched through our providers and cannot find the media you are looking for! We do not host the media and have no control over what is available. Please click 'Show details' below for more details.",title:"We couldn't find that"}},time:{regular:"{{timeWatched}} / {{duration}}",remaining:"{{timeLeft}} left â€¢ Finish at {{timeFinished, datetime}}",shortRegular:"{{timeWatched}}",shortRemaining:"-{{timeLeft}}"},turnstile:{description:"Please verify that you are human by completing the Captcha on the right. This is to keep movie-web safe!",error:"Failed to verify your humanity. Please try again.",title:"We need to verify that you're human.",verifyingHumanity:"Verifying your humanity..."}},hl={dmca:{text:"Welcome to movie-web's DMCA contact page! We respect intellectual property rights and want to address any copyright concerns swiftly. If you believe your copyrighted work has been improperly used on our platform, please send a detailed DMCA notice to the email below. Please include a description of the copyrighted material, your contact details, and a statement of good faith belief. We're committed to resolving these matters promptly and appreciate your cooperation in keeping movie-web a place that respects creativity and copyrights.",title:"DMCA"},loadingApp:"Loading application",loadingUser:"Loading your profile",loadingUserError:{logout:"Logout",reset:"Reset custom server",text:"Failed to load your profile",textWithReset:"Failed to load your profile from your custom server, want to reset back to the default server?"},migration:{failed:"Failed to migrate your data.",inProgress:"Please hold, we are migrating your data. This shouldn't take long."}},fl={account:{accountDetails:{deviceNameLabel:"Device name",deviceNamePlaceholder:"Personal phone",editProfile:"Edit",logoutButton:"Log out"},actions:{delete:{button:"Delete account",confirmButton:"Delete account",confirmDescription:"Are you sure you want to delete your account? All your data will be lost!",confirmTitle:"Are you sure?",text:"This action is irreversible. All data will be deleted and nothing can be recovered.",title:"Delete account"},title:"Actions"},devices:{deviceNameLabel:"Device name",failed:"Failed to load sessions",removeDevice:"Remove",title:"Devices"},profile:{finish:"Finish editing",firstColor:"Profile color one",secondColor:"Profile color two",title:"Edit profile picture",userIcon:"User icon"},register:{cta:"Get started",text:"Share your watch progress between devices and keep them synced.",title:"Sync to the cloud"},title:"Account"},appearance:{activeTheme:"Active",themes:{blue:"Blue",default:"Default",gray:"Gray",red:"Red",teal:"Teal"},title:"Appearance"},connections:{server:{description:"If you would like to connect to a custom backend to store your data, enable this and provide the URL. <0>Instructions.</0>",label:"Custom server",urlLabel:"Custom server URL"},setup:{doSetup:"Do setup",errorStatus:{description:"It seems that one or more items in this setup need your attention.",title:"Something needs your attention"},itemError:"There is something wrong with this setting. Go through setup again to fix it.",items:{default:"Default setup",extension:"Extension",proxy:"Custom proxy"},redoSetup:"Redo setup",successStatus:{description:"All things are in place for you to start watching your favourite media.",title:"Everything is set up!"},unsetStatus:{description:"Please click the button to the right to start the setup process.",title:"You haven't gone through setup"}},title:"Connections",workers:{addButton:"Add new worker",description:"To make the application function, all traffic is routed through proxies. Enable this if you want to bring your own workers. <0>Instructions.</0>",emptyState:"No workers yet, add one below",label:"Use custom proxy workers",urlLabel:"Worker URLs",urlPlaceholder:"https://"}},preferences:{language:"Application language",languageDescription:"Language applied to the entire application.",thumbnail:"Generate thumbnails",thumbnailDescription:"Most of the time, videos don't have thumbnails. You can enable this setting to generate them on the fly but they can make your video slower.",thumbnailLabel:"Generate thumbnails",title:"Preferences"},reset:"Reset",save:"Save",sidebar:{info:{appVersion:"App version",backendUrl:"Backend URL",backendVersion:"Backend version",hostname:"Hostname",insecure:"Insecure",notLoggedIn:"You are not logged in",secure:"Secure",title:"App information",unknownVersion:"Unknown",userId:"User ID"}},subtitles:{backgroundLabel:"Background opacity",colorLabel:"Color",previewQuote:"I must not fear. Fear is the mind-killer.",textSizeLabel:"Text size",title:"Subtitles"},unsaved:"You have unsaved changes"},gl={about:el,actions:tl,auth:nl,errors:sl,footer:rl,global:il,home:al,media:ol,navigation:ll,notFound:cl,onboarding:ul,overlays:dl,player:ml,screens:hl,settings:fl},vr={en:gl,ca:ea,cs:ta,de:na,fr:sa,it:ra,nl:ia,pl:aa,tr:oa,vi:la,zh:ca,he:ua,sv:da,pirate:ma,minion:ha,lv:fa,th:ga,ne:xa,ar:pa,es:ba,et:ya,tok:va,hi:ja,"pt-BR":wa,"pt-PT":ka,uk:Na,bg:Sa,bn:Ca,el:Ea,fa:Ia,gu:La,id:Ta,ja:Ra,ko:Pa,sl:Aa,ta:_a,"zh-HANT":Oa,is:Ma,ru:Da,gl:Ba,pa:Fa,ro:Ua,fi:Va,nv:$a},xl=Object.keys(vr),pl=Object.fromEntries(Object.entries(vr).map(e=>[e[0],{translation:e[1]}]));Vs.use(Fi).init({fallbackLng:"en",resources:pl,interpolation:{escapeValue:!1}});const sf=xl.map(e=>{const t=hn(e);if(!t)throw new Error(`Language with code ${e} cannot be found in database`);return t}),Qe=$(ue(H(e=>({language:"en",setLanguage(t){e(s=>{s.language=t})}})),{name:"__MW::locale"}));function jr(e){const t=hn(e);t&&Vs.changeLanguage(t.code)}function bl(e){const t=hn(e);return t?t.isRtl:!1}function yl(){const e=Qe(s=>s.language);d.useEffect(()=>{jr(e)},[e]);const t=bl(e);return n.jsx(fe,{children:n.jsx("html",{dir:t?"rtl":"ltr"})})}const B=$(ue(H(e=>({enabled:!1,lastSync:{lastSelectedLanguage:null},lastSelectedLanguage:null,overrideCasing:!1,delay:0,styling:{color:"#ffffff",backgroundOpacity:.5,size:1},resetSubtitleSpecificSettings(){e(t=>{t.delay=0,t.overrideCasing=!1})},updateStyling(t){e(s=>{t.backgroundOpacity!==void 0&&(s.styling.backgroundOpacity=t.backgroundOpacity),t.color!==void 0&&(s.styling.color=t.color.toLowerCase()),t.size!==void 0&&(s.styling.size=Math.min(2,Math.max(.01,t.size)))})},setLanguage(t){e(s=>{s.enabled=!!t,t&&(s.lastSelectedLanguage=t)})},setCustomSubs(){e(t=>{t.enabled=!0,t.lastSelectedLanguage=null})},setOverrideCasing(t){e(s=>{s.overrideCasing=t})},setDelay(t){e(s=>{s.delay=Math.max(Math.min(500,t),-500)})},importSubtitleLanguage(t){e(s=>{s.lastSelectedLanguage=t,s.lastSync.lastSelectedLanguage=t})}})),{name:"__MW::subtitles"}));jt().setKey("mw-settings").addVersion({version:0,create(){return{language:"en",captionSettings:{delay:0,style:{color:"#ffffff",fontSize:25,backgroundColor:"#00000096"}}}},migrate(e){return{language:e.language,captionSettings:{language:"none",...e.captionSettings}}}}).addVersion({version:1,migrate(e){const t=Qe.getState(),s=B.getState(),r=e.captionSettings.style.backgroundColor;let i=.5;if(r.length===9){const a=r.slice(7);i=parseInt(a,16)/255}return t.setLanguage(e.language),s.updateStyling({backgroundOpacity:i,color:e.captionSettings.style.color,size:e.captionSettings.style.fontSize/25}),s.importSubtitleLanguage(e.captionSettings.language==="none"?null:e.captionSettings.language),{}}}).addVersion({version:2,create(){return{}}}).build();const yn=$(ue(H(e=>({volume:1,setVolume(t){e(s=>{s.volume=t})}})),{name:"__MW::volume"})),wr=$(H(e=>({showVolume:!1,setShowVolume(t){e(s=>{s.showVolume=t})}})));jt().setKey("mw-volume").addVersion({version:0,create(){return{volume:1}},migrate(e){return yn.getState().setVolume(e.volume),{}}}).addVersion({version:1,create(){return{}}}).build();let rt=0;const G=$(ue(H(e=>({items:{},updateQueue:[],removeItem(t){e(s=>{rt+=1,s.updateQueue.push({id:rt.toString(),action:"delete",tmdbId:t}),delete s.items[t]})},replaceItems(t){e(s=>{s.items=t})},updateItem(t){let{meta:s,progress:r}=t;e(i=>{var o,l,c,u;rt+=1,i.updateQueue.push({tmdbId:s.tmdbId,title:s.title,year:s.releaseYear,poster:s.poster,type:s.type,progress:{...r},id:rt.toString(),episodeId:(o=s.episode)==null?void 0:o.tmdbId,seasonId:(l=s.season)==null?void 0:l.tmdbId,seasonNumber:(c=s.season)==null?void 0:c.number,episodeNumber:(u=s.episode)==null?void 0:u.number,action:"upsert"}),i.items[s.tmdbId]||(i.items[s.tmdbId]={type:s.type,episodes:{},seasons:{},updatedAt:0,title:s.title,year:s.releaseYear,poster:s.poster});const a=i.items[s.tmdbId];if(a.updatedAt=Date.now(),s.type==="movie"){a.progress||(a.progress={duration:0,watched:0}),a.progress={...r};return}!s.episode||!s.season||(a.seasons[s.season.tmdbId]||(a.seasons[s.season.tmdbId]={id:s.season.tmdbId,number:s.season.number,title:s.season.title}),a.episodes[s.episode.tmdbId]||(a.episodes[s.episode.tmdbId]={id:s.episode.tmdbId,number:s.episode.number,title:s.episode.title,seasonId:s.season.tmdbId,updatedAt:Date.now(),progress:{duration:0,watched:0}}),a.episodes[s.episode.tmdbId].progress={...r})})},clear(){e(t=>{t.items={}})},clearUpdateQueue(){e(t=>{t.updateQueue=[]})},removeUpdateItem(t){e(s=>{s.updateQueue=[...s.updateQueue.filter(r=>r.id!==t)]})}})),{name:"__MW::progress"}));function vl(e){var s,r;const t={};for(const i of e.items)if(i.item.meta.type===A.SERIES){if(t[i.item.meta.id]||(t[i.item.meta.id]={type:"show",episodes:{},seasons:{},title:i.item.meta.title,updatedAt:i.watchedAt,poster:i.item.meta.poster,year:Number(i.item.meta.year)}),i.item.series&&!t[i.item.meta.id].episodes[i.item.series.episodeId]){const a=(s=i.item.meta.seasonData.episodes.find(o=>{var l;return o.number===((l=i.item.series)==null?void 0:l.episode)}))==null?void 0:s.title;t[i.item.meta.id].seasons[i.item.series.seasonId]={id:i.item.series.seasonId,number:i.item.series.season,title:((r=i.item.meta.seasons.find(o=>{var l;return o.number===((l=i.item.series)==null?void 0:l.season)}))==null?void 0:r.title)||"Unknown season"},t[i.item.meta.id].episodes[i.item.series.episodeId]={title:a||"Unknown",id:i.item.series.episodeId,number:i.item.series.episode,seasonId:i.item.series.seasonId,updatedAt:i.watchedAt,progress:{duration:100/i.percentage*i.progress,watched:i.progress}}}}else t[i.item.meta.id]={type:"movie",episodes:{},seasons:{},title:i.item.meta.title,updatedAt:i.watchedAt,year:Number(i.item.meta.year),poster:i.item.meta.poster,progress:{duration:100/i.percentage*i.progress,watched:i.progress}};return t}jt().setKey("video-progress").addVersion({version:0,migrate(){return{items:[]}}}).addVersion({version:1,async migrate(e){return Qo(e)}}).addVersion({version:2,migrate(e){return Jo(e)}}).addVersion({version:3,migrate(e){return G.getState().replaceItems(vl(e)),{items:[]}}}).addVersion({version:4,create(){return{items:[]}}}).build();Zn&&Ci.initialize([{trackingId:Zn}]);function St(e){return n.jsx("div",{className:["spinner",e.className??""].join(" ")})}function R(e){var c;const{onClick:t,href:s,loading:r}=e,i=d.useCallback(u=>{r||(s&&!t?(u.preventDefault(),window.open(s,"_blank","noreferrer")):t==null||t(u))},[t,s,r]);let a="bg-white hover:bg-gray-200 text-black";e.theme==="purple"&&(a="bg-buttons-purple hover:bg-buttons-purpleHover text-white"),e.theme==="secondary"&&(a="bg-buttons-cancel hover:bg-buttons-cancelHover transition-colors duration-100 text-white"),e.theme==="danger"&&(a="bg-buttons-danger hover:bg-buttons-dangerHover text-white");let o=S("tabbable cursor-pointer inline-flex items-center justify-center rounded-lg font-medium transition-[transform,background-color] duration-100 active:scale-105 md:px-8",e.padding??"px-4 py-3",e.className,a,e.disabled?"!cursor-not-allowed bg-opacity-60 text-opacity-60":null);e.disabled&&(o=o.split(" ").filter(u=>!u.startsWith("hover:")&&!u.startsWith("active:")).join(" "));const l=n.jsxs(n.Fragment,{children:[e.icon&&!e.loading?n.jsx("span",{className:"mr-3 hidden md:inline-block",children:n.jsx(I,{icon:e.icon})}):null,e.loading?n.jsx("span",{className:"mr-3 inline-flex justify-center",children:n.jsx(St,{className:"text-lg"})}):null,e.children]});return e.href&&(e.href.startsWith("https://")||(c=e.href)!=null&&c.startsWith("data:"))?n.jsx("a",{className:o,href:e.href,target:"_blank",rel:"noreferrer",download:e.download,onClick:i,children:l}):e.href?n.jsx("a",{className:o,onClick:i,children:l}):n.jsx("button",{type:"button",onClick:i,className:o,children:l})}function os(e){let t="bg-white hover:bg-gray-200 text-black";e.theme==="purple"&&(t="bg-buttons-purple hover:bg-buttons-purpleHover text-white"),e.theme==="secondary"&&(t="bg-buttons-cancel hover:bg-buttons-cancelHover transition-colors duration-100 text-white");const s=S("cursor-pointer inline-flex items-center justify-center rounded-lg font-medium transition-[transform,background-color] duration-100 active:scale-105 md:px-8","px-4 py-3",e.className,t);return n.jsx("button",{type:"button",onClick:e.onClick,className:s,children:e.children})}const jl=function(t){return n.jsx("div",{className:t.className,children:n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsxs("div",{className:"flex h-12 items-center justify-center",children:[n.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30]"}),n.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30] [animation-delay:150ms]"}),n.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30] [animation-delay:300ms]"}),n.jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-[#211D30] [animation-delay:450ms]"})]}),t.text&&t.text.length?n.jsx("p",{className:"mt-3 max-w-xs text-sm opacity-75",children:t.text}):null]})})},_e=jl;function W(e){return{authorization:`Bearer ${e}`}}function wl(e,t){return{meta:{title:t.title,type:t.type,poster:t.poster,year:t.year??0},tmdbId:e}}async function kl(e,t,s){return O(`/users/${t.userId}/bookmarks/${s.tmdbId}`,{method:"POST",headers:W(t.token),baseURL:e,body:s})}async function Nl(e,t,s){return O(`/users/${t.userId}/bookmarks/${s}`,{method:"DELETE",headers:W(t.token),baseURL:e})}async function Sl(e){return Ei(Ii,e,"mnemonic",{c:2048,dkLen:32})}function Cl(e){return Li(e,$s)}async function ls(e){const t=await Sl(e),{privateKey:s,publicKey:r}=Z.pki.ed25519.generateKeyPair({seed:t});return{privateKey:s,publicKey:r,seed:t}}function El(){return Ti($s)}async function Il(e,t){return Z.pki.ed25519.sign({encoding:"utf8",message:e,privateKey:t})}function Yt(e){return Z.util.encode64(String.fromCodePoint(...e))}function Xt(e){return Yt(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}async function cs(e,t){const s=await Il(t,e.privateKey);return Xt(s)}function vn(e){return Z.util.binary.base64.decode(e)}function Mt(e){return Z.util.createBuffer(vn(e))}function us(e){return Z.util.encode64(e.getBytes())}async function ds(e,t){if(t.byteLength!==32)throw new Error("Secret must be at least 256-bit");const s=await new Promise((o,l)=>{Z.random.getBytes(16,(c,u)=>{c&&l(c),o(u)})}),r=Z.cipher.createCipher("AES-GCM",Z.util.createBuffer(t));r.start({iv:s,tagLength:128}),r.update(Z.util.createBuffer(e,"utf8")),r.finish();const i=r.output,a=r.mode.tag;return`${Z.util.encode64(s)}.${us(i)}.${us(a)}`}function kr(e,t){if(t.byteLength!==32)throw new Error("Secret must be 256-bit");const[s,r,i]=e.split("."),a=Z.cipher.createDecipher("AES-GCM",Z.util.createBuffer(t));if(a.start({iv:Mt(s),tag:Mt(i),tagLength:128}),a.update(Mt(r)),!a.finish())throw new Error("Error decrypting data");return a.output.toString()}function Ll(e,t,s){return O(`/users/${t.userId}/progress/import`,{method:"PUT",body:s,baseURL:e,headers:W(t.token)})}function Tl(e,t,s){return O(`/users/${t.userId}/bookmarks`,{method:"PUT",body:s,baseURL:e,headers:W(t.token)})}async function Rl(e,t){return O("/auth/login/start",{method:"POST",body:{publicKey:t},baseURL:e})}async function Pl(e,t){return O("/auth/login/complete",{method:"POST",body:{namespace:"movie-web",...t},baseURL:e})}function Al(e){var t,s;return{duration:((t=e.progress)==null?void 0:t.duration)??0,watched:((s=e.progress)==null?void 0:s.watched)??0,tmdbId:e.tmdbId,meta:{title:e.title??"",type:e.type??"",year:e.year??NaN,poster:e.poster},episodeId:e.episodeId,seasonId:e.seasonId,episodeNumber:e.episodeNumber,seasonNumber:e.seasonNumber}}function _l(e,t){var s,r;return t.type==="show"?Object.entries(t.episodes).flatMap(i=>{var l,c;let[a,o]=i;return{duration:((l=t.progress)==null?void 0:l.duration)??o.progress.duration,watched:((c=t.progress)==null?void 0:c.watched)??o.progress.watched,tmdbId:e,meta:{title:t.title??"",type:t.type??"",year:t.year??NaN,poster:t.poster},episodeId:o.id,seasonId:o.seasonId,episodeNumber:o.number,seasonNumber:t.seasons[o.seasonId].number,updatedAt:new Date(o.updatedAt).toISOString()}}):[{duration:((s=t.progress)==null?void 0:s.duration)??0,watched:((r=t.progress)==null?void 0:r.watched)??0,tmdbId:e,updatedAt:new Date(t.updatedAt).toISOString(),meta:{title:t.title??"",type:t.type??"",year:t.year??NaN,poster:t.poster}}]}async function Ol(e,t,s){return O(`/users/${t.userId}/progress/${s.tmdbId}`,{method:"PUT",headers:W(t.token),baseURL:e,body:s})}async function Ml(e,t,s,r,i){await O(`/users/${t.userId}/progress/${s}`,{method:"DELETE",headers:W(t.token),baseURL:e,body:{episodeId:r,seasonId:i}})}async function Dl(e,t){return O("/auth/register/start",{method:"POST",body:{captchaToken:t},baseURL:e})}async function Bl(e,t){return O("/auth/register/complete",{method:"POST",body:{namespace:"movie-web",...t},baseURL:e})}async function rf(e,t){return O(`/users/${t.userId}/sessions`,{headers:W(t.token),baseURL:e})}async function af(e,t,s){return O(`/sessions/${t.sessionId}`,{method:"PATCH",headers:W(t.token),body:s,baseURL:e})}async function Fl(e,t,s){return O(`/sessions/${s}`,{method:"DELETE",headers:W(t),baseURL:e})}function jn(e,t,s){return O(`/users/${t.userId}/settings`,{method:"PUT",body:s,baseURL:e,headers:W(t.token)})}function Ul(e,t){return O(`/users/${t.userId}/settings`,{method:"GET",baseURL:e,headers:W(t.token)})}function Vl(e){const t=e.map(s=>{const r={...s.meta,updatedAt:new Date(s.updatedAt).getTime()};return[s.tmdbId,r]});return Object.fromEntries(t)}function $l(e){const t={};return e.forEach(s=>{t[s.tmdbId]||(t[s.tmdbId]={title:s.meta.title,poster:s.meta.poster,type:s.meta.type,updatedAt:new Date(s.updatedAt).getTime(),episodes:{},seasons:{},year:s.meta.year});const r=t[s.tmdbId];new Date(s.updatedAt).getTime()>r.updatedAt&&(r.updatedAt=new Date(s.updatedAt).getTime()),r.type==="movie"&&(r.progress={duration:Number(s.duration),watched:Number(s.watched)}),r.type==="show"&&s.season.id&&s.episode.id&&(r.seasons[s.season.id]={id:s.season.id,number:s.season.number??0,title:""},r.episodes[s.episode.id]={id:s.episode.id,number:s.episode.number??0,title:"",progress:{duration:Number(s.duration),watched:Number(s.watched)},seasonId:s.season.id,updatedAt:new Date(s.updatedAt).getTime()})}),t}async function ms(e,t){return O("/users/@me",{headers:W(t),baseURL:e})}async function of(e,t,s){return O(`/users/${t.userId}`,{method:"PATCH",headers:W(t.token),body:s,baseURL:e})}async function lf(e,t){return O(`/users/${t.userId}`,{headers:W(t.token),baseURL:e})}async function Hl(e,t){return O(`/users/${t.userId}/bookmarks`,{headers:W(t.token),baseURL:e})}async function Wl(e,t){return O(`/users/${t.userId}/progress`,{headers:W(t.token),baseURL:e})}const wn=$(ue(H(e=>({theme:null,setTheme(t){e(s=>{s.theme=t})}})),{name:"__MW::theme"})),Gl=$(H(e=>({previewTheme:null,setPreviewTheme(t){e(s=>{s.previewTheme=t})}})));function Kl(e){const t=Gl(a=>a.previewTheme),s=wn(a=>a.theme),r=t??s,i=r?`theme-${r}`:void 0;return n.jsxs("div",{className:i,children:[e.applyGlobal?n.jsx(fe,{children:n.jsx("body",{className:i})}):null,e.children]})}function zl(){const e=!!F(f=>f.account),t=F(f=>f.setAccount),s=F(f=>f.removeAccount),r=F(f=>f.setProxySet),i=K(f=>f.clear),a=G(f=>f.clear),o=wn(f=>f.setTheme),l=Qe(f=>f.setLanguage),c=B(f=>f.importSubtitleLanguage),u=K(f=>f.replaceBookmarks),m=G(f=>f.replaceItems),p=d.useCallback(async(f,v,b,y)=>{const j={token:f.token,userId:v.id,sessionId:f.session.id,deviceName:b.device,profile:v.profile,seed:y};return t(j),j},[t]),g=d.useCallback(async()=>{s(),i(),a()},[s,i,a]),h=d.useCallback(async(f,v,b,y,j)=>{u(Vl(y)),m($l(b)),j.applicationLanguage&&l(j.applicationLanguage),j.defaultSubtitleLanguage&&c(j.defaultSubtitleLanguage),j.applicationTheme&&o(j.applicationTheme),j.proxyUrls&&r(j.proxyUrls)},[u,m,l,c,o,r]);return{loggedIn:e,login:p,logout:g,syncData:h}}function ge(){return F(t=>t.backendUrl)??_().BACKEND_URL}function Oe(){const e=F(g=>g.account),t=F(g=>{var h;return(h=g.account)==null?void 0:h.profile}),s=!!F(g=>g.account),r=ge(),{logout:i,login:a,syncData:o}=zl(),l=d.useCallback(async g=>{if(!r)return;const h=await ls(g.mnemonic),f=Xt(h.publicKey),{challenge:v}=await Rl(r,f),b=await cs(h,v),y=await Pl(r,{challenge:{code:v,signature:b},publicKey:f,device:await ds(g.userData.device,h.seed)}),j=await ms(r,y.token),T=Yt(h.seed);return a(y,j.user,j.session,T)},[a,r]),c=d.useCallback(async()=>{if(!(!e||!r)){try{await Fl(r,e.token,e.sessionId)}catch{}await i()}},[i,r,e]),u=d.useCallback(async g=>{if(!r)return;const{challenge:h}=await Dl(r,g.recaptchaToken),f=await ls(g.mnemonic),v=await cs(f,h),b=await Bl(r,{challenge:{code:h,signature:v},publicKey:Xt(f.publicKey),device:await ds(g.userData.device,f.seed),profile:g.userData.profile});return a(b,b.user,b.session,Yt(f.seed))},[r,a]),m=d.useCallback(async(g,h,f)=>{if(!r||Object.keys(h).length===0&&Object.keys(f).length===0)return;const v=Object.entries(h).flatMap(y=>{let[j,T]=y;return _l(j,T)}),b=Object.entries(f).map(y=>{let[j,T]=y;return wl(j,T)});await Promise.all([Ll(r,g,v),Tl(r,g,b)])},[r]),p=d.useCallback(async g=>{var y,j,T;if(!r)return;let h;try{h=await ms(r,g.token)}catch(L){const k=L;if(((y=k==null?void 0:k.response)==null?void 0:y.status)===401||((j=k==null?void 0:k.response)==null?void 0:j.status)===403||((T=k==null?void 0:k.response)==null?void 0:T.status)===400){await c();return}throw console.error(L),L}const[f,v,b]=await Promise.all([Hl(r,g),Wl(r,g),Ul(r,g)]);o(h.user,h.session,v,f,b)},[r,o,c]);return{loggedIn:s,profile:t,login:l,logout:c,register:u,restore:p,importData:m}}const ql=12*60*60*1e3;function Ql(){const{account:e}=F(),{restore:t}=Oe(),s=d.useRef(!1);return mn(()=>{e&&t(e)},ql),yt(async()=>{s.current||!e||await t(e).finally(()=>{s.current=!0})},[])}function kn(e){return n.jsxs("div",{className:"bg-pill-background bg-opacity-50 px-4 py-2 rounded-full text-white flex justify-center items-center",children:[n.jsx(I,{icon:e.icon??w.WAND,className:"mr-3 text-xl text-type-link"}),e.children]})}function He(e){return n.jsx("h2",{className:S("text-white text-3xl font-bold text-opacity-100 mt-6",e.className),children:e.children})}const Ct="pb-4 border-b border-utils-divider border-opacity-50";function Et(e){return n.jsx("h1",{className:["text-3xl lg:text-5xl font-bold text-white mb-9",e.border?Ct:null,e.className??""].join(" "),children:e.children})}function ae(e){return n.jsx("h2",{className:["text-xl lg:text-2xl font-bold text-white mt-20 mb-9",e.border?Ct:null,e.className??""].join(" "),children:e.children})}function Yl(e){return n.jsx("h2",{className:["text-lg lg:text-xl font-bold text-white mb-3",e.border?Ct:null,e.className??""].join(" "),children:e.children})}function Q(e){return n.jsx("p",{className:["text-type-text my-9 font-medium",e.border?Ct:null,e.className??""].join(" "),children:e.children})}function Nn(e){return n.jsx("div",{className:S("w-full p-6 text-center flex flex-col items-center",e.maxWidth??"max-w-[28rem]"),children:e.children})}function Sn(e){return n.jsx("div",{className:"w-full h-full flex justify-center items-center flex-col",children:e.children})}function Xl(e,t){return e==="slide-down"?{leave:`transition-[transform,opacity] ${t}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"-translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${t}`,enterFrom:"opacity-0 -translate-y-4",enterTo:"translate-y-0 opacity-100"}:e==="slide-up"?{leave:`transition-[transform,opacity] ${t}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${t}`,enterFrom:"opacity-0 translate-y-4",enterTo:"translate-y-0 opacity-100"}:e==="slide-full-left"?{leave:`transition-[transform] ${t}`,leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",enter:`transition-[transform] ${t}`,enterFrom:"-translate-x-full",enterTo:"translate-x-0"}:e==="slide-full-right"?{leave:`transition-[transform] ${t}`,leaveFrom:"translate-x-0",leaveTo:"translate-x-full",enter:`transition-[transform] ${t}`,enterFrom:"translate-x-full",enterTo:"translate-x-0"}:e==="fade"?{leave:`transition-[transform,opacity] ${t}`,leaveFrom:"opacity-100",leaveTo:"opacity-0",enter:`transition-[transform,opacity] ${t}`,enterFrom:"opacity-0",enterTo:"opacity-100"}:{}}function z(e){const t=e.durationClass??"duration-200",s=Xl(e.animation,t);return e.isChild?n.jsx(Ht.Child,{as:d.Fragment,...s,children:n.jsx("div",{className:e.className,style:e.style,children:e.children})}):n.jsx(Ht,{show:e.show,as:d.Fragment,...s,children:n.jsx("div",{className:e.className,style:e.style,children:e.children})})}function Jl(){const e=Ae();return d.useMemo(()=>Object.fromEntries(new URLSearchParams(e.search).entries()),[e.search])}function It(e){const t=Jl(),s=Ae(),r=Y(),i=t[e]??null,a=d.useCallback(o=>{const l=new URLSearchParams(s.search);o?l.set(e,o):l.delete(e),r({search:l.toString()})},[e,s.search,r]);return[i,a]}const Te=$(H(e=>({transition:null,routes:{},anchorPoint:null,setTransition(t){e(s=>{s.transition=t})},registerRoute(t){e(s=>{s.routes[t.id]=t})},setAnchorPoint(t){e(s=>{s.anchorPoint=t})}})));function ke(e,t){return[t??"",...e.split("/")].filter(r=>r.length>0)}function Ne(e){return`/${e.join("/")}`}function Zl(e){const[t]=It("r"),s=Te(a=>a.setAnchorPoint),r=d.useMemo(()=>!!t&&t.startsWith(`/${e}`),[t,e]),i=d.useCallback(()=>{if(!r)return;const a=document.getElementById(`__overlayRouter::${e}`);if(a){const o=a.getBoundingClientRect();s({h:o.height,w:o.width,x:o.x,y:o.y})}},[r,s,e]);d.useEffect(()=>{i()},[r,i]),d.useEffect(()=>{function a(){i()}return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[i])}function Me(e){const[t,s]=It("r"),r=Te(f=>f.transition),i=Te(f=>f.setTransition),a=!!t&&t.startsWith(`/${e}`);function o(f){return Ne(ke(f,e))}function l(f){const v=t,b=Ne(ke(f,e));i({from:v??"/",to:b}),s(b)}function c(f){if(!r)return"none";const v=Ne(ke(f,e));return v===r.to&&r.from.startsWith(r.to)||v===r.from&&r.to.startsWith(r.from)?"yes":"no"}function u(f){return a&&t===Ne(ke(f,e))}function m(){return a}const p=d.useCallback(f=>{t&&!f&&s(null),i(null)},[s,t,i]),g=d.useCallback(function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"/";i(null),s(Ne(ke(f,e)))},[e,s,i]);return{activeRoute:a?Ne(ke(t.slice(`/${e}`.length))):"/",showBackwardsTransition:c,isCurrentPage:u,isOverlayActive:m,navigate:l,close:p,open:g,makePath:o,currentRoute:t}}function V(e){const t=Me(e);return{id:e,route:t.activeRoute,isRouterActive:t.isOverlayActive(),open:t.open,close:t.close,navigate:t.navigate}}const ec=function(){const{t}=C(),[s,r]=d.useState(!1);return n.jsx("div",{className:S("absolute w-10/12 max-w-[800px] bg-background-main p-20 rounded-lg select-none z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transform",s?"":"hidden"),children:n.jsxs("div",{className:"w-full grid lg:grid-cols-[1fr,auto] gap-12 items-center",children:[n.jsxs("div",{className:"text-left",children:[n.jsx("h2",{className:"text-type-emphasis font-bold text-xl mb-6",children:t("player.turnstile.title")}),n.jsx("p",{children:t("player.turnstile.description")})]}),n.jsx(ir,{isInPopout:!0,onUpdateShow:i=>r(i)})]})})},tc=ec;function nc(e){const t=Me("hello world :)"),s=d.useRef(t);return d.useEffect(()=>{const r=s.current;return r.close(),()=>{r.close()}},[]),n.jsxs("div",{className:"popout-location",children:[n.jsx(tc,{}),e.children]})}function Nr(e){const[t,s]=d.useState(null),r=d.useRef(null),i=e.close;return d.useEffect(()=>{var o;const a=(o=r.current)==null?void 0:o.closest(".popout-location");s(a??document.body)},[]),n.jsx("div",{ref:r,children:t?Ui.createPortal(n.jsx(z,{show:e.show,animation:"none",children:n.jsx(Vi,{children:n.jsxs("div",{className:"popout-wrapper fixed overflow-hidden pointer-events-auto inset-0 z-[999] select-none",children:[n.jsx(z,{animation:"fade",isChild:!0,children:n.jsx("div",{onClick:i,className:S({"absolute inset-0":!0,"bg-black opacity-90":e.darken})})}),n.jsxs(z,{animation:"slide-up",className:"absolute inset-0 pointer-events-none",isChild:!0,children:[n.jsx("div",{tabIndex:1,className:"focus:ring-0 focus:outline-none opacity-0"}),e.children]})]})})}),t):null})}function Sr(e){const t=Me(e.id),s=t.close;Zl(e.id);const r=d.useCallback(()=>{s()},[s]);return n.jsx(Nr,{close:r,show:t.isOverlayActive(),darken:e.darken,children:e.children})}function Cn(e){const[t,s]=It("m"),r=d.useCallback(()=>s(e),[e,s]),i=d.useCallback(()=>s(null),[s]);return{id:e,isShown:t===e,show:r,hide:i}}function sc(e){return n.jsx("div",{className:"w-full max-w-[30rem] m-4",children:n.jsx("div",{className:"w-full bg-modal-background rounded-xl p-8 pointer-events-auto",children:e.children})})}function Cr(e){const t=Cn(e.id);return n.jsxs(Nr,{darken:!0,close:t.hide,show:t.isShown,children:[n.jsx(fe,{children:n.jsx("html",{"data-no-scroll":!0})}),n.jsx("div",{className:"flex absolute inset-0 items-center justify-center flex-col",children:e.children})]})}const rc=function(t){const[s,r]=d.useState(!1),i=d.useRef(null),{t:a}=C();let o=null;typeof t.error=="string"?o=t.error:t.error.key?o=`${t.error.type}: ${a(t.error.key)}`:t.error.message&&(o=`${t.error.type}: ${a(t.error.message)}`);function l(){!t.error||!navigator.clipboard||(navigator.clipboard.writeText(`\`\`\`${o}\`\`\``),r(!0),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>r(!1),2e3))}return n.jsxs("div",{className:"bg-errors-card w-full rounded-lg p-6 text-left",children:[n.jsxs("div",{className:"border-errors-border flex items-center justify-between border-b pb-2",children:[n.jsx("span",{className:"font-medium text-white",children:a("errors.details")}),n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(R,{theme:"secondary",padding:"p-2 h-10 min-w-[40px] md:px-4",onClick:()=>l(),children:s?n.jsxs(n.Fragment,{children:[n.jsx(I,{icon:w.CHECKMARK,className:"text-xs"}),n.jsx("span",{className:"hidden min-[400px]:inline-block ml-3",children:a("actions.copied")})]}):n.jsxs(n.Fragment,{children:[n.jsx(I,{icon:w.COPY,className:"text-2xl"}),n.jsx("span",{className:"hidden min-[400px]:inline-block ml-3",children:a("actions.copy")})]})}),n.jsx(R,{theme:"secondary",padding:"p-2 md:px-2",onClick:t.onClose,children:n.jsx(I,{icon:w.X,className:"text-2xl"})})]})]}),n.jsx("div",{className:"pointer-events-auto mt-4 h-60 select-text overflow-y-auto whitespace-pre text-left",children:o})]})},Er=rc;function ic(e){return!e.show||!e.error?null:n.jsx("div",{className:"fixed inset-0 flex h-full w-full items-center justify-center bg-black bg-opacity-30 p-12",children:n.jsx("div",{className:"w-full max-w-2xl",children:n.jsx(Er,{error:e.error,onClose:e.onClose})})})}function ac(e){return e.error?n.jsx(Cr,{id:e.id,children:n.jsx("div",{className:"pointer-events-auto w-11/12 max-w-2xl",children:n.jsx(Er,{error:e.error,onClose:e.onClose})})}):null}function oc(e){const{t}=C(),[s,r]=d.useState(!1),i=5,a=(e.errorInfo.componentStack||"").split(`
`).slice(0,i),o=`${e.error.toString()}
${a.join(`
`)}`;return n.jsx("div",{className:"relative flex min-h-screen flex-1 flex-col",children:n.jsx("div",{className:"flex h-full flex-1 flex-col items-center justify-center p-5 text-center",children:n.jsx(Sn,{children:n.jsxs(Nn,{maxWidth:"max-w-2xl w-9/10",children:[n.jsx(kn,{icon:w.EYE_SLASH,children:t("errors.badge")}),n.jsx(He,{children:t("errors.title")}),n.jsx(Q,{children:e.error.toString()}),n.jsx(ic,{show:s,onClose:()=>r(!1),error:o}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(os,{theme:"secondary",className:"mt-6 p-2.5 md:px-12",onClick:()=>window.location.reload(),children:t("errors.reloadPage")}),n.jsx(os,{theme:"purple",className:"mt-6 p-2.5 md:px-12",onClick:()=>r(!0),children:t("errors.showError")})]})]})})})})}class lc extends d.Component{constructor(t){super(t),this.state={error:void 0}}componentDidCatch(t,s){console.error("Render error caught",t,s),this.setState(r=>({...r,error:{error:t,errorInfo:s}}))}render(){return this.state.error?n.jsx(oc,{error:this.state.error.error,errorInfo:this.state.error.errorInfo}):this.props.children}}function ve(e){const{t}=C();return n.jsxs("div",{className:S("flex items-center space-x-2 rounded-full px-4 py-2 text-type-logo",e.backgroundClass??"bg-pill-background bg-opacity-50",e.clickable?"transition-[transform,background-color] hover:scale-105 hover:bg-pill-backgroundHover backdrop-blur-lg hover:text-type-logo active:scale-95":""),children:[n.jsx(I,{className:"text-xl",icon:w.MOVIE_WEB}),n.jsx("span",{className:["font-semibold text-white",e.hideTextOnMobile?"hidden sm:block":""].join(" "),children:t("global.name")})]})}function Ir(e){return n.jsx("div",{className:`mx-auto max-w-full px-8 ${e.ultraWide?"w-[1300px] sm:px-16":"w-[900px] sm:px-8"} ${e.classNames||""}`,children:e.children})}function Lt(e){return n.jsx("div",{className:`mx-auto w-[600px] max-w-full px-8 sm:px-0 ${e.classNames||""}`,children:e.children})}function En(e){return n.jsx("div",{className:S("min-h-screen w-full flex justify-center p-8 py-24 items-center",e.classNames),children:n.jsx("div",{className:"w-[700px] max-w-full",children:e.children})})}function je(e){const{t}=C(),s=t(e.k),r=t("global.pages.pagetitle",{title:s});return n.jsx(fe,{children:n.jsx("title",{children:e.subpage?r:s})})}function Lr(){return!!_().DMCA_EMAIL}function cc(){const{t:e}=C();return n.jsxs(Xe,{children:[n.jsx(je,{subpage:!0,k:"global.pages.dmca"}),n.jsxs(Lt,{children:[n.jsx(Et,{children:e("screens.dmca.title")}),n.jsx(Q,{children:e("screens.dmca.text")}),n.jsxs(Q,{className:"flex space-x-3 items-center",children:[n.jsx(I,{icon:w.MAIL}),n.jsx("span",{children:_().DMCA_EMAIL??""})]})]})]})}function Jt(e){const t=Y(),s=d.useCallback(()=>{e.to&&t(e.to)},[t,e.to]);return n.jsxs("a",{href:e.href,target:e.href?"_blank":void 0,rel:"noreferrer",className:"tabbable rounded py-2 px-3 inline-flex cursor-pointer items-center space-x-3 transition-colors duration-200 hover:text-type-emphasis",onClick:e.to?s:void 0,children:[n.jsx(I,{icon:e.icon,className:"text-2xl"}),n.jsx("span",{className:"font-medium",children:e.children})]})}function hs(){const{t:e}=C();return Lr()?n.jsx(Jt,{to:"/dmca",icon:w.DRAGON,children:e("footer.links.dmca")}):null}function uc(){const{t:e}=C();return n.jsx("footer",{className:"mt-16 border-t border-type-divider py-16 md:py-8",children:n.jsxs(Ir,{ultraWide:!0,classNames:"grid md:grid-cols-2 gap-16 md:gap-8",children:[n.jsxs("div",{children:[n.jsx("div",{className:"inline-block",children:n.jsx(ve,{})}),n.jsx("p",{className:"mt-4 lg:max-w-[400px]",children:e("footer.tagline")})]}),n.jsxs("div",{className:"md:text-right",children:[n.jsx("h3",{className:"font-semibold text-type-emphasis",children:e("footer.legal.disclaimer")}),n.jsx("p",{className:"mt-3",children:e("footer.legal.disclaimerText")})]}),n.jsxs("div",{className:"flex flex-wrap gap-[0.5rem] -ml-3",children:[n.jsx(Jt,{icon:w.GITHUB,href:_().GITHUB_LINK,children:e("footer.links.github")}),n.jsx(Jt,{icon:w.DISCORD,href:_().DISCORD_LINK,children:e("footer.links.discord")}),n.jsx("div",{className:"inline md:hidden",children:n.jsx(hs,{})})]}),n.jsx("div",{className:"hidden items-center justify-end md:flex -mr-3",children:n.jsx(hs,{})})]})})}function Tr(e){return n.jsxs("div",{className:["flex min-h-screen flex-col",e.className||""].join(" "),children:[n.jsx("div",{style:{flex:"1 0 auto"},children:e.children}),n.jsx(uc,{})]})}function Rr(e){return n.jsxs("div",{className:"relative inline-block",children:[n.jsx("div",{className:S(e.sizeClass,"rounded-full overflow-hidden flex items-center justify-center text-white"),style:{background:`linear-gradient(to bottom right, ${e.profile.colorA}, ${e.profile.colorB})`},children:n.jsx(Ks,{className:e.iconClass,icon:e.profile.icon})}),e.bottom?n.jsx("div",{className:"absolute bottom-0 left-1/2 transform translate-y-1/2 -translate-x-1/2",children:e.bottom}):null]})}function Pr(e){const t=F(),s=d.useMemo(()=>t.account&&t.account.seed?vn(t.account.seed):null,[t]);if(!t.account||t.account===null)return null;const r=s?kr(t.account.deviceName,s):"...";return n.jsxs(n.Fragment,{children:[n.jsx(Rr,{profile:t.account.profile,sizeClass:e.sizeClass??"w-[1.5rem] h-[1.5rem] ssm:w-[2rem] ssm:h-[2rem]",iconClass:e.iconClass,bottom:e.bottom}),e.withName&&s?n.jsx("span",{className:"hidden md:inline-block",children:r.length>=20?`${r.slice(0,19)}â€¦`:r}):null]})}function dc(e){return n.jsx("div",{className:"relative inline-block p-1 text-type-dimmed",children:n.jsx(I,{className:e.iconClass??"text-base ssm:text-xl",icon:w.MENU})})}const mc=function(t){const s=t.clickable?"cursor-pointer hover:scale-110 hover:bg-pill-backgroundHover hover:text-white active:scale-125":"",r=t.transparent?"bg-opacity-0 hover:bg-opacity-50":"",i=t.active?"bg-pill-backgroundHover text-white":"",a=t.downsized?"h-10 w-10":"h-12 w-12";return n.jsx("div",{className:t.className||void 0,onClick:t.onClick,children:n.jsx("div",{className:`flex items-center justify-center rounded-full border-2 border-transparent backdrop-blur-lg bg-pill-background bg-opacity-50 transition-[background-color,color,transform,border-color] duration-75 ${r} ${s} ${i} ${a}`,children:n.jsx(I,{icon:t.icon})})})},xt=mc;function fs(){return n.jsx("hr",{className:"border-0 w-full h-px bg-dropdown-border"})}const hc=function(t){const s=Y(),r=i=>{i.startsWith("http")?window.open(i,"_blank"):s(i)};return n.jsx("a",{tabIndex:0,href:t.href,onClick:i=>{var a;i.preventDefault(),t.href?r(t.href):(a=t.onClick)==null||a.call(t)},className:t.className,children:t.children})},Ar=hc;function Se(e){return n.jsxs(Ar,{onClick:e.onClick,href:e.href,className:S("tabbable cursor-pointer flex gap-3 items-center m-3 p-1 rounded font-medium transition-colors duration-100",e.highlight?"text-dropdown-highlight hover:text-dropdown-highlightHover":"text-dropdown-text hover:text-white",e.className),children:[e.icon?n.jsx(I,{icon:e.icon,className:"text-xl"}):null,e.children]})}function Dt(e){return n.jsx(Ar,{href:e.href,className:"tabbable w-11 h-11 rounded-full bg-dropdown-contentBackground text-dropdown-text hover:text-white transition-colors duration-100 flex justify-center items-center",children:n.jsx(I,{className:"text-2xl",icon:e.icon})})}function fc(e){const{t}=C(),[s,r]=d.useState(!1),i=F(u=>{var m;return(m=u.account)==null?void 0:m.deviceName}),a=F(u=>{var m;return(m=u.account)==null?void 0:m.seed}),o=d.useMemo(()=>a?vn(a):null,[a]),{logout:l}=Oe();d.useEffect(()=>{function u(m){m.target.closest(".is-dropdown")||r(!1)}return window.addEventListener("click",u),()=>window.removeEventListener("click",u)},[]);const c=d.useCallback(()=>{r(u=>!u)},[]);return n.jsxs("div",{className:"relative is-dropdown",children:[n.jsxs("div",{className:"cursor-pointer tabbable rounded-full flex gap-2 text-white items-center py-2 px-3 bg-pill-background bg-opacity-50 hover:bg-pill-backgroundHover backdrop-blur-lg transition-[background,transform] duration-100 hover:scale-105",tabIndex:0,onClick:c,onKeyUp:u=>u.key==="Enter"&&c(),children:[e.children,n.jsx(I,{className:S("text-xl transition-transform duration-100",s?"rotate-180":""),icon:w.CHEVRON_DOWN})]}),n.jsx(z,{animation:"slide-down",show:s,children:n.jsxs("div",{className:"rounded-lg absolute w-64 bg-dropdown-altBackground top-full mt-3 right-0",children:[i&&o?n.jsxs(Se,{className:"text-white",href:"/settings",children:[n.jsx(Pr,{}),kr(i,o)]}):n.jsx(Se,{href:"/login",icon:w.RISING_STAR,highlight:!0,children:t("navigation.menu.register")}),n.jsx(fs,{}),n.jsx(Se,{href:"/settings",icon:w.SETTINGS,children:t("navigation.menu.settings")}),n.jsx(Se,{href:"/about",icon:w.CIRCLE_QUESTION,children:t("navigation.menu.about")}),n.jsx(Se,{href:_().DONATION_LINK,icon:w.DONATION,children:t("navigation.menu.donation")}),i?n.jsx(Se,{className:"!text-type-danger opacity-75 hover:opacity-100",icon:w.LOGOUT,onClick:l,children:t("navigation.menu.logout")}):null,n.jsx(fs,{}),n.jsxs("div",{className:"my-4 flex justify-center items-center gap-4",children:[n.jsx(Dt,{href:_().DISCORD_LINK,icon:w.DISCORD}),n.jsx(Dt,{href:_().GITHUB_LINK,icon:w.GITHUB}),n.jsx(Dt,{href:_().DONATION_LINK,icon:w.DONATION})]})]})})]})}class gc{constructor(t){this.x=0,this.y=0,this.radius=0,this.direction=0,this.speed=0,this.lifetime=0,this.ran=0,this.image=null,this.size=10;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{horizontalMotion:!1,sizeRange:[10,10]};s.imgSrc&&(this.image=new Image,this.image.src=s.imgSrc),this.options=s,this.reset(t),this.initialize(t)}reset(t){this.x=Math.round(Math.random()*t.width/2+t.width/4),this.y=Math.random()*100+5,this.radius=1+Math.floor(Math.random()*.5),this.direction=Math.random()*Math.PI/2+Math.PI/4,this.speed=.02+Math.random()*.08;const s=60;this.lifetime=s*3+Math.random()*(s*30),this.size=this.options.sizeRange?Math.random()*(this.options.sizeRange[1]-this.options.sizeRange[0])+this.options.sizeRange[0]:10,this.options.horizontalMotion&&(this.direction=Math.random()<=.5?0:Math.PI,this.lifetime=30*s),this.ran=0}initialize(t){this.ran=Math.random()*this.lifetime;const s=this.speed;this.speed=Math.random()*this.lifetime*s,this.update(t),this.speed=s}update(t){this.ran+=1;const s=this.speed*Math.cos(this.direction),r=this.speed*Math.sin(this.direction);this.x+=s,this.y+=r,this.ran>this.lifetime&&this.reset(t)}render(t){const s=t.getContext("2d");if(!s)return;s.save(),s.beginPath();const r=this.ran/this.lifetime,i=(r-r*r)*4;if(s.globalAlpha=Math.max(0,i*.8),this.image){s.translate(this.x,this.y);const a=this.size,o=this.image.naturalWidth/this.image.naturalHeight*a;s.rotate(this.direction-Math.PI),s.drawImage(this.image,-a/2,o,o,a)}else s.ellipse(this.x,this.y,this.radius,this.radius*1.5,this.direction,0,Math.PI*2),s.fillStyle="white",s.fill();s.restore()}}function xc(){const e=d.useRef(null);return d.useEffect(()=>{var f,v;if(!e.current)return;const t=e.current,s=[];t.width=t.scrollWidth,t.height=t.scrollHeight;const r=20;let i=r,a=[];const o=new Date,l=o.getMonth(),c=o.getDate();l===11&&c>=24&&c<=26&&(a=[{image:"/lightbar-images/snowflake.svg",sizeRange:[4,15]},{image:"/lightbar-images/santa.png",sizeRange:[15,30]}]),Math.floor(Math.random()*600)===69&&(a=[{image:"/lightbar-images/fishie.png",sizeRange:[10,11]}],i=r/2);for(let b=0;b<r;b+=1){const y=a&&b<=i,j=Math.floor(Math.random()*a.length),T=(f=a[j])==null?void 0:f.sizeRange,L=(v=a[j])==null?void 0:v.image,k=new gc(t,{imgSrc:y?L:void 0,horizontalMotion:L==null?void 0:L.includes("fishie"),sizeRange:T});s.push(k)}let m=!0,p=null;function g(){if(t.getContext("2d")){if(m){for(const y of s)y.update(t);m=!1}t.width=t.scrollWidth,t.height=t.scrollHeight;for(const y of s)y.render(t);p=requestAnimationFrame(g)}}const h=setInterval(()=>{m=!0},1e3/120);return g(),()=>{p&&cancelAnimationFrame(p),clearInterval(h)}},[]),n.jsx("canvas",{className:"particles",ref:e})}const pc=function(t){return n.jsx("div",{className:"absolute inset-0 w-full h-[680px] overflow-hidden pointer-events-none -mt-64",children:n.jsx("div",{className:"max-w-screen w-full h-[680px] relative pt-64",children:n.jsx("div",{className:t.className,children:n.jsxs("div",{className:"lightbar",children:[n.jsx(xc,{}),n.jsx("div",{className:"lightbar-visual"})]})})})})},bc=pc,se=$(H(e=>({banners:[],isOnline:!0,isTurnstile:!1,location:null,ignoredBannerIds:[],updateOnline(t){e(s=>{s.isOnline=t})},updateTurnstile(t){e(s=>{s.isTurnstile=t})},setLocation(t){e(s=>{s.location=t})},showBanner(t){e(s=>{s.banners.find(r=>r.id===t)||s.ignoredBannerIds.includes(t)||s.banners.push({id:t,height:0})})},hideBanner(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e(r=>{s&&r.ignoredBannerIds.push(t),r.banners=r.banners.filter(i=>i.id!==t)})},updateHeight(t,s){e(r=>{const i=r.banners.find(a=>a.id===t);i&&(i.height=s)})}})));function Tt(e){const t=e??null,s=se(a=>a.banners),r=se(a=>a.location),i=s.reduce((a,o)=>a+o.height,0);return t!==r?0:i}function yc(e){const[t,{height:s}]=$i(),r=se(o=>o.updateHeight),i=se(o=>o.showBanner),a=se(o=>o.hideBanner);return d.useEffect(()=>(i(e),()=>{a(e)}),[i,a,e]),d.useEffect(()=>{r(e,s)},[s,e,r]),[t]}const vc=function(t){const s=Tt(),{loggedIn:r}=Oe();return n.jsxs(n.Fragment,{children:[t.noLightbar?null:n.jsx("div",{className:"absolute inset-x-0 top-0 flex h-[88px] items-center justify-center",style:{top:`${s}px`},children:n.jsx("div",{className:"absolute inset-x-0 -mt-[22%] flex items-center sm:mt-0",children:n.jsx(bc,{})})}),n.jsx("div",{className:"fixed z-[20] pointer-events-none left-0 right-0 top-0 min-h-[150px]",style:{top:`${s}px`},children:n.jsxs("div",{className:S("fixed left-0 right-0 h-20 flex items-center",t.doBackground?"bg-background-main border-b border-utils-divider border-opacity-50":null),children:[t.doBackground?n.jsx("div",{className:"absolute w-full h-full inset-0 overflow-hidden",children:n.jsx(Ye,{positionClass:"absolute"})}):null,n.jsx("div",{className:"opacity-0 absolute inset-0 block h-20 pointer-events-auto"}),n.jsx("div",{className:`${t.bg?"opacity-100":"opacity-0"} absolute inset-0 block h-24 bg-background-main transition-opacity duration-300`,children:n.jsx("div",{className:"absolute -bottom-24 h-24 w-full bg-gradient-to-b from-background-main to-transparent"})})]})}),n.jsx("div",{className:"fixed pointer-events-none left-0 right-0 z-[60] top-0 min-h-[150px]",style:{top:`${s}px`},children:n.jsx("div",{className:S("fixed left-0 right-0 flex items-center"),children:n.jsxs("div",{className:"px-7 py-5 relative z-[60] flex flex-1 items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-1.5 ssm:space-x-3 pointer-events-auto",children:[n.jsx(vt,{className:"block tabbable rounded-full text-xs ssm:text-base",to:"/",children:n.jsx(ve,{clickable:!0})}),n.jsx("a",{href:_().DISCORD_LINK,target:"_blank",rel:"noreferrer",className:"text-xl text-white tabbable rounded-full",children:n.jsx(xt,{icon:w.DISCORD,clickable:!0,downsized:!0})}),n.jsx("a",{href:_().GITHUB_LINK,target:"_blank",rel:"noreferrer",className:"text-xl text-white tabbable rounded-full",children:n.jsx(xt,{icon:w.GITHUB,clickable:!0,downsized:!0})})]}),n.jsx("div",{className:"relative pointer-events-auto",children:n.jsx(fc,{children:r?n.jsx(Pr,{withName:!0}):n.jsx(dc,{})})})]})})})]})},In=vc;function Ye(e){return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:S(e.positionClass??"fixed","top-0 -right-48 rotate-[32deg] w-[50rem] h-[15rem] rounded-[70rem] bg-background-accentA blur-[100px] pointer-events-none opacity-25 transition-colors duration-75")}),n.jsx("div",{className:S(e.positionClass??"fixed","top-0 right-48 rotate-[32deg] w-[50rem] h-[15rem] rounded-[70rem] bg-background-accentB blur-[100px] pointer-events-none opacity-25 transition-colors duration-75")})]})}function Xe(e){return n.jsxs("div",{className:"bg-background-main",style:{backgroundImage:"linear-gradient(to bottom, var(--tw-gradient-from), var(--tw-gradient-to) 800px)"},children:[n.jsx(Ye,{}),n.jsxs(Tr,{children:[n.jsx(In,{doBackground:!0,noLightbar:!0}),n.jsx("div",{className:"mt-40 relative",children:e.children})]})]})}function jc(){const{t:e}=C();return n.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-center font-medium",children:[n.jsx(Ye,{}),n.jsx("div",{className:"right-[calc(2rem+env(safe-area-inset-right))] top-6 absolute",children:n.jsx(ve,{})}),n.jsx(_e,{}),n.jsx("p",{className:"max-w-[19rem] mt-3 mb-12 text-type-secondary",children:e("screens.migration.inProgress")})]})}function _r(e){return n.jsxs("div",{className:"flex flex-col justify-center items-center h-screen text-center font-medium",children:[n.jsx(Ye,{}),n.jsx("div",{className:"right-[calc(2rem+env(safe-area-inset-right))] top-6 absolute",children:n.jsx(ve,{})}),e.iconSlot?e.iconSlot:null,n.jsx("div",{className:"max-w-[19rem] mt-3 mb-12 text-type-secondary",children:e.children})]})}function wc(){const e=se(s=>s.updateOnline),t=d.useRef(!0);d.useEffect(()=>{let s=0,r=null;const i=setInterval(()=>{if(s+=1,t.current&&s<10)return;s=0,r&&r.abort(),r=new AbortController;const a=r.signal;fetch("/ping.txt",{signal:a}).then(()=>{e(!0),t.current=!0}).catch(o=>{o.name!=="AbortError"&&(e(!1),t.current=!1)})},5e3);return()=>{clearInterval(i),r&&r.abort()}},[e])}const kc=function(t){return n.jsx("ol",{children:t.items.map((s,r)=>n.jsxs("li",{className:S("grid grid-cols-[auto,1fr] gap-6",r!==t.items.length-1?"pb-12":void 0),children:[n.jsxs("div",{className:"relative z-0",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-about-circle text-about-circleText font-medium flex justify-center items-center relative z-10",children:r+1}),r!==t.items.length-1?n.jsx("div",{className:"h-[calc(100%+1.5rem)] w-px absolute top-6 left-1/2 transform -translate-x-1/2",style:{backgroundImage:"linear-gradient(to bottom, transparent 5px, #1F1F29 5px, #1F1F29 10px)",backgroundSize:"10px 10px",backgroundRepeat:"Repeat"}}):null]}),n.jsx("div",{children:s})]}))})},Nc=kc;function Bt(e){return n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-white mb-2 font-medium",children:e.title}),n.jsx("div",{className:"text-type-text",children:e.children})]})}function Sc(){const{t:e}=C();return n.jsxs(Xe,{children:[n.jsx(je,{subpage:!0,k:"global.pages.about"}),n.jsxs(Lt,{children:[n.jsx(Et,{children:e("about.title")}),n.jsx(Q,{children:e("about.description")}),n.jsx(ae,{children:e("about.faqTitle")}),n.jsx(Nc,{items:[n.jsx(Bt,{title:e("about.q1.title"),children:e("about.q1.body")}),n.jsx(Bt,{title:e("about.q2.title"),children:e("about.q2.body")}),n.jsx(Bt,{title:e("about.q3.title"),children:e("about.q3.body")})]})]})]})}function Rt(e){return n.jsx("hr",{className:S("w-full h-px border-0 bg-utils-divider bg-opacity-50",e.marginClass??"my-8")})}function Ft(e){return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex",children:[n.jsx("p",{className:"flex-1 font-bold text-white",children:e.name}),n.jsx("p",{children:e.children})]}),n.jsx(Rt,{marginClass:"my-3"})]})}function Cc(){const e=_().NORMAL_ROUTER,t=_().APP_VERSION,s=_().BACKEND_URL;return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"mb-8 mt-12",children:"Configured values"}),n.jsx(Ft,{name:"Routing mode",children:e?"Normal routing":"Hash based routing"}),n.jsxs(Ft,{name:"Application version",children:["v",t]}),n.jsx(Ft,{name:"Backend URL",children:s})]})}function Ln(e){return n.jsx("div",{className:"bg-video-scraping-card rounded-xl p-8",children:e.children})}function Ec(){const e=_().TMDB_READ_API_KEY,[t,s]=d.useState({hasTested:!1,success:!1,errorText:""}),[r,i]=oe(async()=>{if(s({hasTested:!1,success:!1,errorText:""}),e.length===0)return s({hasTested:!0,success:!1,errorText:"TMDB API key is not set"});if(!(e.split(".").length>2))return s({hasTested:!0,success:!1,errorText:"TMDB API key is not a read only key"});try{await Nt("556574",q.MOVIE)}catch{return s({hasTested:!0,success:!1,errorText:"Failed to call TMDB, double check API key and your internet connection"})}return s({hasTested:!0,success:!0,errorText:""})},[e,s]);return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"mb-8 mt-12",children:"TMDB test"}),n.jsx(Ln,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-1",children:t.hasTested?t.success?n.jsxs("p",{className:"flex items-center",children:[n.jsx(I,{icon:w.CIRCLE_CHECK,className:"text-video-scraping-success mr-2"}),"TMDB is working as expected"]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-white font-bold w-full mb-3 flex items-center gap-1",children:[n.jsx(I,{icon:w.CIRCLE_EXCLAMATION,className:"text-video-scraping-error mr-2"}),"TMDB is not working"]}),n.jsx("p",{children:t.errorText})]}):n.jsx("p",{children:"Run the test to validate TMDB"})}),n.jsxs(R,{theme:"purple",onClick:i,children:[r.loading?n.jsx(St,{className:"text-base mr-2"}):null,"Test TMDB"]})]})})]})}function it(e){return n.jsxs("div",{className:"flex mb-2",children:[n.jsx(I,{icon:e.errored?w.WARNING:e.success?w.CIRCLE_CHECK:w.EYE_SLASH,className:S({"text-xl mr-2 mt-0.5":!0,"text-video-scraping-error":e.errored,"text-video-scraping-noresult":!e.errored&&!e.success,"text-video-scraping-success":e.success})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-white font-bold",children:e.name}),e.errorText?n.jsx("p",{children:e.errorText}):null]})]})}function Ic(){const e=d.useMemo(()=>pn().map((l,c)=>({id:c.toString(),url:l})),[]),[t,s]=d.useState([]),[r,i]=d.useState(!1),[a,o]=oe(async()=>{i(!0);function l(u,m){s(p=>[...p.filter(g=>g.id!==u),m])}s([]);const c=e.map(async u=>{try{if(u.url.endsWith("/")){l(u.id,{id:u.id,status:"error",error:new Error("URL ends with slash")});return}await bn(u.url,"https://postman-echo.com/get",{}),l(u.id,{id:u.id,status:"success"})}catch(m){l(u.id,{id:u.id,status:"error",error:m})}});await Promise.all(c),setTimeout(()=>i(!1),5e3)},[e,s]);return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"!mb-0 mt-12",children:"Worker tests"}),n.jsxs("p",{className:"mb-8 mt-2",children:[e.length," worker(s) registered"]}),n.jsxs(Ln,{children:[e.map((l,c)=>{var p;const u=t.find(g=>g.id===l.id),m=`Worker ${c+1}`;return u?u.status==="error"?n.jsx(it,{name:m,errored:!0,errorText:(p=u.error)==null?void 0:p.toString()},l.id):u.status==="success"?n.jsx(it,{name:m,success:!0},l.id):n.jsx(it,{name:m},l.id):n.jsx(it,{name:m},l.id)}),n.jsx(Rt,{}),n.jsx("div",{className:"flex justify-end",children:n.jsx(R,{theme:"purple",loading:a.loading,onClick:r?void 0:o,disabled:r,children:"Test workers"})})]})]})}async function Or(e){return O("/meta",{baseURL:e})}function Lc(){var a,o,l,c;const e=_().BACKEND_URL,[t,s]=d.useState({hasTested:!1,success:!1,errorText:"",value:null}),[r,i]=oe(async()=>{if(s({hasTested:!1,success:!1,errorText:"",value:null}),!e)return s({hasTested:!0,success:!1,errorText:"Backend URL is not set",value:null});try{const u=await Or(e);return s({hasTested:!0,success:!0,errorText:"",value:u})}catch{return s({hasTested:!0,success:!1,errorText:"Failed to call backend, double check the URL, your internet connection, and ensure CORS is properly configured on your backend.",value:null})}},[s]);return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"mb-8 mt-12",children:"Backend API test"}),n.jsxs(Ln,{children:[n.jsx("div",{children:n.jsx("div",{className:"flex-1",children:t.hasTested&&t.success?n.jsxs(n.Fragment,{children:[n.jsxs("p",{children:[n.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Version:"}),(a=t.value)==null?void 0:a.version]}),n.jsxs("p",{children:[n.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Backend name:"}),(o=t.value)==null?void 0:o.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Description:"}),((l=t.value)==null?void 0:l.description)??"Not set"]}),n.jsxs("p",{children:[n.jsx("span",{className:"inline-block w-36 text-white font-medium",children:"Captcha enabled:"}),(c=t.value)!=null&&c.hasCaptcha?"Yes":"No"]}),n.jsx(Rt,{})]}):null})}),n.jsxs("div",{className:"w-full flex gap-6 justify-between items-center",children:[t.hasTested?t.success?n.jsxs("p",{className:"flex items-center text-md",children:[n.jsx(I,{icon:w.CIRCLE_CHECK,className:"text-video-scraping-success mr-2"}),"Backend is working as expected"]}):n.jsxs("div",{children:[n.jsxs("p",{className:"text-white font-bold w-full mb-3 flex items-center gap-1",children:[n.jsx(I,{icon:w.CIRCLE_EXCLAMATION,className:"text-video-scraping-error mr-2"}),"Backend is not working"]}),n.jsx("p",{children:t.errorText})]}):n.jsx("p",{children:"Run the test to validate backend"}),n.jsx(R,{theme:"purple",loading:r.loading,className:"whitespace-nowrap",onClick:i,children:"Test backend"})]})]})]})}function Tc(){return n.jsx(Xe,{children:n.jsxs(Lt,{children:[n.jsx(Et,{children:"Admin tools"}),n.jsx(Q,{children:"Useful tools to test out your current deployment"}),n.jsx(Cc,{}),n.jsx(Lc,{}),n.jsx(Ic,{}),n.jsx(Ec,{})]})})}function Rc(e){return n.jsx("div",{className:"relative my-4 max-w-[25rem]",children:n.jsx(tt,{value:e.selectedItem,onChange:e.setSelectedItem,children:()=>n.jsxs(n.Fragment,{children:[n.jsxs(tt.Button,{className:"relative w-full rounded-lg bg-dropdown-background hover:bg-dropdown-hoverBackground py-3 pl-3 pr-10 text-left text-white shadow-md focus:outline-none tabbable cursor-pointer",children:[n.jsxs("span",{className:"flex gap-4 items-center truncate",children:[e.selectedItem.leftIcon?e.selectedItem.leftIcon:null,e.selectedItem.name]}),n.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:n.jsx(I,{icon:w.UP_DOWN_ARROW,className:"transform transition-transform text-xl text-dropdown-secondary"})})]}),n.jsx(Ht,{as:d.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx(tt.Options,{className:"absolute left-0 right-0 top-10 z-[1] mt-4 max-h-60 overflow-auto rounded-md bg-dropdown-background py-1 text-white shadow-lg ring-1 ring-black ring-opacity-5 scrollbar-thin scrollbar-track-background-secondary scrollbar-thumb-type-secondary focus:outline-none sm:top-10",children:e.options.map(t=>n.jsxs(tt.Option,{className:s=>{let{active:r}=s;return`cursor-pointer flex gap-4 items-center relative select-none py-3 pl-4 pr-4 ${r?"bg-background-secondaryHover text-type-link":"text-white"}`},value:t,children:[t.leftIcon?t.leftIcon:null,t.name]},t.id))})})]})})})}const Pc=e=>({casting:{instance:null,player:null,controller:null,setInstance(t){e(s=>{s.casting.instance=t})},setPlayer(t){e(s=>{s.casting.player=t})},setController(t){e(s=>{s.casting.controller=t})},setIsCasting(t){e(s=>{s.interface.isCasting=t})},clear(){e(t=>{t.casting.instance=null})}}}),Ac={unknown:0,360:10,480:20,720:30,1080:40,"4k":25},be=Object.entries(Ac).sort((e,t)=>t[1]-e[1]).map(e=>e[0]);function Mr(e,t){if(t.automaticQuality||t.lastChosenQuality===null||t.lastChosenQuality==="unknown")return be.find(i=>e.includes(i));const s=be.indexOf(t.lastChosenQuality);let r;for(let i=s;i<be.length;i+=1)if(e.includes(be[i])){r=be[i];break}if(r)return r;for(let i=s;i>=0;i-=1)if(e.includes(be[i])){r=be[i];break}return r}function Zt(e,t){if(e.type==="hls")return{stream:e,quality:null};if(e.type==="file"){const s=Object.entries(e.qualities).filter(i=>(i[1].url.length??0)>0).map(i=>i[0]),r=Mr(s,t);if(r){const i=e.qualities[r];if(i)return{stream:i,quality:r}}}throw new Error("couldn't select quality")}const Dr={"4k":"4K",1080:"1080p",360:"360p",480:"480p",720:"720p",unknown:"unknown"},_c=Object.keys(Dr);function Br(e){return Dr[e]}const Ve=$(ue(H(e=>({quality:{automaticQuality:!0,lastChosenQuality:null},setLastChosenQuality(t){e(s=>{s.quality.lastChosenQuality=t})},setAutomaticQuality(t){e(s=>{s.quality.automaticQuality=t})}})),{name:"__MW::quality"})),P={IDLE:"idle",SCRAPING:"scraping",PLAYING:"playing",SCRAPE_NOT_FOUND:"scrapeNotFound",PLAYBACK_ERROR:"playbackError"};function Fr(e){if(e.type==="show"){if(!e.episode||!e.season)throw new Error("missing show data");return{title:e.title,releaseYear:e.releaseYear,tmdbId:e.tmdbId,type:"show",imdbId:e.imdbId,episode:e.episode,season:e.season}}return{title:e.title,releaseYear:e.releaseYear,tmdbId:e.tmdbId,type:"movie",imdbId:e.imdbId}}const Oc=(e,t)=>({source:null,sourceId:null,qualities:[],captionList:[],currentQuality:null,status:P.IDLE,meta:null,caption:{selected:null,asTrack:!1},setSourceId(s){e(r=>{r.status=P.PLAYING,r.sourceId=s})},setStatus(s){e(r=>{r.status=s})},setMeta(s,r){e(i=>{i.meta=s,i.interface.hideNextEpisodeBtn=!1,r&&(i.status=r)})},setCaption(s){var i;(i=t().display)==null||i.setCaption(s),e(a=>{a.caption.selected=s})},setSource(s,r,i){let a=[];s.type==="file"&&(a=Object.keys(s.qualities));const o=Ve.getState(),l=Zt(s,o.quality);e(u=>{u.source=s,u.qualities=a,u.currentQuality=l.quality,u.captionList=r,u.interface.error=void 0,u.status=P.PLAYING}),t().redisplaySource(i)},redisplaySource(s){var l;const r=t(),i=r.currentQuality;if(!r.source)return;const a=Ve.getState(),o=Zt(r.source,{automaticQuality:a.quality.automaticQuality,lastChosenQuality:i});e(c=>{c.interface.error=void 0,c.status=P.PLAYING}),(l=r.display)==null||l.load({source:o.stream,startAt:s,automaticQuality:a.quality.automaticQuality,preferredQuality:a.quality.lastChosenQuality})},switchQuality(s){var i,a;const r=t();if(r.source)if(r.source.type==="file"){const o=r.source.qualities[s];if(!o)return;e(l=>{l.currentQuality=s,l.status=P.PLAYING,l.interface.error=void 0}),(i=r.display)==null||i.load({source:o,startAt:r.progress.time,automaticQuality:!1,preferredQuality:s})}else r.source.type==="hls"&&((a=r.display)==null||a.changeQuality(!1,s))},enableAutomaticQuality(){var r;(r=t().display)==null||r.changeQuality(!0,null)}}),Mc=(e,t)=>({display:null,setDisplay(s){const r=t().display;if(r&&r.destroy(),!s){e(i=>{i.display=null});return}s.on("pause",()=>e(i=>{i.mediaPlaying.isPaused=!0,i.mediaPlaying.isPlaying=!1})),s.on("play",()=>e(i=>{i.mediaPlaying.hasPlayedOnce=!0,i.mediaPlaying.isPaused=!1,i.mediaPlaying.isPlaying=!0})),s.on("fullscreen",i=>e(a=>{a.interface.isFullscreen=i})),s.on("time",i=>e(a=>{a.progress.time=i})),s.on("volumechange",i=>e(a=>{a.mediaPlaying.volume=i})),s.on("duration",i=>e(a=>{a.progress.duration=i})),s.on("buffered",i=>e(a=>{a.progress.buffered=i})),s.on("loading",i=>e(a=>{a.mediaPlaying.isLoading=i})),s.on("qualities",i=>{e(a=>{a.qualities=i})}),s.on("changedquality",i=>{e(a=>{a.currentQuality=i})}),s.on("needstrack",i=>{e(a=>{a.caption.asTrack=i})}),s.on("canairplay",i=>{e(a=>{a.interface.canAirplay=i})}),s.on("playbackrate",i=>{e(a=>{a.mediaPlaying.playbackRate=i})}),s.on("error",i=>{e(a=>{a.status=P.PLAYBACK_ERROR,a.interface.error=i})}),e(i=>{i.display=s})},reset(){var s;(s=t().display)==null||s.load({source:null,startAt:0,automaticQuality:!1,preferredQuality:null}),e(r=>{r.status=P.IDLE,r.meta=null,r.thumbnails.images=[],r.progress.time=0,r.progress.duration=0})}});let Ce=function(e){return e[e.REGULAR=0]="REGULAR",e[e.REMAINING=1]="REMAINING",e}({}),re=function(e){return e.NOT_HOVERING="not_hovering",e.MOUSE_HOVER="mouse_hover",e.MOBILE_TAPPED="mobile_tapped",e}({});const Dc=(e,t)=>({interface:{isCasting:!1,hasOpenOverlay:!1,isFullscreen:!1,isSeeking:!1,lastVolume:0,leftControlHovering:!1,isHoveringControls:!1,hovering:re.NOT_HOVERING,lastHoveringState:re.NOT_HOVERING,volumeChangedWithKeybind:!1,volumeChangedWithKeybindDebounce:null,timeFormat:Ce.REGULAR,canAirplay:!1,hideNextEpisodeBtn:!1,shouldStartFromBeginning:!1},setShouldStartFromBeginning(s){e(r=>{r.interface.shouldStartFromBeginning=s})},setLastVolume(s){e(r=>{r.interface.lastVolume=s})},setHasOpenOverlay(s){e(r=>{r.interface.hasOpenOverlay=s})},setTimeFormat(s){e(r=>{r.interface.timeFormat=s})},updateInterfaceHovering(s){e(r=>{s!==re.NOT_HOVERING&&(r.interface.lastHoveringState=s),r.interface.hovering=s})},setSeeking(s){const r=t().display;r==null||r.setSeeking(s),e(i=>{i.interface.isSeeking=s})},setHoveringLeftControls(s){e(r=>{r.interface.leftControlHovering=s})},setHoveringAnyControls(s){e(r=>{r.interface.isHoveringControls=s})},hideNextEpisodeButton(){e(s=>{s.interface.hideNextEpisodeBtn=!0})}}),Bc=e=>({mediaPlaying:{isPlaying:!1,isPaused:!0,isLoading:!1,isSeeking:!1,isDragSeeking:!1,hasPlayedOnce:!1,volume:1,playbackRate:1},play(){e(t=>{t.mediaPlaying.isPlaying=!0,t.mediaPlaying.isPaused=!1})},pause(){e(t=>{t.mediaPlaying.isPlaying=!1,t.mediaPlaying.isPaused=!1})}}),Fc=e=>({progress:{time:0,duration:0,buffered:0,draggingTime:0},setDraggingTime(t){e(s=>{s.progress.draggingTime=t})}});function Uc(e,t){if(e.length===0)return null;const s=e.findIndex(l=>l.at>t);if(s===-1)return{index:e.length-1,image:e[e.length-1]};const r=e[s];if(s===0)return{index:s,image:r};const i=e[s-1],a=t-i.at,o=r.at-t;return a<o?{index:s-1,image:i}:{index:s,image:r}}const Vc=(e,t)=>({thumbnails:{images:[],resetImages(){e(s=>{s.thumbnails.images=[]})},addImage(s){const r=t(),i=r.thumbnails.images.findIndex(o=>o.at>=s.at);if(i===-1){e(o=>{o.thumbnails.images.push(s),o.thumbnails.images=[...o.thumbnails.images]});return}if(r.thumbnails.images[i].at===s.at){e(o=>{o.thumbnails.images[i]=s,o.thumbnails.images=[...o.thumbnails.images]});return}e(o=>{o.thumbnails.images.splice(i,0,s),o.thumbnails.images=[...o.thumbnails.images]})}}}),x=$(H(function(){return{...Dc(...arguments),...Fc(...arguments),...Bc(...arguments),...Oc(...arguments),...Mc(...arguments),...Pc(...arguments),...Vc(...arguments)}})),$c=Ga.sanitize;function Hc(e,t,s,r){const i=e/1e3+s,a=t/1e3+s;return Math.max(0,i)<=r&&Math.max(0,a)>=r}function Wc(e,t,s){return`${e}-${t}-${s}`}function Ur(e){const t=e.trim();if(t==="")throw new Error("Given text is empty");const s=fn(t,"vtt");if(qs(s)==="")throw new Error("Invalid subtitle format");return s}function Vr(e){const t=e.trim();if(t==="")throw new Error("Given text is empty");const s=fn(t,"srt");if(qs(s)==="")throw new Error("Invalid subtitle format");return s}function Gc(e,t){const s=Ur(e);return Ka(s).filter(r=>r.type==="caption")}function Kc(e){return btoa(String.fromCodePoint(...new TextEncoder().encode(e)))}function zc(e){return`data:application/x-subrip;base64,${Kc(Vr(e))}`}function qc(e){return URL.createObjectURL(new Blob([Ur(e)],{type:"text/vtt"}))}function en(e){return e.map(t=>({id:t.id,language:t.language,url:t.url,needsProxy:t.hasCorsRestrictions}))}const Qc=za().map(e=>`.${e}`),tn=new xr;tn.setCompare((e,t)=>e===t);const Yc=24*60*60;async function Xc(e){const t=tn.get(e.url);if(t)return t;let s;if(e.needsProxy)if(ce()){const i=await Zs({url:e.url,method:"GET"});if(!(i!=null&&i.success)||typeof i.response.body!="string")throw new Error("failed to get caption data from extension");s=i.response.body}else s=await zt(e.url,{responseType:"text"});else s=await fetch(e.url).then(i=>i.text());if(!s)throw new Error("failed to get caption data");const r=Vr(s);return tn.set(e.url,r,Yc),r}function Pt(){const e=B(g=>g.setLanguage),t=B(g=>g.enabled),s=B(g=>g.resetSubtitleSpecificSettings),r=x(g=>g.setCaption),i=B(g=>g.lastSelectedLanguage),a=x(g=>g.captionList),o=d.useCallback(async g=>{const h=a.find(v=>v.id===g);if(!h)return;const f=await Xc(h);r({id:h.id,language:h.language,srtData:f,url:h.url}),s(),e(h.language)},[e,a,r,s]),l=d.useCallback(async g=>{const h=a.find(f=>f.language===g);if(h)return o(h.id)},[a,o]),c=d.useCallback(async()=>{r(null),e(null)},[r,e]),u=d.useCallback(async()=>(await l(i??"en"),!0),[i,l]),m=d.useCallback(async()=>{t?c():await u()},[u,c,t]),p=d.useCallback(async()=>{t&&await u()},[u,t]);return{selectLanguage:l,disable:c,selectLastUsedLanguage:u,toggleLastUsed:m,selectLastUsedLanguageIfEnabled:p,selectCaptionById:o}}function Jc(){const e=x(r=>r.display),t=yn(r=>r.volume);return{init:d.useCallback(()=>{e==null||e.setVolume(t)},[e,t])}}function Zc(){const e=x(i=>i.source),t=d.useMemo(()=>e?JSON.stringify(e):null,[e]),{selectLastUsedLanguageIfEnabled:s}=Pt(),r=d.useRef(s);d.useEffect(()=>{r.current=s},[s]),d.useEffect(()=>{t&&r.current()},[t])}function eu(e,t){var i;const s=e[(t==null?void 0:t.tmdbId)??""];if(!s||!t)return 0;if(t.type==="movie")return s.progress?s.progress.watched:0;const r=s.episodes[((i=t.episode)==null?void 0:i.tmdbId)??""];return r?r.progress.watched:0}function $r(){const e=x(g=>g.setStatus),t=x(g=>g.setMeta),s=x(g=>g.setSource),r=x(g=>g.setCaption),i=x(g=>g.setSourceId),a=x(g=>g.status),o=x(g=>g.interface.shouldStartFromBeginning),l=x(g=>g.setShouldStartFromBeginning),c=x(g=>g.reset),u=x(g=>g.meta),{init:m}=Jc(),p=G();return{meta:u,reset:c,status:a,shouldStartFromBeginning:o,setShouldStartFromBeginning:l,setMeta(g,h){t(g,h)},playMedia(g,h,f,v){const b=v??eu(p.items,u);r(null),s(g,h,b),i(f),e(P.PLAYING),m()},setScrapeStatus(){e(P.SCRAPING)},setScrapeNotFound(){e(P.SCRAPE_NOT_FOUND)}}}const Tn=d.forwardRef((e,t)=>{let{onChange:s,onUnFocus:r,value:i,label:a,name:o,autoComplete:l,className:c,placeholder:u,onFocus:m,passwordToggleable:p}=e,g="text";const[h,f]=d.useState(!0);p&&(g=h?"password":"text");const v=n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:g,ref:t,className:S(c,p&&"pr-12"),placeholder:u,onChange:b=>s&&s(b.target.value),value:i,name:o,autoComplete:l,onBlur:()=>r&&r(),onFocus:()=>m==null?void 0:m(),onKeyDown:b=>b.key==="Enter"?b.target.blur():null}),p?n.jsx("button",{type:"button",className:"absolute top-1/2 -translate-y-1/2 right-1 text-xl p-3",onClick:()=>f(!h),children:n.jsx(I,{icon:h?w.EYE:w.EYE_SLASH})}):null]});return a?n.jsxs("label",{children:[n.jsx("span",{children:a}),v]}):v});function tu(e){return n.jsx("p",{className:S("text-errors-type-secondary",e.marginClass??"mt-6"),children:e.children})}function nu(){const{t:e}=C(),t=x(r=>r.interface.error),s=Cn("error");return n.jsxs(Sn,{children:[n.jsxs(Nn,{children:[n.jsx(kn,{icon:w.WAND,children:e("player.playbackError.badge")}),n.jsx(He,{children:e("player.playbackError.title")}),n.jsx(tu,{children:e("player.playbackError.text")}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(R,{href:"/",theme:"secondary",padding:"md:px-12 p-2.5",className:"mt-6",children:e("player.playbackError.homeButton")}),n.jsx(R,{onClick:()=>s.show(),theme:"purple",padding:"md:px-12 p-2.5",className:"mt-6",children:e("errors.showError")})]})]}),n.jsx(ac,{onClose:()=>s.hide(),error:t,id:s.id})]})}const le=d.forwardRef((e,t)=>n.jsxs("button",{ref:t,type:"button",onClick:s=>{var r;return(r=e.onClick)==null?void 0:r.call(e,s.currentTarget)},className:S(["tabbable p-2 rounded-full hover:bg-video-buttonBackground hover:bg-opacity-50 transition-transform duration-100 flex items-center gap-3",e.activeClass??"active:scale-110 active:bg-opacity-75 active:text-white",e.className??""]),children:[e.icon&&n.jsx(I,{className:e.iconSizeClass||"text-2xl",icon:e.icon}),e.children]}));function gs(e){const t=x(i=>i.display),{isPaused:s}=x(i=>i.mediaPlaying),r=()=>{s?t==null||t.play():t==null||t.pause()};return n.jsx(le,{className:e.className,iconSizeClass:e.iconSizeClass,onClick:r,icon:s?w.PLAY:w.PAUSE})}function xs(){const{isFullscreen:e}=x(s=>s.interface),t=x(s=>s.display);return n.jsx(le,{onClick:()=>t==null?void 0:t.toggleFullscreen(),icon:e?w.COMPRESS:w.EXPAND})}const Hr=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);let Ut=null;async function pt(){if(Ut===null){const e=new Promise(s=>{setTimeout(()=>s(!1),1e3)}),t=new Promise(s=>{const r=document.createElement("video"),i=()=>{r.removeEventListener("volumechange",i),s(!0)};r.addEventListener("volumechange",i),r.volume=.5});Ut=await Promise.race([t,e])}return Ut}function At(){return J.fullscreenEnabled}function Wr(){return At()||Hr}function Gr(){return At()||Wr()}function Kr(){return"pictureInPictureEnabled"in document}function zr(){return"webkitSupportsPresentationMode"in document.createElement("video")}function lt(e){return de.isSupported()?!1:!!e.canPlayType("application/vnd.apple.mpegurl")}function su(){const e=Ri();return(e==null?void 0:e.type)!=="browser"?"unknown":e.name==="ios"||e.name==="ios-webview"?"ios":e.name==="chrome"||e.name==="chromium-webview"||e.name==="edge-chromium"||e.name==="opera"?"chrome":e.name==="firefox"?"firefox":"unknown"}function ps(){const e=x(t=>t.display);return!Kr()&&!zr()?null:n.jsx(le,{onClick:()=>e==null?void 0:e.togglePictureInPicture(),icon:w.PICTURE_IN_PICTURE})}function ru(e){return`${e.toFixed(2)}%`}function bs(e){return Number(Math.max(0,Math.min(e,100)).toFixed(2))}function iu(e){return e.type==="mousedown"||e.type==="mouseup"||e.type==="mousemove"}const Vt=e=>iu(e)?e.pageX:e.changedTouches[0].pageX;function Rn(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const[r,i]=d.useState(!1),[a,o]=d.useState(0);d.useEffect(()=>{function c(m){if(!r||!e.current)return;const p=e.current.getBoundingClientRect(),g=(Vt(m)-p.left)/e.current.offsetWidth;o(g*100),s&&t(g)}function u(m){if(!r||(i(!1),document.body.removeAttribute("data-no-select"),!e.current))return;const p=e.current.getBoundingClientRect(),g=(Vt(m)-p.left)/e.current.offsetWidth;t(g)}return document.addEventListener("mousemove",c),document.addEventListener("touchmove",c),document.addEventListener("mouseup",u),document.addEventListener("touchend",u),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("touchmove",c),document.removeEventListener("mouseup",u),document.removeEventListener("touchend",u)}},[r,e,t,s]);const l=d.useCallback(c=>{if(i(!0),document.body.setAttribute("data-no-select","true"),!e.current)return;const u=e.current.getBoundingClientRect(),m=(Vt(c)-u.left)/e.current.offsetWidth*100;o(m)},[o,e]);return{dragging:r,dragPercentage:a,dragMouseDown:l}}function ct(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Number.isNaN(e))return t?"0:00:00":"0:00";let s=e;const r=Math.floor(s%60);s/=60;const i=Math.floor(s%60);s/=60;const a=Math.floor(s),o=r.toString().padStart(2,"0"),l=i.toString().padStart(2,"0");return t?[a,l,o].join(":"):[l,o].join(":")}function nn(e){return e>60*60}function au(e){const t=x(o=>o.thumbnails.images),s=d.useMemo(()=>{var o;return(o=Uc(t,e.at))==null?void 0:o.image},[t,e.at]),[r,i]=d.useState({offscreenLeft:0,offscreenRight:0}),a=d.useRef(null);return d.useEffect(()=>{if(!a.current)return;const o=a.current.getBoundingClientRect(),l=32,c=Math.max(0,(o.left-l)*-1),u=Math.max(0,o.right+l-window.innerWidth);i({offscreenLeft:c,offscreenRight:u})},[e.at]),!e.show||!s?null:n.jsx("div",{className:"flex flex-col items-center -translate-x-1/2 pointer-events-none",children:n.jsx("div",{className:"w-screen flex justify-center",children:n.jsx("div",{ref:a,children:n.jsxs("div",{style:{transform:`translateX(${r.offscreenLeft>0?r.offscreenLeft:-r.offscreenRight}px)`},children:[n.jsx("img",{src:s.data,className:"h-24 border rounded-xl border-gray-800"}),n.jsx("p",{className:"text-center mt-1",children:ct(Math.max(e.at,0),nn(e.at))})]})})})})}function ou(e){const[t,s]=d.useState(-1),r=d.useCallback(a=>{if(!e.current)return;const l=e.current.getBoundingClientRect(),c=(a.pageX-l.left)/e.current.offsetWidth;s(c*100)},[s,e]),i=d.useCallback(()=>{s(-1)},[s]);return{mousePos:t,mouseMove:r,mouseLeave:i}}const lu=function(){const{duration:t,time:s,buffered:r}=x(b=>b.progress),i=x(b=>b.display),a=x(b=>b.setDraggingTime),o=x(b=>b.setSeeking),{isSeeking:l}=x(b=>b.interface),c=d.useCallback(b=>{i==null||i.setTime(b*t)},[t,i]),u=d.useRef(null),{mouseMove:m,mouseLeave:p,mousePos:g}=ou(u),{dragging:h,dragPercentage:f,dragMouseDown:v}=Rn(u,c);return d.useEffect(()=>{o(h)},[o,h]),d.useEffect(()=>{a(f/100*t)},[a,t,f]),n.jsxs("div",{className:"w-full relative",dir:"ltr",children:[n.jsx("div",{className:"top-0 absolute inset-x-0",children:n.jsx("div",{className:"absolute bottom-0",style:{left:`${g}%`},children:n.jsx(au,{at:Math.floor(g/100*t),show:g>-1})})}),n.jsx("div",{className:"w-full",ref:u,children:n.jsx("div",{className:"group w-full h-8 flex items-center cursor-pointer",onMouseDown:v,onTouchStart:v,onMouseLeave:p,onMouseMove:m,children:n.jsxs("div",{className:["relative w-full h-1 bg-progress-background bg-opacity-25 rounded-full transition-[height] duration-100 group-hover:h-1.5",h?"!h-1.5":""].join(" "),children:[n.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full bg-progress-preloaded bg-opacity-50 flex justify-end items-center",style:{width:`${r/t*100}%`}}),n.jsx("div",{className:"absolute top-0 dir-neutral:left-0 h-full rounded-full bg-progress-filled flex justify-end items-center",style:{width:`${Math.max(0,Math.min(1,h?f/100:s/t))*100}%`},children:n.jsx("div",{className:["w-[1rem] min-w-[1rem] h-[1rem] rounded-full transform translate-x-1/2 scale-0 group-hover:scale-100 bg-white transition-[transform] duration-100",l?"scale-100":""].join(" ")})})]})})})]})},cu=lu;function ys(e){const t=x(i=>i.display),s=x(i=>i.progress.time),r=d.useCallback(()=>{t==null||t.setTime(s+10)},[t,s]);return n.jsx(le,{iconSizeClass:e.iconSizeClass,onClick:r,icon:w.SKIP_FORWARD})}function vs(e){const t=x(i=>i.display),s=x(i=>i.progress.time),r=d.useCallback(()=>{t==null||t.setTime(s-10)},[t,s]);return n.jsx(le,{iconSizeClass:e.iconSizeClass,onClick:r,icon:w.SKIP_BACKWARD})}function js(e){const t=x(y=>y.interface.timeFormat),s=x(y=>y.setTimeFormat),{duration:r,time:i,draggingTime:a}=x(y=>y.progress),{isSeeking:o}=x(y=>y.interface),{t:l}=C(),c=nn(r);function u(){s(t===Ce.REGULAR?Ce.REMAINING:Ce.REGULAR)}const m=Math.min(Math.max(o?a:i,0),r),p=Math.abs(m-r),g=ct(p,nn(p)),h=ct(m,c),f=new Date(Date.now()+p*1e3),v=ct(r,c);let b=t===Ce.REGULAR?"regular":"remaining";return e.short&&(b=t===Ce.REGULAR?"shortRegular":"shortRemaining"),n.jsx(le,{onClick:()=>u(),children:n.jsx("span",{children:l(`player.time.${b}`,{timeFinished:f,timeWatched:h,timeLeft:g,duration:v,formatParams:{timeFinished:{hour:"numeric",minute:"numeric"}}})})})}function uu(){return x(t=>t.mediaPlaying.isLoading)?n.jsx(St,{className:"text-4xl"}):null}function du(){const e=x(o=>o.display),t=x(o=>o.mediaPlaying.isPlaying),s=x(o=>o.mediaPlaying.isLoading),r=x(o=>o.mediaPlaying.hasPlayedOnce),i=x(o=>o.status),a=d.useCallback(()=>{e==null||e.play()},[e]);return r||t||s||i!==P.PLAYING?null:n.jsx("div",{onClick:a,className:"group pointer-events-auto flex h-16 w-16 cursor-pointer items-center justify-center bg-video-autoPlay-background hover:bg-video-autoPlay-hover rounded-full text-white transition-[background-color,transform] hover:scale-125 active:scale-100",children:n.jsx(I,{icon:w.PLAY,className:"text-2xl transition-transform group-hover:scale-125"})})}function qr(){const e=x(o=>o.mediaPlaying.volume),t=x(o=>o.interface.lastVolume),s=x(o=>o.setLastVolume),r=x(o=>o.display),i=yn(o=>o.setVolume),a=()=>{let o=0;e>0?(o=0,s(e)):t>0?o=t:o=1,r==null||r.setVolume(o),i(o)};return{toggleMute(){a()},setVolume(o){i(o),s(o),r==null||r.setVolume(o)}}}const mu=function(t){const s=d.useRef(null),r=x(y=>y.setHoveringLeftControls),i=x(y=>y.interface.leftControlHovering),a=x(y=>y.mediaPlaying.volume),{setVolume:o,toggleMute:l}=qr(),c=d.useCallback(y=>{o(y)},[o]),{dragging:u,dragPercentage:m,dragMouseDown:p}=Rn(s,c,!0),g=d.useCallback(()=>{l()},[l]),h=d.useCallback(async()=>{await pt()&&r(!0)},[r]);let f=bs(a*100);u&&(f=bs(m));const v=ru(f),b=d.useCallback(y=>{y.preventDefault();let j=a-y.deltaY/1e3;j=Math.max(0,Math.min(j,1)),o(j)},[a,o]);return n.jsx("div",{className:t.className,onMouseEnter:h,onWheel:b,children:n.jsxs("div",{className:"pointer-events-auto flex cursor-pointer items-center py-0",children:[n.jsx("div",{className:"px-4 text-2xl text-white",onClick:g,children:n.jsx(I,{icon:f>0?w.VOLUME:w.VOLUME_X})}),n.jsx("div",{className:`linear -ml-2 w-0 overflow-hidden transition-[width,opacity] duration-300 ${i||u?"!w-24 opacity-100":"w-4 opacity-0"}`,children:n.jsx("div",{ref:s,className:"flex h-10 w-20 items-center px-2",onMouseDown:p,onTouchStart:p,children:n.jsx("div",{className:"relative h-1 flex-1 rounded-full bg-gray-500 bg-opacity-50",children:n.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-video-audio-set",style:{width:v},children:n.jsx("div",{className:"absolute h-3 w-3 translate-x-1/2 rounded-full bg-white"})})})})})]})})},hu=mu;function fu(){const e=x(t=>{var s;return(s=t.meta)==null?void 0:s.title});return n.jsx("p",{children:e})}function gu(){var s,r,i;const{t:e}=C(),t=x(a=>a.meta);return(t==null?void 0:t.type)!=="show"?null:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("span",{className:"text-white font-medium",children:e("media.episodeDisplay",{season:(s=t==null?void 0:t.season)==null?void 0:s.number,episode:(r=t==null?void 0:t.episode)==null?void 0:r.number})}),n.jsx("span",{className:"text-type-secondary font-medium",children:(i=t==null?void 0:t.episode)==null?void 0:i.title})]})}function Qr(e){return n.jsxs("div",{className:S("relative",e.className),children:[n.jsx("div",{id:`__overlayRouter::${e.id}`,className:"absolute inset-0 -z-10"}),e.children]})}function _t(e){const[t,s]=d.useState(!1),r=d.useRef(!1);return d.useEffect(()=>{function i(){const a=e?window.innerHeight<600:window.innerWidth<1024;r.current!==a&&(r.current=a,s(a))}return i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[e]),{isMobile:t}}function X(e){const t=Me(e.id),s=t.showBackwardsTransition(e.path),r=t.isCurrentPage(e.path),i=Te(u=>u.registerRoute),a=d.useMemo(()=>t.makePath(e.path),[e.path,t]),{isMobile:o}=_t();d.useEffect(()=>{i({id:a,width:e.width,height:e.height})},[e.height,e.width,a,i]);const l=o?"100%":`${e.width}px`;let c="none";return(s==="yes"||s==="no")&&(c=s==="yes"?"slide-full-left":"slide-full-right"),n.jsx(z,{animation:c,className:"absolute inset-0",durationClass:"duration-[400ms]",show:r,children:n.jsx("div",{className:S(["grid grid-rows-1 max-h-full",e.className]),style:{height:e.height?`${e.height}px`:void 0,width:e.width?l:void 0},children:e.children})})}function xu(){const e=Te(u=>u.anchorPoint),t=d.useRef(null),[s,r]=d.useState(0),[i,a]=d.useState(0),[o,l]=d.useState(null),c=d.useCallback((u,m)=>{if(!u)return;const p=u.x+u.w/2,g=window.innerHeight-(u.y+u.h);a(window.innerHeight-g-u.h-m.height-30),r(Math.min(p-m.width/2,window.innerWidth-m.width-30))},[]);return d.useEffect(()=>{!e||!o||c(e,o)},[e,c,o]),d.useEffect(()=>{if(!t.current)return;function u(){var g;const p=(g=t.current)==null?void 0:g.getBoundingClientRect();l(p??null)}u();const m=new ResizeObserver(u);return m.observe(t.current),()=>{m.disconnect()}},[]),[t,s,i]}function pu(e){const[t,s,r]=xu();return n.jsx("div",{ref:t,style:{transform:`translateX(${s}px) translateY(${r}px)`},className:S(["[&>*]:pointer-events-auto z-10 flex dir-neutral:items-start rtl:justify-start ltr:justify-end dir-neutral:origin-top-left touch-none",e.className]),children:e.children})}const bu=function(t){const s=Me("hello world :)"),{t:r}=C();return n.jsxs("div",{className:S(["pointer-events-auto px-4 pb-6 z-10 ml-[env(safe-area-inset-left)] mr-[env(safe-area-inset-right)] bottom-0 origin-top-left inset-x-0 absolute overflow-hidden max-h-[calc(100vh-1.5rem)] grid grid-rows-[minmax(0,1fr),auto]",t.className]),children:[t.children,n.jsx("button",{className:"w-full text-video-context-type-main bg-video-context-background z-10 relative hover:bg-video-context-closeHover active:scale-95 rounded-2xl pointer-events-auto transition-all duration-100 flex justify-center items-center py-3 mt-3 font-bold border border-video-context-border hover:text-white",type:"button",onClick:()=>s.close(),children:r("overlays.close")}),n.jsx("div",{className:"pointer-events-none absolute z-0 bottom-0 left-0 w-full h-32 bg-gradient-to-t from-black to-transparent"})]})},yu=bu,vu=200,ju="--colors-global-accentA";function wu(e){return n.jsx("div",{tabIndex:e.tabIndex,className:S(e.className,"relative"),onKeyUp:e.onKeyUp,children:e.children})}function ku(e){return n.jsx("div",{className:S(e.className,"relative"),children:e.children})}const Nu=function(t){const s=d.useRef(null),r=t.flareSize??vu,i=t.cssColorVar??ju;return d.useEffect(()=>{function a(o){if(!s.current)return;const l=s.current.getBoundingClientRect(),c=r/2;s.current.style.setProperty("--bg-x",`${(o.clientX-l.left-c).toFixed(0)}px`),s.current.style.setProperty("--bg-y",`${(o.clientY-l.top-c).toFixed(0)}px`)}return document.addEventListener("mousemove",a),()=>document.removeEventListener("mousemove",a)},[r]),n.jsx("div",{ref:s,className:S("flare-light pointer-events-none absolute inset-0 overflow-hidden opacity-0 transition-opacity duration-[400ms]",t.className,{"!opacity-100":t.enabled??!1}),style:{backgroundImage:`radial-gradient(circle at center, rgba(var(${i}) / 1), rgba(var(${i}) / 0) 70%)`,backgroundPosition:"var(--bg-x) var(--bg-y)",backgroundRepeat:"no-repeat",backgroundSize:`${r.toFixed(0)}px ${r.toFixed(0)}px`},children:n.jsx("div",{className:S("absolute inset-[1px] overflow-hidden",t.className,t.backgroundClass),children:n.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`radial-gradient(circle at center, rgba(var(${i}) / 1), rgba(var(${i}) / 0) 70%)`,backgroundPosition:"var(--bg-x) var(--bg-y)",backgroundRepeat:"no-repeat",backgroundSize:`${r.toFixed(0)}px ${r.toFixed(0)}px`}})})})},Su=Nu,ie={Base:wu,Light:Su,Child:ku};function Cu(e){const t=d.useRef(null),{isMobile:s}=_t(),r=Te(u=>u.routes),i=Me(e.id),a=d.useMemo(()=>r[i.currentRoute??""],[r,i]),[o,l]=Pi(()=>({from:{height:`${(a==null?void 0:a.height)??0}px`,width:s?"100%":`${(a==null?void 0:a.width)??0}px`},config:{easing:Ai.linear}}),[]),c=d.useRef(null);return d.useEffect(()=>{const u={height:a==null?void 0:a.height,width:a==null?void 0:a.width,isMobile:s},m=JSON.stringify(u);if(m!==c.current){const p=c.current?JSON.parse(c.current):null;c.current=m,u.isMobile?(l.set({width:"100%"}),l.start({height:`${(a==null?void 0:a.height)??0}px`})):(p==null?void 0:p.height)===void 0&&u.height!==void 0?l.set({height:`${(a==null?void 0:a.height)??0}px`,width:`${(a==null?void 0:a.width)??0}px`}):l.start({height:`${(a==null?void 0:a.height)??0}px`,width:`${(a==null?void 0:a.width)??0}px`})}},[a==null?void 0:a.height,a==null?void 0:a.width,s,l]),n.jsx(Hi.div,{ref:t,style:o,className:"overflow-hidden relative z-10 max-h-full",children:n.jsxs(ie.Base,{className:"group w-full bg-video-context-border h-full rounded-2xl transition-colors duration-100 text-video-context-type-main",children:[n.jsx(ie.Light,{flareSize:400,cssColorVar:"--colors-video-context-light",backgroundClass:"bg-video-context-background duration-100",className:"rounded-2xl opacity-100"}),n.jsx(ie.Child,{className:"pointer-events-auto relative transition-transform duration-100 h-full",children:e.children})]})})}function Yr(e){const{isMobile:t}=_t(),s=n.jsx(Cu,{id:e.id,children:e.children});return t?n.jsx(yu,{children:s}):n.jsx(pu,{children:s})}function ws(e){try{return new URL(e).hostname}catch{return null}}function Eu(e){return e.type==="hls"?[ws(e.playlist)].filter(t=>!!t):e.type==="file"?Object.values(e.qualities).map(t=>ws(t.url)).filter(t=>!!t):[]}function Iu(e){const t={};return Object.entries(e.headers??{}).forEach(s=>{t[s[0]]=s[1]}),Object.entries(e.preferredHeaders??{}).forEach(s=>{t[s[0]]=s[1]}),t}async function sn(e){await er({ruleId:Js.PREPARE_STREAM,targetDomains:Eu(e),requestHeaders:Iu(e)})}function rn(){return ce()?qn({fetcher:Oo(),target:Qn.BROWSER_EXTENSION,consistentIpForRequests:!0}):qn({fetcher:_i(fetch),proxiedFetcher:Ao(),target:Qn.BROWSER})}const Lu={"4k":"4k",1080:"1080",480:"480",360:"360",720:"720",unknown:"unknown"},Tu=Object.keys(Lu),Ru=["mp4"];function Pu(e){return Tu.includes(e)}function an(e){if(e.stream.type==="hls")return{type:"hls",url:e.stream.playlist,headers:e.stream.headers,preferredHeaders:e.stream.preferredHeaders};if(e.stream.type==="file"){const t={};return Object.entries(e.stream.qualities).forEach(s=>{if(!Pu(s[0])){console.warn(`unrecognized quality: ${s[0]}`);return}if(!Ru.includes(s[1].type)){console.warn(`unrecognized file type: ${s[1].type}`);return}t[s[0]]={type:s[1].type,url:s[1].url}}),{type:"file",qualities:t,headers:e.stream.headers,preferredHeaders:e.stream.preferredHeaders}}throw new Error("unrecognized type")}function Au(e,t,s,r){const i=x(h=>h.setSource),a=x(h=>h.setCaption),o=x(h=>h.setSourceId),l=x(h=>h.progress.time),c=x(h=>h.meta),u=V(e),{report:m}=sr(),[p,g]=oe(async()=>{const h=cr();let f;if(c){try{if(h&&!ce()){const v=Gt(h);f=await(await Kt(v.scrapeEmbed(r,s),["completed","noOutput"])).promise()}else f=await rn().runEmbedScraper({id:r,url:s})}catch(v){console.error(`Failed to scrape ${r}`,v);const y=v instanceof Ie?"notfound":"failed";throw m([Ee(c,t,r,y,v)]),v}m([Ee(c,t,null,"success",null)]),ce()&&await sn(f.stream[0]),o(t),a(null),i(an({stream:f.stream[0]}),en(f.stream[0].captions),l),u.close()}},[r,t,c,u,m,a]);return{run:g,loading:p.loading,errored:!!p.error}}function _u(e,t){const s=x(p=>p.meta),r=x(p=>p.setSource),i=x(p=>p.setCaption),a=x(p=>p.setSourceId),o=x(p=>p.progress.time),l=V(t),{report:c}=sr(),[u,m]=oe(async()=>{if(!e||!s)return null;const p=Fr(s),g=cr();let h;try{if(g&&!ce()){const f=Gt(g);h=await(await Kt(f.scrapeSource(e,p),["completed","noOutput"])).promise()}else h=await rn().runSourceScraper({id:e,media:p})}catch(f){console.error(`Failed to scrape ${e}`,f);const b=f instanceof Ie?"notfound":"failed";throw c([Ee(s,e,null,b,f)]),f}if(c([Ee(s,e,null,"success",null)]),h.stream)return ce()&&await sn(h.stream[0]),i(null),r(an({stream:h.stream[0]}),en(h.stream[0].captions),o),a(e),l.close(),null;if(h.embeds.length===1){let f;if(!s)return;try{if(g&&!ce()){const v=Gt(g);f=await(await Kt(v.scrapeEmbed(h.embeds[0].embedId,h.embeds[0].url),["completed","noOutput"])).promise()}else f=await rn().runEmbedScraper({id:h.embeds[0].embedId,url:h.embeds[0].url})}catch(v){console.error(`Failed to scrape ${h.embeds[0].embedId}`,v);const y=v instanceof Ie?"notfound":"failed";throw c([Ee(s,e,h.embeds[0].embedId,y,v)]),v}c([Ee(s,e,h.embeds[0].embedId,"success",null)]),a(e),i(null),ce()&&await sn(f.stream[0]),r(an({stream:f.stream[0]}),en(f.stream[0].captions),o),l.close()}return h.embeds},[e,s,l,i]);return{run:m,watching:(u.value??null)===null,loading:u.loading,items:u.value,notfound:u.error instanceof Ie,errored:!!u.error}}function Ou(e){return n.jsx("div",{className:"h-full grid grid-rows-[1fr]",children:n.jsx("div",{className:"px-6 h-full flex flex-col justify-start overflow-y-auto overflow-x-hidden",children:e.children})})}function Mu(e){return n.jsx("div",{className:"[&>*]:px-6 h-full grid grid-rows-[auto,1fr] [&>*:nth-child(2)]:overflow-y-auto [&>*:nth-child(2)]:overflow-x-hidden",children:e.children})}const Du=Object.freeze(Object.defineProperty({__proto__:null,Card:Ou,CardWithScrollable:Mu},Symbol.toStringTag,{value:"Module"}));function Xr(e){return n.jsx("div",{children:n.jsxs("h3",{className:"font-bold text-video-context-type-main pb-3 pt-5 border-b border-video-context-border flex justify-between items-center",children:[n.jsx("div",{className:"flex items-center space-x-3",children:e.children}),n.jsx("div",{children:e.rightSide})]})})}function Bu(e){return n.jsx("button",{type:"button",onClick:e.onClick,children:n.jsx(I,{className:"text-xl",icon:e.icon})})}function Fu(){return n.jsx("hr",{className:"!my-4 border-0 w-full h-px bg-video-context-border"})}function Uu(e){return n.jsx("p",{className:"text-sm mt-8 font-medium",children:e.children})}function Vu(e){return n.jsx("a",{type:"button",className:"text-video-context-type-accent cursor-pointer",onClick:e.onClick,children:e.children})}function $u(e){return n.jsx("p",{className:"font-medium",children:e.children})}function Hu(e){return n.jsx("p",{className:e.marginClass??"my-3",children:e.children})}function Wu(e){return n.jsx("span",{className:"text-white",children:e.children})}function Gu(e){return n.jsx("div",{className:"w-full h-full flex justify-center items-center text-center",children:n.jsxs("div",{className:"flex items-center gap-4 flex-col",children:[e.noIcon?null:n.jsx("div",{className:"w-16 h-10 border border-video-context-border rounded-lg flex justify-center items-center",children:n.jsx(I,{className:"text-xl",icon:w.EYE_SLASH})}),e.title?n.jsx("h2",{className:"text-white text-lg font-bold",children:e.title}):null,n.jsx("div",{children:e.children})]})})}const Ku=Object.freeze(Object.defineProperty({__proto__:null,Anchor:Vu,Divider:Fu,FieldTitle:$u,Highlight:Wu,IconButton:Bu,Paragraph:Hu,SmallText:Uu,TextDisplay:Gu,Title:Xr},Symbol.toStringTag,{value:"Module"}));function Jr(e){return n.jsxs("span",{className:"text-white flex items-center font-medium",children:[e.children,n.jsx(I,{className:"text-xl ml-1 -mr-1.5",icon:w.CHEVRON_RIGHT})]})}function Pn(e){return n.jsx("span",{className:S(["font-medium text-left",e.textClass||"text-video-context-type-main"]),children:e.children})}function zu(e){return n.jsxs(Xr,{rightSide:e.rightSide,children:[n.jsx("button",{type:"button",className:"-ml-2 p-2 rounded tabbable hover:bg-video-context-light hover:bg-opacity-10",onClick:e.onClick,children:n.jsx(I,{className:"text-xl",icon:w.ARROW_LEFT})}),n.jsx("span",{className:"line-clamp-1 break-all",children:e.children})]})}function An(e){const t=S("flex py-2 px-3 rounded-lg w-full -ml-3",{"cursor-default":!e.clickable,"hover:bg-video-context-hoverColor hover:bg-opacity-50 cursor-pointer tabbable":e.clickable,"bg-video-context-hoverColor bg-opacity-50":e.active}),s={width:"calc(100% + 1.5rem)"},r=n.jsxs("div",{className:S("flex items-center flex-1",e.className),children:[n.jsx("div",{className:"flex-1 text-left",children:e.children}),n.jsx("div",{className:"flex",children:e.rightSide})]});return e.onClick?n.jsx("button",{type:"button",className:t,style:s,onClick:e.onClick,"data-active-link":e.active?!0:void 0,children:r}):n.jsx("div",{className:t,style:s,"data-active-link":e.active?!0:void 0,children:r})}function qu(e){const t=n.jsx(Jr,{children:e.rightText});return n.jsx(An,{onClick:e.onClick,active:e.active,clickable:!0,rightSide:t,children:n.jsx(Pn,{children:e.children})})}function Je(e){let t;return e.selected&&(t=n.jsx(I,{icon:w.CIRCLE_CHECK,className:"text-xl text-video-context-type-accent"})),e.error&&(t=n.jsx("span",{className:"flex items-center text-video-context-error",children:n.jsx(I,{className:"ml-2",icon:w.WARNING})})),e.loading&&(t=n.jsx(St,{className:"text-lg"})),n.jsx(An,{onClick:e.onClick,clickable:!e.disabled,rightSide:t,children:n.jsx(Pn,{textClass:S({"text-white":e.selected,"text-video-context-type-main text-opacity-40":e.disabled}),children:e.children})})}const Qu=Object.freeze(Object.defineProperty({__proto__:null,BackLink:zu,Chevron:Jr,ChevronLink:qu,Link:An,LinkTitle:Pn,SelectableLink:Je},Symbol.toStringTag,{value:"Module"}));function Yu(e){return n.jsx("h3",{className:S("uppercase font-bold text-video-context-type-secondary text-xs pt-8 pl-1 pb-2.5 border-b border-video-context-border",e.className),children:e.children})}function Xu(e){return n.jsx("div",{className:S("pt-4 space-y-1",e.className),children:e.children})}function Ju(e){const t=d.useRef(null);return d.useEffect(()=>{var o,l,c;const s=(o=t.current)==null?void 0:o.querySelector("[data-active-link]"),r=(l=t.current)==null?void 0:l.getBoundingClientRect(),i=s==null?void 0:s.getBoundingClientRect();if(!i||!r)return;const a=i.top-r.top;(c=t.current)==null||c.scrollTo(0,a-r.height/2+i.height/2)},[e.loaded]),n.jsx("div",{ref:t,className:S("pt-4 space-y-1",e.className),children:e.children})}const Zu=Object.freeze(Object.defineProperty({__proto__:null,ScrollToActiveSection:Ju,Section:Xu,SectionTitle:Yu},Symbol.toStringTag,{value:"Module"})),N={...Du,...Qu,...Zu,...Ku};function ed(e){const{t}=C(),s=t("player.menus.sources.unknownOption"),r=d.useMemo(()=>{if(!e.embedId)return s;const l=kt().find(c=>c.id===e.embedId);return(l==null?void 0:l.name)??s},[e.embedId,s]),{run:i,errored:a,loading:o}=Au(e.routerId,e.sourceId,e.url,e.embedId);return n.jsx(Je,{loading:o,error:a,onClick:i,children:n.jsx("span",{className:"flex flex-col",children:n.jsx("span",{children:r})})})}function td(e){let{sourceId:t,id:s}=e;const{t:r}=C(),i=V(s),{run:a,watching:o,notfound:l,loading:c,items:u,errored:m}=_u(t,s),p=d.useMemo(()=>{if(!t)return"...";const f=kt().find(v=>v.id===t);return(f==null?void 0:f.name)??"..."},[t]),g=d.useRef(null);d.useEffect(()=>{g.current!==t&&(g.current=t,t&&a())},[a,t]);let h=null;return c?h=n.jsx(N.TextDisplay,{noIcon:!0,children:n.jsx(_e,{})}):l?h=n.jsx(N.TextDisplay,{title:r("player.menus.sources.noStream.title")??void 0,children:r("player.menus.sources.noStream.text")}):(u==null?void 0:u.length)===0?h=n.jsx(N.TextDisplay,{title:r("player.menus.sources.noEmbeds.title")??void 0,children:r("player.menus.sources.noEmbeds.text")}):m?h=n.jsx(N.TextDisplay,{title:r("player.menus.sources.failed.title")??void 0,children:r("player.menus.sources.failed.text")}):o?h=null:u&&t&&(h=u.map(f=>n.jsx(ed,{embedId:f.embedId,url:f.url,routerId:s,sourceId:t},`${f.embedId}-${f.url}`))),n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>i.navigate("/source"),children:p}),n.jsx(N.Section,{children:h})]})}function nd(e){let{id:t,onChoose:s}=e;const{t:r}=C(),i=V(t),a=x(c=>{var u;return(u=c.meta)==null?void 0:u.type}),o=x(c=>c.sourceId),l=d.useMemo(()=>a?kt().filter(c=>c.type==="source").filter(c=>{var u;return(u=c.mediaTypes)==null?void 0:u.includes(a)}):[],[a]);return n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>i.navigate("/"),children:r("player.menus.sources.title")}),n.jsx(N.Section,{className:"pb-4",children:l.map(c=>n.jsx(Je,{onClick:()=>{s==null||s(c.id),i.navigate("/source/embeds")},selected:c.id===o,children:c.name},c.id))})]})}const sd=function(t){return n.jsx("button",{type:"button",onClick:t.onClick,className:S("w-11 h-6 p-1 rounded-full grid transition-colors duration-100 group/toggle tabbable",t.enabled?"bg-buttons-toggle":"bg-buttons-toggleDisabled"),children:n.jsx("div",{className:"relative w-full h-full",children:n.jsx("div",{className:S("scale-90 group-hover/toggle:scale-100 h-full aspect-square rounded-full bg-white absolute transition-all duration-100",t.enabled?"left-full transform -translate-x-full":"left-0")})})})},_n=sd,rd=function(t){return n.jsx("button",{type:"button",className:S("tabbable p-1.5 bg-video-context-buttonFocus rounded transition-colors duration-100",t.active?"bg-opacity-100":"bg-opacity-0 cursor-pointer"),onClick:t.onClick,children:n.jsx("div",{className:"w-6 h-6 rounded-full flex justify-center items-center",style:{backgroundColor:t.color},children:t.active?n.jsx(I,{className:"text-sm text-black",icon:w.CHECKMARK}):null})})},id=rd,ad=function(t){const s=d.useRef(null),r=d.useRef(null),i=(t.value-t.min)/(t.max-t.min),a=d.useCallback(b=>{var T;const y=t.max-t.min,j=Math.min(Math.max(b,0),1);(T=t.onChange)==null||T.call(t,t.min+y*j)},[t]),{dragging:o,dragPercentage:l,dragMouseDown:c}=Rn(r,a,!0),[u,m]=d.useState(!1),[p,g]=d.useState("");d.useEffect(()=>{function b(y){var j;y.key==="Enter"&&u&&((j=s.current)==null||j.blur())}return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[u]);const h=`tabbable py-1 bg-video-context-inputBg rounded text-white cursor-text ${t.controlButtons?"text-center px-4 w-24":"px-3 text-left w-20"}`,f="tabbable hover:text-white transition-colors duration-100 w-full h-full flex justify-center items-center hover:bg-video-context-buttonOverInputHover rounded",v=t.textTransformer??(b=>b);return n.jsxs("div",{children:[n.jsx(N.FieldTitle,{children:t.label}),n.jsxs("div",{className:"grid items-center grid-cols-[1fr,auto] gap-4",children:[n.jsx("div",{ref:r,children:n.jsx("div",{className:"group/progress w-full h-8 flex items-center cursor-pointer",onMouseDown:c,onTouchStart:c,children:n.jsx("div",{dir:"ltr",className:["relative w-full h-1 bg-video-context-slider bg-opacity-25 rounded-full transition-[height] duration-100 group-hover/progress:h-1.5",o?"!h-1.5":""].join(" "),children:n.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full bg-video-context-sliderFilled flex justify-end items-center",style:{width:`${Math.max(0,Math.min(1,o?l/100:i))*100}%`},children:n.jsx("div",{className:["w-[1rem] min-w-[1rem] h-[1rem] border-[4px] border-video-context-sliderFilled rounded-full transform translate-x-1/2 bg-white transition-[transform] duration-100"].join(" ")})})})})}),n.jsx("div",{children:u?n.jsx("input",{className:h,value:p,autoFocus:!0,onFocus:b=>{b.target.select()},onBlur:b=>{var j;m(!1);const y=Number(b.target.value);Number.isNaN(y)||(j=t.onChange)==null||j.call(t,(t.decimalsAllowed??0)===0?Math.round(y):y)},ref:s,onChange:b=>g(b.target.value)}):n.jsxs("div",{className:"relative",onClick:b=>{b.target.closest(".actions")||(g(t.value.toFixed(t.decimalsAllowed??0)),m(!0))},children:[n.jsx("button",{className:S(h,t.controlButtons?"relative":void 0),type:"button",tabIndex:0,children:v(t.value.toFixed(t.decimalsAllowed??0))}),t.controlButtons?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"actions w-6 h-full absolute left-0 top-0 grid grid-cols-1 items-center justify-center",children:n.jsx("button",{type:"button",onClick:()=>{var b;return(b=t.onChange)==null?void 0:b.call(t,t.value-1/10**(t.decimalsAllowed??0))},className:f,children:n.jsx(I,{icon:w.CHEVRON_LEFT})})}),n.jsx("div",{className:"actions w-6 h-full absolute right-0 top-0 grid grid-cols-1 items-center justify-center",children:n.jsx("button",{type:"button",onClick:()=>{var b;return(b=t.onChange)==null?void 0:b.call(t,t.value+1/10**(t.decimalsAllowed??0))},className:f,children:n.jsx(I,{icon:w.CHEVRON_RIGHT})})})]}):null]})})]})]})},$t=ad,od=["#ffffff","#b0b0b0","#80b1fa","#e2e535"];function ld(e){let{id:t}=e;const{t:s}=C(),r=V(t),i=B(m=>m.styling),a=B(m=>m.overrideCasing),o=B(m=>m.delay),l=B(m=>m.setOverrideCasing),c=B(m=>m.setDelay),u=B(m=>m.updateStyling);return n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>r.navigate("/captions"),children:s("player.menus.subtitles.settings.backlink")}),n.jsxs(N.Section,{className:"space-y-6",children:[n.jsx($t,{label:s("player.menus.subtitles.settings.delay"),max:10,min:-10,onChange:m=>c(m),value:o,textTransformer:m=>`${m}s`,decimalsAllowed:1,controlButtons:!0}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(N.FieldTitle,{children:s("player.menus.subtitles.settings.fixCapitals")}),n.jsx("div",{className:"flex justify-center items-center",children:n.jsx(_n,{enabled:a,onClick:()=>l(!a)})})]}),n.jsx(N.Divider,{}),n.jsx($t,{label:s("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:m=>u({backgroundOpacity:m/100}),value:i.backgroundOpacity*100,textTransformer:m=>`${m}%`}),n.jsx($t,{label:s("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:m=>`${m}%`,onChange:m=>u({size:m/100}),value:i.size*100}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx(N.FieldTitle,{children:s("settings.subtitles.colorLabel")}),n.jsx("div",{className:"flex justify-center items-center",children:od.map(m=>n.jsx(id,{onClick:()=>u({color:m}),color:m,active:i.color===m},m))})]})]})]})}function cd(e){return n.jsxs("div",{className:"w-full relative",children:[n.jsx(I,{className:"pointer-events-none absolute top-1/2 left-3 transform -translate-y-1/2 text-video-context-inputPlaceholder",icon:w.SEARCH}),n.jsx("input",{placeholder:"Search",className:"w-full py-2 px-3 pl-[calc(0.75rem+24px)] tabbable bg-video-context-inputBg rounded placeholder:text-video-context-inputPlaceholder",value:e.value,onInput:t=>e.onInput(t.currentTarget.value)})]})}function on(e){return n.jsx(Je,{selected:e.selected,loading:e.loading,error:e.error,onClick:e.onClick,children:n.jsxs("span",{"data-active-link":e.selected?!0:void 0,className:"flex items-center",children:[n.jsx("span",{"data-code":e.countryCode,className:"mr-3 inline-flex",children:n.jsx(Ha,{langCode:e.countryCode})}),n.jsx("span",{children:e.children})]})})}function ud(){const{t:e}=C(),t=x(a=>{var o;return(o=a.caption.selected)==null?void 0:o.language}),s=x(a=>a.setCaption),r=B(a=>a.setCustomSubs),i=d.useRef(null);return n.jsxs(on,{selected:t==="custom",onClick:()=>{var a;return(a=i.current)==null?void 0:a.click()},children:[e("player.menus.subtitles.customChoice"),n.jsx("input",{className:"hidden",ref:i,accept:Qc.join(","),type:"file",onChange:a=>{if(!a.target.files)return;const o=new FileReader;o.addEventListener("load",l=>{if(!l.target||typeof l.target.result!="string")return;const c=fn(l.target.result,"srt");s({language:"custom",srtData:c,id:"custom-caption"}),r()}),o.readAsText(a.target.files[0],"utf-8")}})]})}function dd(e,t){const{t:s}=C(),r=s("player.menus.subtitles.unknownLanguage");return d.useMemo(()=>{const i=e.map(l=>({...l,languageName:zs(l.language)??r})),a=Wa(i.map(l=>l.language));let o=i.sort((l,c)=>a.indexOf(l.language)-a.indexOf(c.language));return t.trim().length>0&&(o=new qa(i,{includeScore:!0,keys:["languageName"]}).search(t).map(c=>c.item)),o},[e,t,r])}function md(e){let{id:t}=e;const{t:s}=C(),r=V(t),i=x(b=>{var y;return(y=b.caption.selected)==null?void 0:y.id}),[a,o]=d.useState(null),{selectCaptionById:l,disable:c}=Pt(),u=x(b=>b.captionList),[m,p]=d.useState(""),g=dd(u,m),[h,f]=oe(async b=>(o(b),l(b)),[l,o]),v=g.map(b=>n.jsx(on,{countryCode:b.language,selected:b.id===i,loading:b.id===a&&h.loading,error:b.id===a&&h.error?h.error.toString():void 0,onClick:()=>f(b.id),children:b.languageName},b.id));return n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(N.BackLink,{onClick:()=>r.navigate("/"),rightSide:n.jsx("button",{type:"button",onClick:()=>r.navigate("/captions/settings"),className:"py-1 -my-1 px-3 -mx-3 rounded tabbable",children:s("player.menus.subtitles.customizeLabel")}),children:s("player.menus.subtitles.title")}),n.jsx("div",{className:"mt-3",children:n.jsx(cd,{value:m,onInput:p})})]}),n.jsxs(N.ScrollToActiveSection,{className:"!pt-1 mt-2 pb-3",children:[n.jsx(on,{onClick:()=>c(),selected:!i,children:s("player.menus.subtitles.offChoice")}),n.jsx(ud,{}),v]})]})}function hd(){const e=x(r=>r.source),t=x(r=>r.currentQuality);return d.useMemo(()=>{var r;return(e==null?void 0:e.type)==="file"&&t?((r=e.qualities[t])==null?void 0:r.url)??null:(e==null?void 0:e.type)==="hls"?e.url:null},[e,t])}function Re(e){return n.jsx(me,{i18nKey:e.k,components:{bold:n.jsx(N.Highlight,{}),br:n.jsx("br",{}),ios_share:n.jsx(I,{icon:w.IOS_SHARE,className:"inline-block text-xl -mb-1"}),ios_files:n.jsx(I,{icon:w.IOS_FILES,className:"inline-block text-xl -mb-1"})}})}function fd(e){let{id:t}=e;const s=V(t),{t:r}=C(),i=hd(),[,a]=Ws(),o=x(u=>{var m;return(m=u.source)==null?void 0:m.type}),l=x(u=>{var m;return(m=u.caption)==null?void 0:m.selected}),c=d.useCallback(()=>{const u=l?zc(l==null?void 0:l.srtData):null;u&&window.open(u)},[l]);return i?n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>s.navigate("/"),children:r("player.menus.downloads.title")}),n.jsx(N.Section,{children:n.jsx("div",{children:o==="hls"?n.jsxs(n.Fragment,{children:[n.jsx(N.Paragraph,{marginClass:"mb-6",children:n.jsx(Re,{k:"player.menus.downloads.hlsDisclaimer"})}),n.jsx(R,{className:"w-full",theme:"purple",href:i,onClick:u=>{u.preventDefault(),a(i)},children:r("player.menus.downloads.copyHlsPlaylist")}),n.jsx(R,{className:"w-full mt-2",onClick:c,disabled:!l,theme:"secondary",children:r("player.menus.downloads.downloadSubtitle")})]}):n.jsxs(n.Fragment,{children:[n.jsx(N.ChevronLink,{onClick:()=>s.navigate("/download/pc"),children:r("player.menus.downloads.onPc.title")}),n.jsx(N.ChevronLink,{onClick:()=>s.navigate("/download/ios"),children:r("player.menus.downloads.onIos.title")}),n.jsx(N.ChevronLink,{onClick:()=>s.navigate("/download/android"),children:r("player.menus.downloads.onAndroid.title")}),n.jsx(N.Divider,{}),n.jsx(N.Paragraph,{marginClass:"my-6",children:n.jsx(Re,{k:"player.menus.downloads.disclaimer"})}),n.jsx(R,{className:"w-full",href:i,theme:"purple",children:r("player.menus.downloads.downloadVideo")}),n.jsx(R,{className:"w-full mt-2",onClick:c,disabled:!l,theme:"secondary",download:"subtitles.srt",children:r("player.menus.downloads.downloadSubtitle")})]})})})]}):null}function gd(e){let{id:t}=e;const s=V(t),{t:r}=C();return n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>s.navigate("/download"),children:r("player.menus.downloads.onAndroid.shortTitle")}),n.jsx(N.Section,{children:n.jsx(N.Paragraph,{children:n.jsx(Re,{k:"player.menus.downloads.onAndroid.1"})})})]})}function xd(e){let{id:t}=e;const s=V(t),{t:r}=C();return n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>s.navigate("/download"),children:r("player.menus.downloads.onPc.shortTitle")}),n.jsx(N.Section,{children:n.jsx(N.Paragraph,{children:n.jsx(Re,{k:"player.menus.downloads.onPc.1"})})})]})}function pd(e){let{id:t}=e;const s=V(t);return n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>s.navigate("/download"),children:n.jsx(Re,{k:"player.menus.downloads.onIos.shortTitle"})}),n.jsx(N.Section,{children:n.jsx(N.Paragraph,{children:n.jsx(Re,{k:"player.menus.downloads.onIos.1"})})})]})}function bd(e){let{id:t}=e;return n.jsxs(n.Fragment,{children:[n.jsx(X,{id:t,path:"/download",width:343,height:490,children:n.jsx(N.CardWithScrollable,{children:n.jsx(fd,{id:t})})}),n.jsx(X,{id:t,path:"/download/ios",width:343,height:440,children:n.jsx(N.CardWithScrollable,{children:n.jsx(pd,{id:t})})}),n.jsx(X,{id:t,path:"/download/android",width:343,height:440,children:n.jsx(N.CardWithScrollable,{children:n.jsx(gd,{id:t})})}),n.jsx(X,{id:t,path:"/download/pc",width:343,height:440,children:n.jsx(N.CardWithScrollable,{children:n.jsx(xd,{id:t})})})]})}const yd=function(t){return n.jsx("div",{className:"flex items-center bg-video-context-buttons-list p-1 rounded-lg",children:t.options.map(s=>n.jsxs("button",{type:"button",className:S("w-full px-2 py-1 rounded-md tabbable",t.selected===s?"bg-video-context-buttons-active text-white":null),onClick:()=>t.onClick(s),children:[s,"x"]},s))})},vd=yd;function jd(e){let{id:t}=e;const{t:s}=C(),r=V(t),i=x(c=>c.mediaPlaying.playbackRate),a=x(c=>c.display),o=d.useCallback(c=>{a==null||a.setPlaybackRate(c)},[a]),l=[.25,.5,1,1.5,2];return n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>r.navigate("/"),children:s("player.menus.playback.title")}),n.jsx(N.Section,{children:n.jsxs("div",{className:"space-y-4 mt-3",children:[n.jsx(N.FieldTitle,{children:s("player.menus.playback.speedLabel")}),n.jsx(vd,{options:l,selected:i,onClick:o})]})})]})}const wd={unknown:!1,360:!0,480:!0,720:!0,1080:!0,"4k":!1};function kd(){const e=x(s=>{var r;return(r=s.source)==null?void 0:r.type});return d.useMemo(()=>{const s=document.createElement("video");return!(e!=="hls"||de.isSupported()||!lt(s))},[e])}function Nd(e){let{id:t}=e;const s=V(t),r=kd(),i=x(f=>f.qualities),a=x(f=>f.currentQuality),o=x(f=>f.switchQuality),l=x(f=>f.enableAutomaticQuality),c=Ve(f=>f.setAutomaticQuality),u=Ve(f=>f.setLastChosenQuality),m=Ve(f=>f.quality.automaticQuality),p=d.useCallback(f=>{u(f),c(!1),o(f),s.close()},[s,o,u,c]),g=d.useCallback(()=>{const f=!m;c(f),f&&l()},[c,m,l]),h=_c.filter(f=>!!(wd[f]||i.includes(f)));return n.jsxs(n.Fragment,{children:[n.jsx(N.BackLink,{onClick:()=>s.navigate("/"),children:Yn("player.menus.quality.title")}),n.jsxs(N.Section,{className:"flex flex-col pb-4",children:[h.map(f=>n.jsx(Je,{selected:f===a,onClick:i.includes(f)?()=>p(f):void 0,disabled:!i.includes(f),children:Br(f)},f)),n.jsx(N.Divider,{}),n.jsx(N.Link,{rightSide:n.jsx(_n,{onClick:g,enabled:m}),children:Yn("player.menus.quality.automaticLabel")}),n.jsx(N.SmallText,{children:n.jsx(me,{i18nKey:r?"player.menus.quality.iosNoQuality":"player.menus.quality.hint",children:n.jsx(N.Anchor,{onClick:()=>s.navigate("/source"),children:"text"})})})]})]})}function Sd(e){let{id:t}=e;const{t:s}=C(),r=V(t),i=x(h=>h.currentQuality),a=x(h=>{var f;return(f=h.caption.selected)==null?void 0:f.language}),o=B(h=>h.enabled),l=x(h=>h.sourceId),c=d.useMemo(()=>{if(!l)return"...";const h=kt().find(f=>f.id===l);return(h==null?void 0:h.name)??"..."},[l]),{toggleLastUsed:u}=Pt(),m=a?zs(a)??s("player.menus.subtitles.unknownLanguage"):void 0,p=x(h=>h.source),g=(p==null?void 0:p.type)==="file"||(p==null?void 0:p.type)==="hls";return n.jsxs(N.Card,{children:[n.jsx(N.SectionTitle,{children:s("player.menus.settings.videoSection")}),n.jsxs(N.Section,{children:[n.jsx(N.ChevronLink,{onClick:()=>r.navigate("/quality"),rightText:i?Br(i):"",children:s("player.menus.settings.qualityItem")}),n.jsx(N.ChevronLink,{onClick:()=>r.navigate("/source"),rightText:c,children:s("player.menus.settings.sourceItem")}),n.jsx(N.Link,{clickable:!0,onClick:()=>r.navigate(g?"/download":"/download/unable"),rightSide:n.jsx(I,{className:"text-xl",icon:w.DOWNLOAD}),className:g?"opacity-100":"opacity-50",children:s("player.menus.settings.downloadItem")})]}),n.jsx(N.SectionTitle,{children:s("player.menus.settings.experienceSection")}),n.jsxs(N.Section,{children:[n.jsx(N.Link,{rightSide:n.jsx(_n,{enabled:o,onClick:()=>u().catch(()=>{})}),children:s("player.menus.settings.enableSubtitles")}),n.jsx(N.ChevronLink,{onClick:()=>r.navigate("/captions"),rightText:m??void 0,children:s("player.menus.settings.subtitleItem")}),n.jsx(N.ChevronLink,{onClick:()=>r.navigate("/playback"),children:s("player.menus.settings.playbackItem")})]})]})}function Cd(e){let{id:t}=e;const[s,r]=d.useState(null),i=V(t);return d.useEffect(()=>{i.isRouterActive||r(null),i.route==="/"&&r(null)},[i.isRouterActive,i.route]),n.jsx(Sr,{id:t,children:n.jsxs(Yr,{id:t,children:[n.jsx(X,{id:t,path:"/",width:343,height:431,children:n.jsx(Sd,{id:t})}),n.jsx(X,{id:t,path:"/quality",width:343,height:400,children:n.jsx(N.Card,{children:n.jsx(Nd,{id:t})})}),n.jsx(X,{id:t,path:"/captions",width:343,height:431,children:n.jsx(N.CardWithScrollable,{children:n.jsx(md,{id:t})})}),n.jsx(X,{id:t,path:"/captions/settings",width:343,height:450,children:n.jsx(N.Card,{children:n.jsx(ld,{id:t})})}),n.jsx(X,{id:t,path:"/source",width:343,height:431,children:n.jsx(N.CardWithScrollable,{children:n.jsx(nd,{id:t,onChoose:r})})}),n.jsx(X,{id:t,path:"/source/embeds",width:343,height:431,children:n.jsx(N.CardWithScrollable,{children:n.jsx(td,{id:t,sourceId:s})})}),n.jsx(X,{id:t,path:"/playback",width:343,height:215,children:n.jsx(N.Card,{children:n.jsx(jd,{id:t})})}),n.jsx(bd,{id:t})]})})}function Ed(){return n.jsx(Cd,{id:"settings"})}function ks(){const e=V("settings"),t=x(s=>s.setHasOpenOverlay);return d.useEffect(()=>{t(e.isRouterActive)},[t,e.isRouterActive]),n.jsx(Qr,{id:e.id,children:n.jsx(le,{onClick:()=>e.open(),icon:w.GEAR})})}const Id=function(t){const s=t.radius??40;return n.jsxs("svg",{className:`${t.className??""} -rotate-90`,viewBox:"0 0 100 100",children:[n.jsx("circle",{className:`fill-transparent stroke-type-text stroke-[15] opacity-25 ${t.backingRingClassname??""}`,r:s,cx:"50",cy:"50"}),n.jsx("circle",{className:"fill-transparent stroke-current stroke-[15] transition-[stroke-dashoffset] duration-150",r:s,cx:"50",cy:"50",style:{strokeDasharray:`${2*Math.PI*s} ${2*Math.PI*s}`,strokeDashoffset:`${2*Math.PI*s-t.percentage/100*(2*Math.PI*s)}`}})]})},Ld=Id;function Zr(){const{meta:e,setMeta:t}=$r(),s=d.useMemo(()=>e?Fr(e):null,[e]),r=d.useCallback(a=>{t(a,P.SCRAPING)},[t]),i=d.useCallback((a,o)=>{let l;if(a.meta.type===A.SERIES){const c=a.meta.seasonData.episodes.find(u=>u.id===o);if(!c)return null;l={type:"show",releaseYear:+(a.meta.year??0),title:a.meta.title,poster:a.meta.poster,tmdbId:a.tmdbId??"",imdbId:a.imdbId,episodes:a.meta.seasonData.episodes.map(u=>({number:u.number,title:u.title,tmdbId:u.id})),episode:{number:c.number,title:c.title,tmdbId:c.id},season:{number:a.meta.seasonData.number,title:a.meta.seasonData.title,tmdbId:a.meta.seasonData.id}}}else l={type:"movie",releaseYear:+(a.meta.year??0),title:a.meta.title,poster:a.meta.poster,tmdbId:a.tmdbId??"",imdbId:a.imdbId};return r(l),l},[r]);return{playerMeta:e,setPlayerMeta:i,setDirectMeta:r,scrapeMedia:s}}const at={};function ot(e){if(at[e])return at[e];const t=new Date,s=new Date(e);return at[e]=s<t,at[e]}function bt(e){return n.jsx("div",{className:"h-full w-full flex justify-center items-center p-8 text-center",children:e.children})}function ei(e,t){const[s,r]=d.useState(null);return[yt(async()=>{const a=await qt(A.SERIES,e,t);return(a==null?void 0:a.meta.type)!==A.SERIES?null:(r(a.meta.seasons),{season:a.meta.seasonData,fullData:a})},[e,t]),s]}function Td(e){let{selectedSeason:t,setSeason:s}=e;const{t:r}=C(),i=x(c=>c.meta),[a,o]=ei((i==null?void 0:i.tmdbId)??"",t);let l=null;return o?l=n.jsx(N.Section,{className:"pb-6",children:o==null?void 0:o.map(c=>n.jsx(N.ChevronLink,{onClick:()=>s(c.id),children:c.title},c.id))}):a.error?l=n.jsx(bt,{children:r("player.menus.episodes.loadingError")}):a.loading&&(l=n.jsx(bt,{children:r("player.menus.episodes.loadingList")})),n.jsxs(N.CardWithScrollable,{children:[n.jsx(N.Title,{children:(i==null?void 0:i.title)??r("player.menus.episodes.loadingTitle")}),l]})}function Rd(e){var h;let{id:t,selectedSeason:s,goBack:r,onChange:i}=e;const{t:a}=C(),o=V(t),{setPlayerMeta:l}=Zr(),c=x(f=>f.meta),[u]=ei((c==null?void 0:c.tmdbId)??"",s),m=G(),p=d.useCallback(f=>{if(u.value){const v=l(u.value.fullData,f);v&&(i==null||i(v))}o.close(!0)},[l,u,o,i]);if(!(c!=null&&c.tmdbId))return null;let g=null;if(u.error)g=n.jsx(bt,{children:a("player.menus.episodes.loadingError")});else if(u.loading)g=n.jsx(bt,{children:a("player.menus.episodes.loadingList")});else if(u.value){const f=u.value.season.episodes.some(v=>!ot(v.air_date));g=n.jsxs(N.ScrollToActiveSection,{className:"pb-6",children:[u.value.season.episodes.length===0?n.jsx(N.TextDisplay,{title:"No episodes found",children:a("player.menus.episodes.emptyState")}):null,u.value.season.episodes.map(v=>{var j,T,L,k,E,M;const b=(T=(j=m.items[c==null?void 0:c.tmdbId])==null?void 0:j.episodes)==null?void 0:T[v.id];let y;if(b){const D=b.progress.watched/b.progress.duration*100;y=n.jsx(Ld,{className:"h-[18px] w-[18px] text-white",percentage:D>90?100:D})}return n.jsx(N.Link,{onClick:()=>p(v.id),active:v.id===((L=c==null?void 0:c.episode)==null?void 0:L.tmdbId),clickable:ot(v.air_date),rightSide:y,children:n.jsx(N.LinkTitle,{children:n.jsxs("div",{className:S("text-left flex items-center space-x-3 text-video-context-type-main",ot(v.air_date)||v.id===((k=c==null?void 0:c.episode)==null?void 0:k.tmdbId)?"":"text-opacity-25"),children:[n.jsx("span",{className:S("p-0.5 px-2 rounded inline bg-video-context-hoverColor",v.id===((E=c==null?void 0:c.episode)==null?void 0:E.tmdbId)?"text-white bg-opacity-100":"bg-opacity-50",ot(v.air_date)||v.id===((M=c==null?void 0:c.episode)==null?void 0:M.tmdbId)?"":"!bg-opacity-25"),children:a("player.menus.episodes.episodeBadge",{episode:v.number})}),n.jsx("span",{className:"line-clamp-1 break-all",children:v.title})]})})},v.id)}),f?n.jsx("p",{children:a("player.menus.episodes.unairedEpisodes")}):null]})}return n.jsxs(N.CardWithScrollable,{children:[n.jsx(N.BackLink,{onClick:r,children:((h=u==null?void 0:u.value)==null?void 0:h.season.title)||a("player.menus.episodes.loadingTitle")}),g]})}function Pd(e){let{id:t,onChange:s}=e;const r=V(t),i=x(u=>u.meta),[a,o]=d.useState(""),l=d.useRef(!1);d.useEffect(()=>{var u;l.current!==r.isRouterActive&&(l.current=r.isRouterActive,o(((u=i==null?void 0:i.season)==null?void 0:u.tmdbId)??""))},[i,a,o,r.isRouterActive]);const c=d.useCallback(u=>{o(u),r.navigate("/episodes")},[r]);return n.jsx(Sr,{id:t,children:n.jsxs(Yr,{id:t,children:[n.jsx(X,{id:t,path:"/",width:343,height:431,children:n.jsx(Td,{setSeason:c,selectedSeason:a})}),n.jsx(X,{id:t,path:"/episodes",width:343,height:431,children:a.length>0?n.jsx(Rd,{selectedSeason:a,id:t,goBack:()=>r.navigate("/"),onChange:s}):null})]})})}function Ad(e){return n.jsx(Pd,{onChange:e.onChange,id:"episodes"})}function Ns(){const{t:e}=C(),t=V("episodes"),s=x(i=>i.setHasOpenOverlay),r=x(i=>{var a;return(a=i.meta)==null?void 0:a.type});return d.useEffect(()=>{s(t.isRouterActive)},[s,t.isRouterActive]),r!=="show"?null:n.jsx(Qr,{id:t.id,children:n.jsx(le,{onClick:()=>t.open("/episodes"),icon:w.EPISODES,children:e("player.menus.episodes.button")})})}function Ss(){const e=x(s=>s.interface.canAirplay),t=x(s=>s.display);return e?n.jsx(le,{onClick:()=>t==null?void 0:t.startAirplay(),icon:w.AIRPLAY}):null}function _d(){const e=wr(),t=x(s=>s.mediaPlaying.volume);return n.jsx(z,{animation:"slide-down",show:e.showVolume,className:"absolute inset-x-0 top-4 flex justify-center pointer-events-none",children:n.jsxs(ie.Base,{className:"hover:flare-enabled pointer-events-auto bg-video-context-background pl-4 pr-6 py-3 group w-72 h-full rounded-lg transition-colors text-video-context-type-main",children:[n.jsx(ie.Light,{enabled:!0,flareSize:200,cssColorVar:"--colors-video-context-light",backgroundClass:"bg-video-context-background duration-100",className:"rounded-lg"}),n.jsxs(ie.Child,{className:"grid grid-cols-[auto,1fr] gap-3 pointer-events-auto relative transition-transform",children:[n.jsx(I,{className:"text-2xl",icon:t>0?w.VOLUME:w.VOLUME_X}),n.jsx("div",{className:"w-full flex items-center",children:n.jsx("div",{className:"w-full h-1.5 rounded-full bg-video-context-slider bg-opacity-25",children:n.jsx("div",{className:"h-full bg-video-context-sliderFilled rounded-full transition-[width] duration-100",style:{width:`${t*100}%`}})})})]})]})})}function Od(e,t){const s=e/t;return t-e<=30?"always":s>=.9?"hover":"none"}function Cs(e){return n.jsx("button",{className:S("font-bold rounded h-10 w-40 scale-95 hover:scale-100 transition-all duration-200",e.className),type:"button",onClick:e.onClick,children:e.children})}function Md(e){var y;const{t}=C(),s=x(j=>j.progress.duration),r=x(j=>j.interface.hideNextEpisodeBtn),i=x(j=>j.meta),{setDirectMeta:a}=Zr(),o=x(j=>j.hideNextEpisodeButton),l=x(j=>{var T;return(T=j.meta)==null?void 0:T.type}),c=x(j=>j.progress.time),u=Od(c,s),m=x(j=>j.status),p=x(j=>j.setShouldStartFromBeginning);let g=!1;(u==="always"||u==="hover"&&e.controlsShowing)&&(g=!0),(r||m!=="playing"||s===0)&&(g=!1);const h=u==="hover"?"slide-up":"fade";let f="bottom-[calc(6rem+env(safe-area-inset-bottom))]";u==="always"&&(f=e.controlsShowing?f:"bottom-[calc(3rem+env(safe-area-inset-bottom))]");const v=(y=i==null?void 0:i.episodes)==null?void 0:y.find(j=>{var T;return j.number===(((T=i==null?void 0:i.episode)==null?void 0:T.number)??0)+1}),b=d.useCallback(()=>{var T;if(!i||!v)return;const j={...i};j.episode=v,p(!0),a(j),(T=e.onChange)==null||T.call(e,j)},[a,v,i,e,p]);return!(i!=null&&i.episode)||!v||l!=="show"?null:n.jsx(z,{animation:h,show:g,className:"absolute right-[calc(3rem+env(safe-area-inset-right))] bottom-0",children:n.jsxs("div",{className:S(["absolute bottom-0 right-0 transition-[bottom] duration-200 flex items-center space-x-3",f]),children:[n.jsx(Cs,{className:"py-px box-content bg-buttons-secondary hover:bg-buttons-secondaryHover bg-opacity-90 text-buttons-secondaryText",onClick:o,children:t("player.nextEpisode.cancel")}),n.jsxs(Cs,{onClick:()=>b(),className:"bg-buttons-primary hover:bg-buttons-primaryHover text-buttons-primaryText flex justify-center items-center",children:[n.jsx(I,{className:"text-xl mr-1",icon:w.SKIP_EPISODE}),t("player.nextEpisode.next")]})]})})}function Es(e){const[t,s]=d.useState(!1),r=x(o=>o.interface.isCasting),i=d.useRef(null),a=d.useCallback(o=>{const l=(o.getAttribute("style")??"").includes("inline");s(!l)},[s]);return d.useEffect(()=>{var c;const o=(c=i.current)==null?void 0:c.querySelector("google-cast-launcher");if(!o)return;const l=new MutationObserver(()=>{a(o)});return l.observe(o,{attributes:!0,attributeFilter:["style"]}),a(o),()=>{l.disconnect()}},[a]),n.jsx(le,{ref:i,className:[e.className??"","google-cast-button",r?"casting":"",t?"hidden":""].join(" "),icon:w.CASTING,onClick:o=>{const l=o.querySelector("google-cast-launcher");l&&l.click()}})}function Dd(){const{t:e}=C(),t=x(i=>i.mediaPlaying.isLoading),s=x(i=>i.display),r=(s==null?void 0:s.getType())==="casting";return t||!r?null:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx("div",{className:"rounded-full bg-opacity-10 bg-video-buttonBackground p-3 brightness-100 grayscale",children:n.jsx(I,{icon:w.CASTING})}),n.jsx("p",{className:"text-center",children:e("player.casting.enabled")})]})}function Bd(e,t){for(let s=0;s<t.length;s+=1)if(t.start(t.length-1-s)<e)return t.end(t.length-1-s);return 0}const Fd={1:{name:"MEDIA_ERR_ABORTED",key:"player.playbackError.errors.errorAborted"},2:{name:"MEDIA_ERR_NETWORK",key:"player.playbackError.errors.errorNetwork"},3:{name:"MEDIA_ERR_DECODE",key:"player.playbackError.errors.errorDecode"},4:{name:"MEDIA_ERR_SRC_NOT_SUPPORTED",key:"player.playbackError.errors.errorNotSupported"}};function Ud(e){const t=Fd[(e==null?void 0:e.code)??-1];return t||{name:"MEDIA_ERR_GENERIC",key:"player.playbackError.errors.errorGenericMedia"}}function Le(e){const t=new URL(e),s=_().CDN_REPLACEMENTS;for(const[r,i]of s)if(t.hostname.endsWith(r))return t.hostname=i,t.port="",t.protocol="https://",t.toString();return e}function ti(){const e={};return{on(t,s){var r;e[t]||(e[t]=[]),(r=e[t])==null||r.push(s)},off(t,s){var r;e[t]=((r=e[t])==null?void 0:r.filter(i=>i!==s))??[]},emit(t,s){(e[t]??[]).forEach(r=>r(s))}}}const ni={360:"360",1080:"1080",720:"720",480:"480"};function ut(e){return ni[(e==null?void 0:e.height)??0]??null}function Vd(e){const t=Object.entries(ni).find(s=>s[1]===e);return t?+t[0]:null}function $d(e){return e.map(t=>ut(t)).filter(t=>!!t)}function si(){const{emit:e,on:t,off:s}=ti();let r=null,i=null,a=null,o=null,l=!1,c=!1,u=!1,m=0,p=!1,g=null,h=1;function f(){if(!i)return;const E=i.levels.map(M=>ut(M)).filter(M=>!!M);e("qualities",E)}function v(){if(a&&lt(a)||!i)return;if(p)i.currentLevel=-1,i.loadLevel=-1;else{const E=$d(i.levels),M=Mr(E,{lastChosenQuality:g,automaticQuality:p});if(M){const D=i.levels.findIndex(ee=>ee.height===Vd(M));D!==-1&&(i.currentLevel=D,i.loadLevel=D)}}const k=ut(i.levels[i.currentLevel]);e("changedquality",k)}function b(k,E){if(E.type==="hls"){if(lt(k)){k.src=Le(E.url),k.currentTime=m;return}if(!de.isSupported())throw new Error("HLS not supported");i||(i=new de({maxBufferSize:500*1e3*1e3,fragLoadPolicy:{default:{maxLoadTimeMs:30*1e3,maxTimeToFirstByteMs:30*1e3,errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3},timeoutRetry:{maxNumRetry:3,maxRetryDelayMs:0,retryDelayMs:0}}}}),i.on(de.Events.ERROR,(M,D)=>{var ee;console.error("HLS error",D),D.fatal&&(E==null?void 0:E.url)===((ee=D.frag)==null?void 0:ee.baseurl)&&e("error",{message:D.error.message,stackTrace:D.error.stack,errorName:D.error.name,type:"hls"})}),i.on(de.Events.MANIFEST_LOADED,()=>{i&&(f(),v(),ce()&&i.on(de.Events.LEVEL_LOADED,async(M,D)=>{const ee=D.details.fragments.map(pe=>new URL(pe.url).hostname),xe=[...new Set(ee)];await er({ruleId:Js.SET_DOMAINS_HLS,targetDomains:xe,requestHeaders:{...E.preferredHeaders,...E.headers}})}))}),i.on(de.Events.LEVEL_SWITCHED,()=>{if(!i)return;const M=ut(i.levels[i.currentLevel]);e("changedquality",M)})),i.attachMedia(k),i.loadSource(Le(E.url)),k.currentTime=m;return}k.src=Le(E.url),k.currentTime=m}function y(){!a||!r||(b(a,r),a.addEventListener("play",()=>{e("play",void 0),e("loading",!1)}),a.addEventListener("error",()=>{const k=(a==null?void 0:a.error)??null,E=Ud(k);e("error",{errorName:E.name,key:E.key,type:"htmlvideo"})}),a.addEventListener("playing",()=>e("play",void 0)),a.addEventListener("pause",()=>e("pause",void 0)),a.addEventListener("canplay",()=>e("loading",!1)),a.addEventListener("waiting",()=>e("loading",!0)),a.addEventListener("volumechange",()=>e("volumechange",a!=null&&a.muted?0:(a==null?void 0:a.volume)??0)),a.addEventListener("timeupdate",()=>e("time",(a==null?void 0:a.currentTime)??0)),a.addEventListener("loadedmetadata",()=>{(r==null?void 0:r.type)==="hls"&&a&&lt(a)&&(e("qualities",["unknown"]),e("changedquality","unknown")),e("duration",(a==null?void 0:a.duration)??0)}),a.addEventListener("progress",()=>{a&&e("buffered",Bd(a.currentTime,a.buffered))}),a.addEventListener("webkitendfullscreen",()=>{l=!1,e("fullscreen",l),l||e("needstrack",!1)}),a.addEventListener("webkitplaybacktargetavailabilitychanged",k=>{k.availability==="available"&&e("canairplay",!0)}),a.addEventListener("ratechange",()=>{a&&e("playbackrate",a.playbackRate)}))}function j(){a&&(a.removeAttribute("src"),a.load()),i&&(i.destroy(),i=null)}function T(){j(),a&&(a=null)}function L(){l=!!document.fullscreenElement||!!document.webkitFullscreenElement,e("fullscreen",l),l||e("needstrack",!1)}return J.addEventListener("fullscreenchange",L),{on:t,off:s,getType(){return"web"},destroy:()=>{T(),J.removeEventListener("fullscreenchange",L)},load(k){k.source||j(),p=k.automaticQuality,g=k.preferredQuality,r=k.source,e("loading",!0),m=k.startAt,y()},changeQuality(k,E){(r==null?void 0:r.type)==="hls"&&(p=k,g=E,v())},processVideoElement(k){T(),a=k,y(),this.setVolume(h)},processContainerElement(k){o=k},setMeta(){},setCaption(){},pause(){a==null||a.pause()},play(){a==null||a.play()},setSeeking(k){if(k!==u){if(u=k,!k){c||this.play();return}c=(a==null?void 0:a.paused)??!0,this.pause()}},setTime(k){if(!a)return;let E=Math.min(k,a.duration);E=Math.max(0,E),!Number.isNaN(E)&&(e("time",E),a.currentTime=E)},async setVolume(k){let E=Math.min(k,1);if(E=Math.max(0,E),h=k,!a)return;a.muted=E===0,await pt()?a.volume=E:e("volumechange",E===0?0:1)},toggleFullscreen(){if(l){if(l=!1,e("fullscreen",l),e("needstrack",!1),!J.fullscreenElement)return;J.exitFullscreen();return}if(l=!0,e("fullscreen",l),!(!Gr()||J.fullscreenElement)){if(At()){o&&J.requestFullscreen(o);return}Wr()&&a&&(e("needstrack",!0),a.webkitEnterFullscreen())}},togglePictureInPicture(){if(a){if(zr()){const k=a;k.webkitSetPresentationMode(k.webkitPresentationMode==="picture-in-picture"?"inline":"picture-in-picture")}Kr()&&(a!==document.pictureInPictureElement?a.requestPictureInPicture():document.exitPictureInPicture())}},startAirplay(){const k=a;k&&k.webkitShowPlaybackTargetPicker&&k.webkitShowPlaybackTargetPicker()},setPlaybackRate(k){a&&(a.playbackRate=k)}}}function Hd(e){const{emit:t,on:s,off:r}=ti();let i=!1,a=1,o=null,l=null,c=null,u=!1,m=!1,p=!1,g=0,h={title:"",type:A.MOVIE};function f(){var k;const L=async E=>{switch(E.field){case"volumeLevel":await pt()&&t("volumechange",E.value);break;case"currentTime":t("time",E.value);break;case"duration":t("duration",E.value??0);break;case"mediaInfo":E.value&&t("duration",E.value.duration??0);break;case"playerState":t("loading",E.value==="BUFFERING"),E.value==="PLAYING"?t("play",void 0):E.value==="PAUSED"&&t("pause",void 0),i=E.value==="PAUSED";break;case"isMuted":t("volumechange",E.value?1:0);break}};return(k=e.controller)==null||k.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,L),()=>{var E;(E=e.controller)==null||E.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,L)}}function v(){var ee;if(!o){(ee=e.controller)==null||ee.stop();return}let L="video/mp4";o.type==="hls"&&(L="application/x-mpegurl");const k=new chrome.cast.media.GenericMediaMetadata;k.title=h.title;const E=new chrome.cast.media.MediaInfo("video",L);E.contentUrl=Le(o.url),E.streamType=chrome.cast.media.StreamType.BUFFERED,E.metadata=k,E.customData={playbackRate:a};const M=new chrome.cast.media.LoadRequest(E);if(M.autoplay=!0,M.currentTime=g,o.type==="hls"){const xe=chrome.cast.media,pe=M.media;pe.hlsSegmentFormat=xe.HlsSegmentFormat.FMP4,pe.hlsVideoSegmentFormat=xe.HlsVideoSegmentFormat.FMP4}const D=e.instance.getCurrentSession();D==null||D.loadMedia(M)}function b(){!l||!o||v()}function y(){l&&(l=null)}function j(){u=!!document.fullscreenElement||!!document.webkitFullscreenElement,t("fullscreen",u),u||t("needstrack",!1)}J.addEventListener("fullscreenchange",j);const T=f();return{on:s,off:r,getType(){return"casting"},destroy:()=>{T(),y(),J.removeEventListener("fullscreenchange",j)},load(L){o=L.source,t("loading",!0),g=L.startAt,b()},changeQuality(){},setCaption(L){b()},processVideoElement(L){y(),l=L,b()},processContainerElement(L){c=L},setMeta(L){h=L,b()},pause(){i||(e.controller.playOrPause(),i=!0)},play(){i&&(e.controller.playOrPause(),i=!1)},setSeeking(L){if(L!==p){if(p=L,!L){m||this.play();return}m=i??!0,this.pause()}},setTime(L){if(!l)return;let k=Math.min(L,e.player.duration);k=Math.max(0,k),!Number.isNaN(k)&&(t("time",k),e.player.currentTime=k,e.controller.seek())},async setVolume(L){let k=Math.min(L,1);k=Math.max(0,k),await pt()?(e.player.volumeLevel=k,e.controller.setVolumeLevel(),t("volumechange",k)):t("volumechange",k===0?0:1)},toggleFullscreen(){if(u){if(u=!1,t("fullscreen",u),t("needstrack",!1),!J.fullscreenElement)return;J.exitFullscreen();return}u=!0,t("fullscreen",u),!(!Gr()||J.fullscreenElement)&&At()&&c&&J.requestFullscreen(c)},togglePictureInPicture(){},startAirplay(){},setPlaybackRate(L){a=L,b()}}}const Wd="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",ri=[];let ln=null;function Gd(e){ln=e,ri.forEach(t=>t(e))}function Kd(e){if(ln!==null)return e(ln);ri.push(e)}function zd(){if(window.__onGCastApiAvailable=t=>{Gd(t)},!!!document.getElementById("chromecast-script")){const t=document.createElement("script");t.setAttribute("src",Wd),t.setAttribute("id","chromecast-script"),document.body.appendChild(t)}}function qd(){const[e,t]=d.useState(null);return d.useEffect(()=>{Kd(s=>t(s))},[]),e}function Qd(){const e=x(y=>y.casting.setInstance),t=x(y=>y.casting.setController),s=x(y=>y.casting.setPlayer),r=x(y=>y.casting.setIsCasting),i=x(y=>y.interface.isCasting),a=x(y=>{var j;return(j=y.caption)==null?void 0:j.selected}),o=x(y=>y.setDisplay),l=x(y=>y.redisplaySource),c=qd(),u=x(y=>y.display),m=x(y=>y.casting.controller),p=x(y=>y.casting.player),g=x(y=>y.casting.instance),h=x(y=>y.progress.time),f=x(y=>{var j;return(j=y.meta)==null?void 0:j.title}),v=x(y=>{var j;return(j=y.meta)==null?void 0:j.type}),b=d.useRef({controller:m,player:p,instance:g,time:h,metaTitle:f,metaType:v,caption:a});return d.useEffect(()=>{b.current={controller:m,player:p,instance:g,time:h,metaTitle:f,metaType:v,caption:a}},[m,p,g,h,f,v,a]),d.useEffect(()=>{if(i){if(b.current.controller&&b.current.instance&&b.current.player){const y=Hd({controller:b.current.controller,instance:b.current.instance,player:b.current.player});y.setMeta({title:b.current.metaTitle??"",type:ft(b.current.metaType??"movie")}),y.setCaption(b.current.caption),o(y),l(b.current.time??0)}}else{const y=si();o(y),l(b.current.time??0)}},[i,o,l]),d.useEffect(()=>{u==null||u.setMeta({title:b.current.metaTitle??"",type:ft(b.current.metaType??"movie")})},[f,v,u]),d.useEffect(()=>{if(!c)return;const y=cast.framework.CastContext.getInstance();e(y),y.setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED});const j=new cast.framework.RemotePlayer;s(j);const T=new cast.framework.RemotePlayerController(j);t(T);function L(k){k.field==="isConnected"&&r(k.value)}return T.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,L),()=>{T.removeEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,L)}},[c,s,t,e,r]),null}function Yd(){var r,i;const{t:e}=C(),t=x(a=>a.meta);if(!t)return null;if(t.type!=="show")return n.jsx(fe,{children:n.jsx("title",{children:t.title})});const s=e("media.episodeDisplay",{season:(r=t.season)==null?void 0:r.number,episode:(i=t.episode)==null?void 0:i.number});return n.jsx(fe,{children:n.jsxs("title",{children:[t.title," - ",s]})})}function Xd(){const e=V(""),t=x(f=>f.display),s=x(f=>f.progress),{isSeeking:r}=x(f=>f.interface),i=x(f=>f.mediaPlaying),a=x(f=>f.progress.time),{setVolume:o,toggleMute:l}=qr(),{toggleLastUsed:c}=Pt(),u=wr(f=>f.setShowVolume),[m,p]=d.useState(!1),g=d.useRef(),h=d.useRef({setShowVolume:u,setVolume:o,toggleMute:l,setIsRolling:p,toggleLastUsed:c,display:t,mediaPlaying:i,mediaProgress:s,isSeeking:r,isRolling:m,time:a,router:e});return d.useEffect(()=>{h.current={setShowVolume:u,setVolume:o,toggleMute:l,setIsRolling:p,toggleLastUsed:c,display:t,mediaPlaying:i,mediaProgress:s,isSeeking:r,isRolling:m,time:a,router:e}},[u,o,l,p,c,t,i,s,r,m,a,e]),d.useEffect(()=>{const f=v=>{var y,j,T,L,k,E,M,D,ee,xe,pe,Hn,Wn,Gn,Kn;if(v.target&&v.target.nodeName==="INPUT")return;const b=v.key;if(["ArrowUp","ArrowDown","m"].includes(b)&&(h.current.setShowVolume(!0),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{h.current.setShowVolume(!1)},3e3)),b==="ArrowUp"&&h.current.setVolume((((y=h.current.mediaPlaying)==null?void 0:y.volume)||0)+.15),b==="ArrowDown"&&h.current.setVolume((((j=h.current.mediaPlaying)==null?void 0:j.volume)||0)-.15),b==="m"&&h.current.toggleMute(),b===">"||b==="<"){const we=[.25,.5,1,1.5,2];let Ot=we.indexOf((T=h.current.mediaPlaying)==null?void 0:T.playbackRate);Ot===-1&&(Ot=we.indexOf(1));const bi=Ot+(b===">"?1:-1),zn=we[bi];zn&&((L=h.current.display)==null||L.setPlaybackRate(zn))}if(b==="ArrowRight"&&((k=h.current.display)==null||k.setTime(h.current.time+5)),b==="ArrowLeft"&&((E=h.current.display)==null||E.setTime(h.current.time-5)),b==="j"&&((M=h.current.display)==null||M.setTime(h.current.time-10)),b==="l"&&((D=h.current.display)==null||D.setTime(h.current.time+10)),b==="."&&((ee=h.current.mediaPlaying)!=null&&ee.isPaused)&&((xe=h.current.display)==null||xe.setTime(h.current.time+1)),b===","&&((pe=h.current.mediaPlaying)!=null&&pe.isPaused)&&((Hn=h.current.display)==null||Hn.setTime(h.current.time-1)),b==="f"&&((Wn=h.current.display)==null||Wn.toggleFullscreen()),b===" "&&((Gn=h.current.display)==null||Gn[h.current.mediaPlaying.isPaused?"play":"pause"]()),b==="Escape"&&h.current.router.close(),b==="c"&&h.current.toggleLastUsed().catch(()=>{}),b==="r"){if(h.current.isRolling||v.ctrlKey||v.metaKey)return;h.current.setIsRolling(!0),(Kn=document.querySelector(".popout-location"))==null||Kn.classList.add("roll"),document.body.setAttribute("data-no-scroll","true"),setTimeout(()=>{var we;(we=document.querySelector(".popout-location"))==null||we.classList.remove("roll"),document.body.removeAttribute("data-no-scroll"),h.current.setIsRolling(!1)},1e3)}};return window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}},[]),null}function Jd(){const e=x(r=>r.meta),t=x(r=>r.progress),s=x(r=>r.mediaPlaying);return d.useEffect(()=>(window.meta||(window.meta={}),e&&(window.meta.player={meta:{title:e.title,type:e.type,tmdbId:e.tmdbId,year:e.releaseYear,poster:e.poster},controls:{isPlaying:s.isPlaying,isLoading:s.isLoading},season:e.season?{number:e.season.number,tmdbId:e.season.tmdbId,title:e.season.title}:void 0,episode:e.episode?{number:e.episode.number,tmdbId:e.episode.tmdbId,title:e.episode.title}:void 0,progress:{time:t.time,duration:t.duration}}),()=>{window.meta&&delete window.meta.player}),[e,t,s]),null}function Zd(){const e=x(l=>l.meta),t=x(l=>l.progress),s=G(l=>l.updateItem),r=x(l=>l.status),i=x(l=>l.mediaPlaying.hasPlayedOnce),a=d.useRef(null),o=d.useRef({updateItem:s,meta:e,progress:t,status:r,hasPlayedOnce:i});return d.useEffect(()=>{o.current.updateItem=s,o.current.meta=e,o.current.progress=t,o.current.status=r,o.current.hasPlayedOnce=i},[s,t,e,r,i]),mn(()=>{var u,m;const l=o.current;if(!l.progress||!l.meta||!l.updateItem||l.status!==P.PLAYING||!i)return;let c=!1;a.current?(((u=a.current)==null?void 0:u.duration)!==t.duration||((m=a.current)==null?void 0:m.watched)!==t.time)&&(c=!0):c=!0,a.current={duration:t.duration,watched:t.time},c&&l.updateItem({meta:l.meta,progress:a.current})},3e3),null}const em=$(ue(H(e=>({enableThumbnails:!1,setEnableThumbnails(t){e(s=>{s.enableThumbnails=t})}})),{name:"__MW::preferences"}));function tm(e){const t=[0,1];let s=.5,r=0;for(let i=0;i<e;i+=1){const a=1/s-1;for(let o=0;o<a-r;o+=1){const l=o*s*2;t.push(l+s)}r=a,s/=2}return t}class nm{constructor(t){this.videoEl=null,this.canvasEl=null,this.hls=null,this.cb=t.addImage,this.interrupted=!1}start(t){if(Hr)return!1;const s=document.createElement("video");s.setAttribute("muted","true");const r=document.createElement("canvas");if(this.hls=new de,t.type==="mp4")s.src=Le(t.url),s.crossOrigin="anonymous";else if(t.type==="hls")this.hls.attachMedia(s),this.hls.loadSource(Le(t.url));else throw new Error("Invalid loadable source type");this.videoEl=s,this.canvasEl=r,this.begin().catch(i=>console.error(i))}destroy(){var t,s;this.interrupted=!0,this.videoEl=null,this.canvasEl=null,(t=this.hls)==null||t.detachMedia(),(s=this.hls)==null||s.destroy(),this.hls=null}async initVideo(){!this.videoEl||!this.canvasEl||(await new Promise((t,s)=>{var r,i;(r=this.videoEl)==null||r.addEventListener("loadedmetadata",t),(i=this.videoEl)==null||i.addEventListener("error",s)}),!(!this.videoEl||!this.canvasEl)&&(this.canvasEl.height=this.videoEl.videoHeight,this.canvasEl.width=this.videoEl.videoWidth))}async takeSnapshot(t){if(!this.videoEl||!this.canvasEl||(this.videoEl.currentTime=t,await new Promise(i=>{var o;const a=()=>{var l;(l=this.videoEl)==null||l.removeEventListener("seeked",a),i(null)};(o=this.videoEl)==null||o.addEventListener("seeked",a)}),!this.videoEl||!this.canvasEl))return;const s=this.canvasEl.getContext("2d");if(!s)return;s.drawImage(this.videoEl,0,0,this.canvasEl.width,this.canvasEl.height);const r=this.canvasEl.toDataURL();this.interrupted||r==="data:,"||!r||this.cb({at:t,data:r})}async begin(){const t=this.videoEl;if(!t)return;await this.initVideo();const s=tm(6);for(let r=0;r<s.length;r+=1){if(this.interrupted)return;await this.takeSnapshot(t.duration*s[r])}}}function sm(){var p,g;const e=x(h=>h.thumbnails.addImage),t=x(h=>h.status),s=x(h=>h.thumbnails.resetImages),r=x(h=>h.meta),i=x(h=>h.source),a=em(h=>h.enableThumbnails),o=d.useRef(null),l=JSON.stringify(i),c=d.useCallback(()=>{let h=null;if(i&&(h=Zt(i,{automaticQuality:!1,lastChosenQuality:"360"})),o.current||t!==P.PLAYING||!h)return;s();const f=new nm({addImage:e});o.current=f,f.start(h.stream)},[i,e,s,t]),u=d.useRef(c);d.useEffect(()=>{u.current=c},[c,t]),d.useEffect(()=>{a&&u.current()},[l,a]),d.useEffect(()=>()=>{o.current&&(o.current.destroy(),o.current=null)},[]);const m=JSON.stringify({id:r==null?void 0:r.tmdbId,ep:(p=r==null?void 0:r.episode)==null?void 0:p.tmdbId,se:(g=r==null?void 0:r.season)==null?void 0:g.tmdbId});return d.useEffect(()=>{o.current&&(o.current.destroy(),o.current=null),a&&u.current()},[m,l,t,a]),null}function rm(){const e=x(r=>r.display),t=x(r=>r.setDisplay),s=d.useRef(e);d.useEffect(()=>{s.current=e},[e]),d.useEffect(()=>{if(!s.current){const r=si();s.current=r,t(r)}return()=>{s.current&&(s.current=null,t(null))}},[t])}function ii(){return x(t=>t.status)===P.PLAYING}function im(e,t){const s=d.useRef(null),r=d.useMemo(()=>{s.current&&URL.revokeObjectURL(s.current);const i=e();return s.current=i,i},t);return d.useEffect(()=>()=>{s.current&&URL.revokeObjectURL(s.current)},[]),r}const am=function(){const t=d.useRef(null),s=d.useRef(null),r=x(u=>u.display),i=x(u=>{var m;return(m=u.caption.selected)==null?void 0:m.srtData}),a=x(u=>u.caption.asTrack),o=x(u=>{var m;return(m=u.caption.selected)==null?void 0:m.language}),l=im(()=>i?qc(i):null,[i]);d.useEffect(()=>{r&&t.current&&r.processVideoElement(t.current)},[r,t]),d.useEffect(()=>{s.current&&(s.current.track.mode="showing")},[s]);let c=null;return a&&l&&o&&(c=n.jsx("track",{label:"movie-web",kind:"subtitles",srcLang:o,src:l,default:!0})),n.jsx("video",{className:"absolute inset-0 w-full h-screen bg-black",autoPlay:!0,playsInline:!0,ref:t,children:c})},om=am;function lm(){const e=ii();return rm(),Zc(),e?n.jsx(om,{}):null}function cm(e){const t=ii(),s=x(p=>p.display),r=x(p=>p.mediaPlaying.isPaused),i=x(p=>p.updateInterfaceHovering),a=x(p=>p.interface.hovering),[o,l,c]=Wi(()=>{i(re.NOT_HOVERING)},3e3);Gs(()=>{l()});const u=d.useCallback(()=>{s==null||s.toggleFullscreen()},[s]),m=d.useCallback(p=>{if(p.pointerType==="mouse"){if(p.button!==0)return;r?s==null||s.play():s==null||s.pause();return}a!==re.MOBILE_TAPPED?(i(re.MOBILE_TAPPED),c()):(i(re.NOT_HOVERING),l())},[s,r,a,i,c,l]);return t?n.jsx("div",{className:S("absolute inset-0",{"absolute inset-0":!0,"cursor-none":!e.showingControls}),onDoubleClick:u,onPointerUp:m}):null}function um(e){const t=d.useRef(null),s=x(i=>i.updateInterfaceHovering),r=x(i=>i.interface.hovering);d.useEffect(()=>{if(!e.current)return;const i=e.current;function a(l){l.pointerType==="mouse"&&(s(re.MOUSE_HOVER),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{s(re.NOT_HOVERING),t.current=null},3e3))}function o(l){l.pointerType==="mouse"&&(s(re.NOT_HOVERING),t.current&&clearTimeout(t.current))}return i.addEventListener("pointermove",a),i.addEventListener("pointerleave",o),()=>{i.removeEventListener("pointermove",a),i.removeEventListener("pointerleave",o)}},[e,r,s])}function dm(e){const t=d.useRef(null),s=x(r=>r.display);return um(t),d.useEffect(()=>{s&&t.current&&s.processContainerElement(t.current)},[s,t]),n.jsx("div",{ref:t,children:n.jsx(nc,{children:n.jsx("div",{className:"h-screen select-none",children:e.children})})})}function mm(e){const t=d.useRef(e.onLoad);return d.useEffect(()=>{var s;(s=t.current)==null||s.call(t)},[]),n.jsx("div",{className:"relative",children:n.jsxs(dm,{children:[n.jsx(Jd,{}),n.jsx(sm,{}),n.jsx(Qd,{}),n.jsx(lm,{}),n.jsx(Zd,{}),n.jsx(Xd,{}),n.jsxs("div",{className:"relative h-screen overflow-hidden",children:[n.jsx(cm,{showingControls:e.showingControls}),n.jsx(Yd,{}),e.children]})]})})}const hm=function(t){const[s]=yc(t.id),r=se(o=>o.hideBanner),i={error:"bg-[#C93957] text-white"},a={error:w.CIRCLE_EXCLAMATION};return n.jsx("div",{ref:s,children:n.jsxs("div",{className:[i[t.type],"flex items-center justify-center p-1"].join(" "),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(I,{icon:a[t.type]}),n.jsx("div",{children:t.children})]}),n.jsx("span",{className:"absolute right-4 hover:cursor-pointer",onClick:()=>r(t.id,!0),children:n.jsx(I,{icon:w.X})})]})})},fm=hm;function ai(e){const{t}=C(),s=se(l=>l.isOnline),r=se(l=>l.setLocation),i=se(l=>l.ignoredBannerIds),a=se(l=>l.location),o=e.location??null;return d.useEffect(()=>{if(o)return r(o),()=>{r(null)}},[r,o]),a!==o?null:n.jsx("div",{children:!s&&!i.includes("offline")?n.jsx(fm,{id:"offline",type:"error",children:t("navigation.banner.offline")}):null})}function gm(e){const t=Tt("player"),s=x(r=>r.setHoveringAnyControls);return d.useEffect(()=>()=>{s(!1)},[s]),n.jsxs("div",{className:"w-full text-white",children:[n.jsx(z,{animation:"fade",show:e.show,style:{top:`${t}px`},className:"pointer-events-none flex justify-end pb-32 bg-gradient-to-b from-black to-transparent [margin-bottom:env(safe-area-inset-bottom)] transition-opacity duration-200 absolute top-0 w-full"}),n.jsx("div",{className:"relative z-10",children:n.jsx(ai,{location:"player"})}),n.jsx("div",{onMouseOver:()=>s(!0),onMouseOut:()=>s(!1),className:"pointer-events-auto pl-[calc(2rem+env(safe-area-inset-left))] pr-[calc(2rem+env(safe-area-inset-right))] pt-6 absolute top-0 w-full",style:{top:`${t}px`},children:n.jsx(z,{animation:"slide-down",show:e.show,className:"text-white",children:e.children})})]})}function Is(e){return n.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none [&>*]:pointer-events-auto",children:e.children})}function xm(e){const t=x(s=>s.setHoveringAnyControls);return d.useEffect(()=>()=>{t(!1)},[t]),n.jsxs("div",{className:"w-full text-white",children:[n.jsx(z,{animation:"fade",show:e.show,className:"pointer-events-none flex justify-end pt-32 bg-gradient-to-t from-black to-transparent transition-opacity duration-200 absolute bottom-0 w-full"}),n.jsx("div",{onMouseOver:()=>t(!0),onMouseOut:()=>t(!1),className:"pointer-events-auto z-10 pl-[calc(2rem+env(safe-area-inset-left))] pr-[calc(2rem+env(safe-area-inset-right))] pb-3 mb-[env(safe-area-inset-bottom)] absolute bottom-0 w-full",children:n.jsx(z,{animation:"slide-up",show:e.show,children:e.children})})]})}function pm(e){return n.jsx(z,{animation:"fade",show:e.show,className:"absolute inset-0 w-full h-full bg-black bg-opacity-20 pointer-events-none"})}const bm=function(t){const{t:s}=C(),r=Y();return n.jsx("div",{className:"flex items-center",children:n.jsxs("button",{type:"button",onClick:()=>r(t.url),className:"py-1 -my-1 px-2 -mx-2 tabbable rounded-lg flex items-center cursor-pointer text-type-secondary hover:text-white transition-colors duration-200 font-medium",children:[n.jsx(I,{className:"mr-2",icon:w.ARROW_LEFT}),n.jsx("span",{className:"md:hidden",children:s("player.back.short")}),n.jsx("span",{className:"hidden md:block",children:s("player.back.default")})]})})},ym=bm;function vm(e){const t=x(r=>r.setHoveringLeftControls),s=d.useCallback(()=>{t(!1)},[t]);return d.useEffect(()=>()=>{t(!1)},[t]),n.jsx("div",{className:S(["flex space-x-3 items-center",e.className]),onMouseLeave:s,children:e.children})}function jm(e){return n.jsx(z,{animation:"fade",show:e.show,className:"pointer-events-none",children:n.jsx("div",{className:S(["absolute inset-0 flex space-x-6 items-center justify-center pointer-events-none [&>*]:pointer-events-auto",e.className]),children:e.children})})}const wm={i:"I"};function km(e){let{text:t,styling:s,overrideCasing:r}=e;const i=d.useMemo(()=>{let a=t;r&&t&&(a=t.slice(0,1)+t.slice(1).toLowerCase());const o=(a||"").split(" ").map(c=>wm[c]??c).join(" ").replaceAll(/ i'/g," I'").replaceAll(/\r?\n/g,"<br />");return $c(o,{ALLOWED_TAGS:["c","b","i","u","span","ruby","rt","br"],ADD_TAGS:["v","lang"],ALLOWED_ATTR:["title","lang"]})},[t,r]);return n.jsx("p",{className:"pointer-events-none mb-1 select-none rounded px-4 py-1 text-center leading-normal [text-shadow:0_2px_4px_rgba(0,0,0,0.5)]",style:{color:s.color,fontSize:`${(1.5*s.size).toFixed(2)}em`,backgroundColor:`rgba(0,0,0,${s.backgroundOpacity.toFixed(2)})`},children:n.jsx("span",{dangerouslySetInnerHTML:{__html:i},dir:"ltr"})})}function Nm(){const e=x(c=>c.progress.time),t=x(c=>{var u;return(u=c.caption.selected)==null?void 0:u.srtData}),s=x(c=>{var u;return(u=c.caption.selected)==null?void 0:u.language}),r=B(c=>c.styling),i=B(c=>c.overrideCasing),a=B(c=>c.delay),o=d.useMemo(()=>t?Gc(t):[],[t,s]),l=d.useMemo(()=>o.filter(c=>{let{start:u,end:m}=c;return Hc(u,m,a,e)}),[o,e,a]);return n.jsx("div",{children:l.map((c,u)=>{let{start:m,end:p,content:g}=c;return n.jsx(km,{text:g,styling:r,overrideCasing:i},Wc(u,m,p))})})}function Sm(e){const t=x(a=>a.caption.selected),s=x(a=>a.caption.asTrack),r=x(a=>a.display),i=(r==null?void 0:r.getType())==="casting";return s||!t||i?null:n.jsx(z,{className:"absolute inset-0 pointer-events-none",animation:"slide-up",show:!0,children:n.jsx("div",{className:S(["text-white absolute flex w-full flex-col items-center transition-[bottom]",e.controlsShown?"bottom-24":"bottom-12"]),children:n.jsx(Nm,{})})})}function Cm(){const e=K(o=>o.addBookmark),t=K(o=>o.removeBookmark),s=K(o=>o.bookmarks),r=x(o=>o.meta),i=!!s[(r==null?void 0:r.tmdbId)??""],a=d.useCallback(()=>{r&&(i?t(r.tmdbId):e(r))},[i,r,e,t]);return n.jsx(le,{onClick:()=>a(),icon:i?w.BOOKMARK:w.BOOKMARK_OUTLINE,iconSizeClass:"text-base",className:"p-3"})}function Em(){const e=x(m=>m.interface.hovering),t=x(m=>m.interface.lastHoveringState),s=x(m=>m.mediaPlaying.isPaused),r=x(m=>m.interface.hasOpenOverlay),i=x(m=>m.interface.isHoveringControls),a=t===re.MOBILE_TAPPED,l=e!==re.NOT_HOVERING||i&&!a||r,u=a?l:l||s;return{showTouchTargets:a&&u,showTargets:u}}function Im(e){const{showTargets:t,showTouchTargets:s}=Em(),r=x(o=>o.status),{isMobile:i}=_t(),a=x(o=>o.mediaPlaying.isLoading);return n.jsxs(mm,{onLoad:e.onLoad,showingControls:t,children:[e.children,n.jsx(pm,{show:t&&r===P.PLAYING}),n.jsx(Ad,{onChange:e.onMetaChange}),n.jsx(Ed,{}),n.jsx(Sm,{controlsShown:t}),r===P.PLAYING?n.jsxs(n.Fragment,{children:[n.jsxs(Is,{children:[n.jsx(uu,{}),n.jsx(du,{})]}),n.jsx(Is,{children:n.jsx(Dd,{})})]}):null,n.jsxs(jm,{className:"text-white",show:s&&r===P.PLAYING,children:[n.jsx(vs,{iconSizeClass:"text-3xl"}),n.jsx(gs,{iconSizeClass:"text-5xl",className:a?"opacity-0":"opacity-100"}),n.jsx(ys,{iconSizeClass:"text-3xl"})]}),n.jsx(gm,{show:t,children:n.jsxs("div",{className:"grid grid-cols-[1fr,auto] xl:grid-cols-3 items-center",children:[n.jsxs("div",{className:"flex space-x-3 items-center",children:[n.jsx(ym,{url:e.backUrl}),n.jsx("span",{className:"text mx-3 text-type-secondary",children:"/"}),n.jsx(fu,{}),n.jsx(Cm,{})]}),n.jsx("div",{className:"text-center hidden xl:flex justify-center items-center",children:n.jsx(gu,{})}),n.jsx("div",{className:"hidden sm:flex items-center justify-end",children:n.jsx(ve,{})}),n.jsx("div",{className:"flex sm:hidden items-center justify-end",children:r===P.PLAYING?n.jsxs(n.Fragment,{children:[n.jsx(Ss,{}),n.jsx(Es,{})]}):null})]})}),n.jsxs(xm,{show:t,children:[n.jsx("div",{className:"flex items-center space-x-3",children:r===P.PLAYING?n.jsxs(n.Fragment,{children:[i?n.jsx(js,{short:!0}):null,n.jsx(cu,{})]}):null}),n.jsxs("div",{className:"hidden lg:flex justify-between",dir:"ltr",children:[n.jsx(vm,{children:r===P.PLAYING?n.jsxs(n.Fragment,{children:[n.jsx(gs,{}),n.jsx(vs,{}),n.jsx(ys,{}),n.jsx(hu,{}),n.jsx(js,{})]}):null}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ns,{}),r===P.PLAYING?n.jsxs(n.Fragment,{children:[n.jsx(ps,{}),n.jsx(Ss,{}),n.jsx(Es,{})]}):null,r===P.PLAYBACK_ERROR||r===P.PLAYING?n.jsx(ks,{}):null,n.jsx(xs,{})]})]}),n.jsxs("div",{className:"grid grid-cols-[2.5rem,1fr,2.5rem] gap-3 lg:hidden",children:[n.jsx("div",{}),n.jsxs("div",{className:"flex justify-center space-x-3",children:[r===P.PLAYING?n.jsx(ps,{}):null,n.jsx(Ns,{}),r===P.PLAYING?n.jsx(ks,{}):null]}),n.jsx("div",{children:n.jsx(xs,{})})]})]}),n.jsx(_d,{}),n.jsx(Md,{controlsShowing:t,onChange:e.onMetaChange})]})}const Lm={releaseYear:2010,title:"Sintel",tmdbId:"",type:"movie"},Ls={hls:"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",mp4:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/Sintel.mp4"},Ts={hls:"HLS",mp4:"MP4"};function Tm(){const{status:e,playMedia:t,setMeta:s}=$r(),[r,i]=d.useState("mp4"),[a,o]=d.useState(""),l=d.useCallback((c,u)=>{let m;if(u==="hls")m={type:"hls",url:c};else if(u==="mp4")m={type:"file",qualities:{unknown:{type:"mp4",url:c}}};else throw new Error("Invalid type");s(Lm),t(m,[],null)},[t,s]);return n.jsxs(Im,{backUrl:"/",children:[e===P.IDLE?n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-full max-w-4xl rounded-xl bg-video-scraping-card p-10 m-4",children:n.jsxs("div",{className:"flex gap-16 flex-col lg:flex-row",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(He,{children:"Custom stream"}),n.jsxs("div",{className:"grid grid-cols-[1fr,auto] gap-2 items-center",children:[n.jsx(Tn,{className:"bg-video-context-flagBg rounded-md p-2 text-white w-full",value:a,onChange:o,placeholder:"https://..."}),n.jsx(Rc,{options:Object.entries(Ts).map(c=>({id:c[0],name:c[1]})),selectedItem:{id:r,name:Ts[r]},setSelectedItem:c=>i(c.id)})]}),n.jsx(R,{onClick:()=>l(a,r),children:"Start stream"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx(He,{children:"Preset tests"}),n.jsxs("div",{className:"grid grid-cols-[1fr,1fr] gap-2",children:[n.jsx(R,{onClick:()=>l(Ls.hls,"hls"),children:"HLS test"}),n.jsx(R,{onClick:()=>l(Ls.mp4,"mp4"),children:"MP4 test"})]})]})]})})}):null,e===P.PLAYBACK_ERROR?n.jsx(nu,{}):null]})}function Rm(){const{t:e}=C();return n.jsxs("div",{className:"relative flex flex-1 flex-col",children:[n.jsx(fe,{children:n.jsx("title",{children:e("notFound.badge")})}),n.jsx(In,{}),n.jsx("div",{className:"flex h-full flex-1 flex-col items-center justify-center p-5 text-center",children:n.jsx(Sn,{children:n.jsxs(Nn,{children:[n.jsx(kn,{icon:w.EYE_SLASH,children:e("notFound.badge")}),n.jsx(He,{children:e("notFound.title")}),n.jsx(Q,{children:e("notFound.message")}),n.jsx(R,{href:"/",theme:"purple",padding:"md:px-12 p-2.5",className:"mt-6",children:e("notFound.goHome")})]})})})]})}function Pm(){return n.jsx(Rm,{})}function Am(e,t){const[s,r]=d.useState(e);return d.useEffect(()=>{const i=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(i)}},[e,t]),s}function Rs(e){return e?decodeURIComponent(e):""}function _m(){const e=Y(),t=un(),[s,r]=d.useState(Rs(t.query));d.useEffect(()=>{r(Rs(t.query))},[t.query]);const i=function(o){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r(o),!!l){if(o.length===0){e("/",{replace:!0});return}e(Oi("/browse/:query",{query:o}),{replace:!0})}};return[s,i,o=>{i(o??s,!0)}]}function Om(e){return n.jsxs(Tr,{children:[n.jsx(In,{bg:e.showBg}),e.children]})}function oi(e){const{t}=C(),[s]=dn(),r=d.useCallback(()=>{var i;(i=e.onEdit)==null||i.call(e,!e.editing)},[e]);return n.jsx("button",{type:"button",onClick:r,className:"flex h-12 items-center overflow-hidden rounded-full bg-background-secondary px-4 py-2 text-white transition-[background-color,transform] hover:bg-background-secondaryHover active:scale-105",children:n.jsx("span",{ref:s,children:e.editing?n.jsx("span",{className:"mx-4 whitespace-nowrap",children:t("home.mediaList.stopEditing")}):n.jsx(I,{icon:w.EDIT})})})}function On(e){return n.jsx("div",{className:e.className,children:n.jsxs("div",{className:"mb-5 flex items-center",children:[n.jsxs("p",{className:"flex flex-1 items-center font-bold uppercase text-type-text",children:[e.icon?n.jsx("span",{className:"mr-2 text-xl",children:n.jsx(I,{icon:e.icon})}):null,e.title]}),e.children]})})}const Mn=d.forwardRef((e,t)=>n.jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3 md:grid-cols-4",ref:t,children:e.children})),Ps={duration:0,watched:0};function Mm(e,t){return e-t<60*2}function li(e,t){return t<20}function Dm(e,t){return!(li(e,t)||Mm(e,t))}function ci(e){var r,i;if(e.type!=="show")return{show:Dm(((r=e.progress)==null?void 0:r.duration)??0,((i=e.progress)==null?void 0:i.watched)??0),progress:e.progress??Ps};const t=Object.values(e.episodes).sort((a,o)=>o.updatedAt-a.updatedAt).filter(a=>!li(a.progress.duration,a.progress.watched))[0],s=e.seasons[t==null?void 0:t.seasonId];return!t||!s?{show:!1,progress:Ps}:{season:s,episode:t,show:!0,progress:t.progress}}function Bm(e){return n.jsx("p",{className:`font-semibold text-type-secondary ${e.className||""}`,children:e.content.map((t,s)=>n.jsxs("span",{children:[s!==0?n.jsx("span",{className:"mx-[0.6em] text-[1em]",children:"â—"}):null,t]},t))})}function Fm(e){let{media:t,linkable:s,series:r,percentage:i,closable:a,onClose:o}=e;const{t:l}=C(),c=`${Math.round(i??0).toFixed(0)}%`,u=s&&!a,m=[l(`media.types.${t.type}`)];return t.year&&m.push(t.year.toFixed()),n.jsxs(ie.Base,{className:`group -m-3 mb-2 rounded-xl bg-background-main transition-colors duration-100 focus:relative focus:z-10 ${u?"hover:bg-mediaCard-hoverBackground tabbable":""}`,tabIndex:u?0:-1,onKeyUp:p=>p.key==="Enter"&&p.currentTarget.click(),children:[n.jsx(ie.Light,{flareSize:300,cssColorVar:"--colors-mediaCard-hoverAccent",backgroundClass:"bg-mediaCard-hoverBackground duration-100",className:S({"rounded-xl bg-background-main group-hover:opacity-100":u})}),n.jsxs(ie.Child,{className:`pointer-events-auto relative mb-2 p-3 transition-transform duration-100 ${u?"group-hover:scale-95":""}`,children:[n.jsxs("div",{className:S("relative mb-4 pb-[150%] w-full overflow-hidden rounded-xl bg-mediaCard-hoverBackground bg-cover bg-center transition-[border-radius] duration-100",{"group-hover:rounded-lg":!a}),style:{backgroundImage:t.poster?`url(${t.poster})`:void 0},children:[r?n.jsx("div",{className:["absolute right-2 top-2 rounded-md bg-mediaCard-badge px-2 py-1 transition-colors"].join(" "),children:n.jsx("p",{className:["text-center text-xs font-bold text-mediaCard-badgeText transition-colors",a?"":"group-hover:text-white"].join(" "),children:l("media.episodeDisplay",{season:r.season||1,episode:r.episode})})}):null,i!==void 0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`absolute inset-x-0 -bottom-px pb-1 h-12 bg-gradient-to-t from-mediaCard-shadow to-transparent transition-colors ${u?"group-hover:from-mediaCard-hoverShadow":""}`}),n.jsx("div",{className:`absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-mediaCard-shadow to-transparent transition-colors ${u?"group-hover:from-mediaCard-hoverShadow":""}`}),n.jsx("div",{className:"absolute inset-x-0 bottom-0 p-3",children:n.jsx("div",{className:"relative h-1 overflow-hidden rounded-full bg-mediaCard-barColor",children:n.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full bg-mediaCard-barFillColor",style:{width:c}})})})]}):null,n.jsx("div",{className:`absolute inset-0 flex items-center justify-center bg-mediaCard-badge bg-opacity-80 transition-opacity duration-200 ${a?"opacity-100":"pointer-events-none opacity-0"}`,children:n.jsx(xt,{clickable:!0,className:"text-2xl text-mediaCard-badgeText",onClick:()=>a&&(o==null?void 0:o()),icon:w.X})})]}),n.jsx("h1",{className:"mb-1 line-clamp-3 max-h-[4.5rem] text-ellipsis break-words font-bold text-white",children:n.jsx("span",{children:t.title})}),n.jsx(Bm,{className:"text-xs",content:m})]})]})}function Um(e){const t=n.jsx(Fm,{...e}),s=e.linkable&&!e.closable;let r=s?`/media/${encodeURIComponent(Fo(e.media))}`:"#";return s&&e.series&&(e.series.season===0&&!e.series.episodeId?r+=`/${encodeURIComponent(e.series.seasonId)}`:r+=`/${encodeURIComponent(e.series.seasonId)}/${encodeURIComponent(e.series.episodeId)}`),e.linkable?n.jsx(vt,{to:r,tabIndex:-1,className:S("tabbable",e.closable?"hover:cursor-default":""),children:t}):n.jsx("span",{children:t})}function Vm(e){var t,s,r,i;if(!(!e||!e.episode||!e.season))return{episode:(t=e.episode)==null?void 0:t.number,season:(s=e.season)==null?void 0:s.number,episodeId:(r=e.episode)==null?void 0:r.id,seasonId:(i=e.season)==null?void 0:i.id}}function Dn(e){const t=G(a=>a.items),s=d.useMemo(()=>t[e.media.id],[t,e.media]),r=d.useMemo(()=>s?ci(s):null,[s]),i=r!=null&&r.show?r.progress.watched/r.progress.duration*100:void 0;return n.jsx(Um,{media:e.media,series:Vm(r),linkable:!0,percentage:i,onClose:e.onClose,closable:e.closable})}function $m(){const{t:e}=C(),t=G(c=>c.items),s=K(c=>c.bookmarks),r=K(c=>c.removeBookmark),[i,a]=d.useState(!1),[o]=dn(),l=d.useMemo(()=>{let c=[];return Object.entries(s).forEach(u=>{c.push({id:u[0],...u[1]})}),c=c.sort((u,m)=>{const p=s[u.id],g=s[m.id],h=t[u.id],f=t[m.id],v=Math.max(p.updatedAt,(h==null?void 0:h.updatedAt)??0);return Math.max(g.updatedAt,(f==null?void 0:f.updatedAt)??0)-v}),c},[s,t]);return l.length===0?null:n.jsxs("div",{children:[n.jsx(On,{title:e("home.bookmarks.sectionTitle")||"Bookmarks",icon:w.BOOKMARK,children:n.jsx(oi,{editing:i,onEdit:a})}),n.jsx(Mn,{ref:o,children:l.map(c=>n.jsx(Dn,{media:c,closable:i,onClose:()=>r(c.id)},c.id))})]})}const Hm=d.forwardRef((e,t)=>{const[s,r]=d.useState(!1);function i(a){e.onChange(a,!1)}return n.jsxs(ie.Base,{className:S({"hover:flare-enabled group flex flex-col rounded-[28px] transition-colors sm:flex-row sm:items-center relative":!0,"bg-search-background":!s,"bg-search-focused":s}),children:[n.jsx(ie.Light,{flareSize:400,enabled:s,className:"rounded-[28px]",backgroundClass:S({"transition-colors":!0,"bg-search-background":!s,"bg-search-focused":s})}),n.jsxs(ie.Child,{className:"flex flex-1 flex-col",children:[n.jsx("div",{className:"pointer-events-none absolute bottom-0 left-5 top-0 flex max-h-14 items-center text-search-icon",children:n.jsx(I,{icon:w.SEARCH})}),n.jsx(Tn,{ref:t,onUnFocus:()=>{r(!1),e.onUnFocus()},onFocus:()=>r(!0),onChange:a=>i(a),value:e.value,className:"w-full flex-1 bg-transparent px-4 py-4 pl-12 text-search-text placeholder-search-placeholder focus:outline-none sm:py-4 sm:pr-2",placeholder:e.placeholder}),e.value.length>0&&n.jsx("div",{onClick:()=>{var a;e.onUnFocus(""),t&&typeof t!="function"&&((a=t.current)==null||a.focus())},className:"cursor-pointer hover:text-white  absolute bottom-0 right-2 top-0 flex justify-center my-auto h-10 w-10 items-center hover:bg-search-hoverBackground active:scale-110 text-search-icon rounded-full transition-[transform,background-color] duration-200",children:n.jsx(I,{icon:w.X,className:"transition-colors duration-200"})})]})]})});function Wm(e){d.useEffect(()=>{const t=s=>{var r;if(s.key==="/"){if(document.activeElement&&document.activeElement.tagName.toLowerCase()==="input")return;s.preventDefault(),(r=e.current)==null||r.focus()}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e])}function Gm(e){return n.jsx("h1",{className:`text-2xl font-bold text-white sm:text-3xl md:text-4xl ${e.className??""}`,children:e.children})}const Km=()=>Math.floor(Math.random()*10)===0;function zm(){const{t:e}=C(),t=d.useMemo(()=>Km(),[]),s=d.useMemo(()=>Math.random(),[]);return{t:d.useCallback(i=>{const a=e(`${i}.default`)??"";if(!t)return a;const o=e(`${i}.extra`,{returnObjects:!0,defaultValue:a});return Array.isArray(o)?o.length===0?a:o[Math.floor(s*o.length)]:typeof o=="string"?o:a},[e,s,t])}}function qm(e){const t=e.getHours();return t<5?"night":t<12?"morning":t<19?"day":"night"}function Qm(e){let{setIsSticky:t,searchParams:s}=e;const{t:r}=zm(),[i,a,o]=s,[,l]=d.useState(!1),c=Tt(),u=d.useCallback(j=>{l(j),t(j)},[l,t]),{width:m}=Gi(),p=16,[g,h]=d.useState(p);d.useEffect(()=>{m>1200?h(p):h(p+60)},[m]);const f=qm(new Date),v=r(`home.titles.${f}`),b=r("home.search.placeholder"),y=d.useRef(null);return Wm(y),n.jsx(Lt,{children:n.jsxs("div",{className:"mt-44 space-y-16 text-center",children:[n.jsx("div",{className:"relative z-10 mb-16",children:n.jsx(Gm,{className:"mx-auto max-w-md",children:v})}),n.jsx("div",{className:"relative h-20 z-30",children:n.jsx(Ki,{topOffset:g*-1+c,stickyStyle:{paddingTop:`${g+c}px`},onFixedToggle:u,children:n.jsx(Hm,{ref:y,onChange:a,value:i,onUnFocus:o,placeholder:b??""})})})]})})}function Ym(){const{t:e}=C(),t=K(c=>c.bookmarks),s=G(c=>c.items),r=G(c=>c.removeItem),[i,a]=d.useState(!1),[o]=dn(),l=d.useMemo(()=>{let c=[];return Object.entries(s).filter(u=>ci(u[1]).show).sort((u,m)=>m[1].updatedAt-u[1].updatedAt).forEach(u=>{c.push({id:u[0],...u[1]})}),c=c.filter(u=>!!!t[u.id]),c},[s,t]);return l.length===0?null:n.jsxs("div",{children:[n.jsx(On,{title:e("home.continueWatching.sectionTitle"),icon:w.CLOCK,children:n.jsx(oi,{editing:i,onEdit:a})}),n.jsx(Mn,{ref:o,children:l.map(c=>n.jsx(Dn,{media:c,closable:i,onClose:()=>r(c.id)},c.id))})]})}function ui(){const{t:e}=C();return n.jsx(_e,{className:"mb-24 mt-40",text:e("home.search.loading")??void 0})}function As(e){const{t}=C(),s=e.failed?w.WARNING:w.EYE_SLASH;return n.jsxs("div",{className:"mb-24 mt-40  flex flex-col items-center justify-center space-y-3 text-center",children:[n.jsx(xt,{icon:s,className:`text-xl ${e.failed?"text-red-400":"text-type-logo"}`}),e.failed?null:n.jsx("div",{children:(e.results??0)>0?n.jsx("p",{children:t("home.search.allResults")}):n.jsx("p",{children:t("home.search.noResults")})}),e.failed?n.jsx("div",{children:n.jsx("p",{children:t("home.search.failed")})}):null]})}function Xm(e){let{searchQuery:t}=e;const{t:s}=C(),[r,i]=d.useState([]),[a,o]=oe(l=>pr(l));return d.useEffect(()=>{async function l(c){const u=await o(c);u&&i(u)}t!==""&&l({searchQuery:t})},[t,o]),a.loading?n.jsx(ui,{}):a.error?n.jsx(As,{failed:!0}):r?n.jsxs("div",{children:[r.length>0?n.jsxs("div",{children:[n.jsx(On,{title:s("home.search.sectionTitle"),icon:w.SEARCH}),n.jsx(Mn,{children:r.map(l=>n.jsx(Dn,{media:l},l.id.toString()))})]}):null,n.jsx(As,{results:r.length})]}):null}function Jm(e){const[t,s]=d.useState(!1),[r,i]=d.useState(!1),a=Am(e,500);return d.useEffect(()=>{s(e!==""),i(e!=="")},[e]),d.useEffect(()=>{i(!1)},[a]),{loading:r,searching:t}}function _s(){const{t:e}=C(),[t,s]=d.useState(!1),r=_m(),[i]=r,a=Jm(i);return n.jsxs(Om,{showBg:t,children:[n.jsxs("div",{className:"mb-16 sm:mb-24",children:[n.jsx(fe,{children:n.jsx("title",{children:e("global.name")})}),n.jsx(Qm,{searchParams:r,setIsSticky:s})]}),n.jsx(Ir,{children:a.loading?n.jsx(ui,{}):a.searching?n.jsx(Xm,{searchQuery:i}):n.jsxs(n.Fragment,{children:[n.jsx($m,{}),n.jsx(Ym,{})]})})]})}function Ze(e){return n.jsxs("div",{className:"flex flex-col items-center",children:[e.top?n.jsx("div",{className:"inline-block transform translate-y-1/2",children:e.top}):null,n.jsx("div",{className:"w-full rounded-xl bg-largeCard-background bg-opacity-50 max-w-[600px] mx-auto p-[3rem]",children:e.children})]})}function et(e){return n.jsx("div",{className:"flex flex-col items-center text-center mb-8",children:n.jsxs("div",{className:"flex flex-col items-center text-center max-w-[318px]",children:[e.icon?n.jsx("div",{className:"text-2xl mb-4 text-largeCard-icon",children:e.icon}):null,n.jsx("h2",{className:"text-xl text-white font-bold",children:e.title}),e.children?n.jsx("div",{className:"text-type-text mt-4",children:e.children}):null]})})}function Pe(e){return n.jsx("div",{className:"mt-12",children:n.jsx("div",{className:S("mx-auto",{"flex flex-row-reverse justify-between items-center":e.splitAlign,"flex max-w-xs flex-col-reverse gap-3":!e.splitAlign}),children:e.children})})}function di(e){const t=!!e.url,s=!!e.to,r=n.jsx("span",{className:"group mt-1 cursor-pointer font-bold text-type-link hover:text-type-linkHover active:scale-95",children:e.children});return t?n.jsx("a",{href:e.url,children:r}):s?n.jsx(vt,{to:e.to??"",children:r}):n.jsx("span",{onClick:()=>e.onClick&&e.onClick(),children:r})}function We(e){return n.jsxs("div",{className:S("space-y-3",e.className),children:[e.label?n.jsx("p",{className:"font-bold text-white",children:e.label}):null,n.jsx(Tn,{name:e.name,value:e.value,autoComplete:e.autoComplete,onChange:e.onChange,placeholder:e.placeholder,passwordToggleable:e.passwordToggleable,className:"w-full flex-1 bg-authentication-inputBg px-4 py-3 text-search-text focus:outline-none rounded-lg placeholder:text-gray-700"})]})}function Zm(e){const[t,s]=d.useState(""),[r,i]=d.useState(""),{login:a,restore:o,importData:l}=Oe(),c=G(h=>h.items),u=K(h=>h.bookmarks),{t:m}=C(),[p,g]=oe(async(h,f)=>{var y;if(!Cl(h))throw new Error(m("auth.login.validationError")??void 0);const v=f.trim();if(v.length===0)throw new Error(m("auth.login.deviceLengthError")??void 0);let b;try{b=await a({mnemonic:h,userData:{device:v}})}catch(j){throw j.status===401?new Error(m("auth.login.validationError")??void 0):j}if(!b)throw new Error(m("auth.login.validationError")??void 0);await l(b,c,u),await o(b),(y=e.onLogin)==null||y.call(e)},[e,a,o,m]);return n.jsxs(Ze,{top:n.jsx(ve,{backgroundClass:"bg-[#161527]"}),children:[n.jsx(et,{title:m("auth.login.title"),children:m("auth.login.description")}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(We,{label:m("auth.login.passphraseLabel")??void 0,value:t,autoComplete:"username",name:"username",onChange:s,placeholder:m("auth.login.passphrasePlaceholder")??void 0,passwordToggleable:!0}),n.jsx(We,{label:m("auth.deviceNameLabel")??void 0,value:r,onChange:i,placeholder:m("auth.deviceNamePlaceholder")??void 0}),p.error&&!p.loading?n.jsx("p",{className:"text-authentication-errorText",children:p.error.message}):null]}),n.jsx(Pe,{children:n.jsx(R,{theme:"purple",loading:p.loading,onClick:()=>g(t,r),children:m("auth.login.submit")})}),n.jsx("p",{className:"text-center mt-6",children:n.jsx(me,{i18nKey:"auth.createAccount",children:n.jsx(di,{to:"/register",children:"."})})})]})}function eh(){const e=Y();return n.jsxs(Xe,{children:[n.jsx(je,{subpage:!0,k:"global.pages.login"}),n.jsx(Zm,{onLogin:()=>{e("/")}})]})}const th=function(t){const s=t.current/t.steps*100;return n.jsxs("div",{className:t.className,children:[n.jsxs("p",{className:"mb-2",children:[t.current,"/",t.steps]}),n.jsx("div",{className:"max-w-full h-1 w-32 bg-onboarding-bar rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-onboarding-barFilled transition-[width] rounded-full",style:{width:`${s.toFixed(0)}%`}})})]})},Bn=th;function Fn(e){return n.jsxs("div",{className:"bg-background-main min-h-screen",style:{backgroundImage:"linear-gradient(to bottom, var(--tw-gradient-from), var(--tw-gradient-to) 800px)"},children:[n.jsx(Ye,{}),n.jsx("div",{className:"fixed px-7 py-5 left-0 top-0",children:n.jsx(vt,{className:"block tabbable rounded-full text-xs ssm:text-base",to:"/",children:n.jsx(ve,{clickable:!0})})}),n.jsx("div",{className:"min-h-screen",children:e.children})]})}const nh=$(ue(H(e=>({completed:!1,setCompleted(t){e(s=>{s.completed=t})}})),{name:"__MW::onboarding"}));function Un(){const[e]=It("redirect"),t=Y(),s=nh(a=>a.setCompleted),r=d.useCallback(()=>{t(e??"/")},[t,e]);return{completeAndRedirect:d.useCallback(()=>{s(!0),r()},[r,s])}}function Vn(){const e=Y(),t=Ae();return d.useCallback(r=>{e({pathname:r,search:t.search})},[e,t])}function Ge(e){return n.jsx("div",{className:S({"bg-onboarding-card duration-300 border border-onboarding-border rounded-lg p-7":!0,"hover:bg-onboarding-cardHover transition-colors cursor-pointer":!!e.onClick},e.className),onClick:e.onClick,children:e.children})}function Os(e){return n.jsxs("div",{className:"grid grid-rows-[1fr,auto] h-full",children:[n.jsxs("div",{children:[n.jsx(I,{icon:w.RISING_STAR,className:S("text-4xl mb-8 block",e.colorClass)}),n.jsx(Yl,{className:S("!mt-0 !mb-0 !text-xs uppercase",e.colorClass),children:e.subtitle}),n.jsx(ae,{className:"!mb-0 !mt-1 !text-base",children:e.title}),n.jsx(Q,{className:"max-w-[320px] !my-4",children:e.description})]}),n.jsx("div",{children:e.children})]})}function ye(e){const t=Y();return n.jsxs("a",{onClick:()=>{e.to&&t(e.to)},href:e.href,target:e.target,className:S("text-onboarding-link cursor-pointer inline-flex gap-2 items-center group hover:opacity-75 transition-opacity",e.className),rel:"noreferrer",children:[e.children,n.jsx(I,{icon:w.ARROW_RIGHT,className:"group-hover:translate-x-0.5 transition-transform text-xl group-active:translate-x-0"})]})}function Ms(e){return n.jsx("div",{className:S("w-full grid justify-center",e.className),children:n.jsx("div",{className:"w-px h-10 bg-onboarding-divider"})})}function sh(){const e=Vn(),t=Cn("skip"),{completeAndRedirect:s}=Un(),{t:r}=C(),i=pn().length===0;return n.jsxs(Fn,{children:[n.jsx(je,{subpage:!0,k:"global.pages.onboarding"}),n.jsx(Cr,{id:t.id,children:n.jsxs(sc,{children:[n.jsx(Et,{className:"!mt-0 !mb-4 !text-2xl",children:r("onboarding.defaultConfirm.title")}),n.jsx(Q,{className:"!mt-1 !mb-12",children:r("onboarding.defaultConfirm.description")}),n.jsxs("div",{className:"flex flex-col-reverse gap-3 md:flex-row md:justify-between",children:[n.jsx(R,{theme:"secondary",onClick:t.hide,children:r("onboarding.defaultConfirm.cancel")}),n.jsx(R,{theme:"purple",onClick:()=>s(),children:r("onboarding.defaultConfirm.confirm")})]})]})}),n.jsxs(En,{children:[n.jsx(Bn,{steps:2,current:1,className:"mb-12"}),n.jsx(ae,{className:"!mt-0 !text-3xl max-w-[435px]",children:r("onboarding.start.title")}),n.jsx(Q,{className:"max-w-[320px]",children:r("onboarding.start.explainer")}),n.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-3",children:[n.jsx(Ge,{onClick:()=>e("/onboarding/extension"),children:n.jsx(Os,{colorClass:"!text-onboarding-best",title:r("onboarding.start.options.extension.title"),subtitle:r("onboarding.start.options.extension.quality"),description:r("onboarding.start.options.extension.description"),children:n.jsx(ye,{children:r("onboarding.start.options.extension.action")})})}),n.jsxs("div",{className:"hidden md:grid grid-rows-[1fr,auto,1fr] justify-center gap-4",children:[n.jsx(Ms,{className:"items-end"}),n.jsx("span",{className:"text-xs uppercase font-bold",children:"or"}),n.jsx(Ms,{})]}),n.jsx(Ge,{onClick:()=>e("/onboarding/proxy"),children:n.jsx(Os,{colorClass:"!text-onboarding-good",title:r("onboarding.start.options.proxy.title"),subtitle:r("onboarding.start.options.proxy.quality"),description:r("onboarding.start.options.proxy.description"),children:n.jsx(ye,{children:r("onboarding.start.options.proxy.action")})})})]}),i?null:n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-center hidden md:block mt-12",children:n.jsxs(me,{i18nKey:"onboarding.start.options.default.text",children:[n.jsx("br",{}),n.jsx("a",{onClick:t.show,type:"button",className:"text-onboarding-link hover:opacity-75 cursor-pointer"})]})}),n.jsx("div",{className:" max-w-[300px] mx-auto md:hidden mt-12 ",children:n.jsx(R,{className:"!text-type-text !bg-opacity-50",theme:"secondary",onClick:t.show,children:n.jsx("span",{children:n.jsxs(me,{i18nKey:"onboarding.start.options.default.text",children:[n.jsx("span",{}),n.jsx("span",{})]})})})})]})]})]})}async function rh(){const e=await tr();return e?e.success?e.allowed?e.hasPermission?Xs(e.version)?"success":"outdated":"noperms":"disallowed":"failed":"unknown"}function ih(){const{t:e}=C(),t=d.useCallback(()=>{window.location.reload()},[]);return n.jsx(Ge,{className:"mt-4",children:n.jsxs("div",{className:"flex items-center space-x-7",children:[n.jsx("p",{className:"flex-1",children:e("onboarding.extension.notDetecting")}),n.jsx(R,{theme:"secondary",onClick:t,children:e("onboarding.extension.notDetectingAction")})]})})}function $n(e){const{t}=C(),[s,r]=d.useState(e.status);d.useEffect(()=>{e.loading||r(e.status)},[e.status,e.loading]);let i=null;return(e.loading||e.status==="unknown")&&(i=n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("p",{children:t("onboarding.extension.status.loading")})]})),e.status==="disallowed"||e.status==="noperms"?i=n.jsxs(n.Fragment,{children:[n.jsx("p",{children:t("onboarding.extension.status.disallowed")}),n.jsx(R,{onClick:()=>{go({page:"PermissionGrant",redirectUrl:window.location.href})},theme:"purple",padding:"md:px-12 p-2.5",className:"mt-6",children:t("onboarding.extension.status.disallowedAction")})]}):e.status==="failed"?i=n.jsx("p",{children:t("onboarding.extension.status.failed")}):e.status==="outdated"?i=n.jsx("p",{children:t("onboarding.extension.status.outdated")}):e.status==="success"&&(i=n.jsxs("p",{className:"flex items-center",children:[n.jsx(I,{icon:w.CHECKMARK,className:"text-type-success mr-4"}),t("onboarding.extension.status.success")]})),n.jsxs(n.Fragment,{children:[n.jsx(Ge,{children:n.jsx("div",{className:"flex py-6 flex-col space-y-2 items-center justify-center",children:i})}),s==="unknown"?n.jsx(ih,{}):null,e.showHelp&&e.status!=="success"?n.jsx(Ge,{className:"mt-4",children:n.jsxs("div",{className:"flex items-center space-x-7",children:[n.jsx(I,{icon:w.WARNING,className:"text-type-danger text-2xl"}),n.jsx("p",{className:"flex-1",children:n.jsx(me,{i18nKey:"onboarding.extension.extensionHelp",components:{bold:n.jsx("span",{className:"text-white"})}})})]})}):null]})}function ah(e){const{t}=C(),s=_().ONBOARDING_CHROME_EXTENSION_INSTALL_LINK;return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"!mt-0 !text-3xl max-w-[435px]",children:t("onboarding.extension.title")}),n.jsx(Q,{className:"max-w-[320px] mb-4",children:t("onboarding.extension.explainer")}),s?n.jsx(ye,{href:s,target:"_blank",className:"mb-12",children:t("onboarding.extension.linkChrome")}):null,n.jsx($n,{status:e.status,loading:e.loading})]})}function oh(e){const{t}=C(),s=_().ONBOARDING_FIREFOX_EXTENSION_INSTALL_LINK;return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"!mt-0 !text-3xl max-w-[435px]",children:t("onboarding.extension.title")}),n.jsx(Q,{className:"max-w-[320px] mb-4",children:t("onboarding.extension.explainer")}),s?n.jsx(ye,{href:s,target:"_blank",className:"mb-12",children:t("onboarding.extension.linkFirefox")}):null,n.jsx($n,{status:e.status,loading:e.loading,showHelp:!0})]})}function lh(e){const{t}=C();return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"!mt-0 !text-3xl max-w-[435px]",children:t("onboarding.extension.title")}),n.jsx(Q,{className:"max-w-[320px] mb-4",children:n.jsx(me,{i18nKey:"onboarding.extension.explainerIos",components:{bold:n.jsx("span",{className:"text-white font-bold"})}})})]})}function ch(e){const{t}=C(),s=_().ONBOARDING_CHROME_EXTENSION_INSTALL_LINK,r=_().ONBOARDING_FIREFOX_EXTENSION_INSTALL_LINK;return n.jsxs(n.Fragment,{children:[n.jsx(ae,{className:"!mt-0 !text-3xl max-w-[435px]",children:t("onboarding.extension.title")}),n.jsx(Q,{className:"max-w-[320px] mb-4",children:t("onboarding.extension.explainer")}),n.jsx("div",{className:"mb-4",children:s?n.jsx(ye,{href:s,target:"_blank",children:t("onboarding.extension.linkChrome")}):null}),n.jsx("div",{className:"mb-12",children:r?n.jsx(ye,{href:r,target:"_blank",children:t("onboarding.extension.linkFirefox")}):null}),n.jsx($n,{status:e.status,loading:e.loading,showHelp:!0})]})}function uh(){const{t:e}=C(),t=Vn(),{completeAndRedirect:s}=Un(),r=d.useMemo(()=>su(),[]),[{loading:i,value:a},o]=oe(async function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const m=await rh();return m==="success"&&u&&s(),m},[s]);mn(o,1e3);const c={chrome:ah,firefox:oh,ios:lh,unknown:ch}[r];return n.jsxs(Fn,{children:[n.jsx(je,{subpage:!0,k:"global.pages.onboarding"}),n.jsxs(En,{children:[n.jsx(Bn,{steps:2,current:2,className:"mb-12"}),n.jsx(c,{loading:i,status:a??"unknown"}),n.jsxs("div",{className:"flex justify-between items-center mt-8",children:[n.jsx(R,{onClick:()=>t("/onboarding"),theme:"secondary",children:e("onboarding.extension.back")}),a==="success"?n.jsx(R,{onClick:()=>o(!0),theme:"purple",children:e("onboarding.extension.submit")}):null]})]})]})}function dh(e){return n.jsxs("p",{className:S("inline-flex items-center text-type-danger",e.className),children:[n.jsx(I,{icon:w.WARNING,className:"text-xl mr-4"}),e.children]})}const Ds="https://postman-echo.com/get";function mh(){const{t:e}=C(),t=Vn(),{completeAndRedirect:s}=Un(),[r,i]=d.useState(""),a=F(g=>g.setProxySet),o=_().ONBOARDING_PROXY_INSTALL_LINK,l=ge(),c=F(g=>g.account),[{loading:u,error:m},p]=oe(async()=>{if(!r.startsWith("http"))throw new Error("onboarding.proxy.input.errorInvalidUrl");try{if((await bn(r,Ds,{})).url!==Ds)throw new Error("onboarding.proxy.input.errorNotProxy");a([r]),c&&l&&await jn(l,c,{proxyUrls:[r]}),s()}catch{throw new Error("onboarding.proxy.input.errorConnection")}},[r,s,a]);return n.jsxs(Fn,{children:[n.jsx(je,{subpage:!0,k:"global.pages.onboarding"}),n.jsxs(En,{children:[n.jsx(Bn,{steps:2,current:2,className:"mb-12"}),n.jsx(ae,{className:"!mt-0 !text-3xl max-w-[435px]",children:e("onboarding.proxy.title")}),n.jsx(Q,{className:"max-w-[320px] !mb-5",children:e("onboarding.proxy.explainer")}),o?n.jsx(ye,{href:o,target:"_blank",className:"mb-12",children:e("onboarding.proxy.link")}):null,n.jsxs("div",{className:"w-[400px] max-w-full  mt-14 mb-28",children:[n.jsx(We,{label:e("onboarding.proxy.input.label"),value:r,onChange:i,placeholder:e("onboarding.proxy.input.placeholder"),className:"mb-4"}),m?n.jsx(dh,{children:e(m.message)}):null]}),n.jsx(Rt,{}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(R,{theme:"secondary",onClick:()=>t("/onboarding"),children:e("onboarding.proxy.back")}),n.jsx(R,{theme:"purple",loading:u,onClick:p,children:e("onboarding.proxy.submit")})]})]})]})}const mi=["#0A54FF","#CF2E68","#F9DD7F","#7652DD","#2ECFA8"],Bs=mi[0],hh=function(t){return n.jsxs("div",{className:"space-y-3",children:[t.label?n.jsx("p",{className:"font-bold text-white",children:t.label}):null,n.jsx("div",{className:"flex gap-3",children:mi.map(s=>n.jsx("button",{type:"button",tabIndex:0,className:S("w-full h-10 rounded flex justify-center items-center text-white pointer border-2 border-opacity-10 cursor-pointer",t.value===s?"border-white":"border-transparent"),onClick:()=>t.onInput(s),style:{backgroundColor:s},children:t.value===s?n.jsx(I,{icon:w.CHECKMARK}):null},s))})]})},Fs=hh,hi=[De.USER_GROUP,De.COUCH,De.MOBILE,De.TICKET,De.HANDCUFFS],fh=hi[0],gh=function(t){return n.jsxs("div",{className:"space-y-3",children:[t.label?n.jsx("p",{className:"font-bold text-white",children:t.label}):null,n.jsx("div",{className:"flex gap-3",children:hi.map(s=>n.jsx("button",{type:"button",tabIndex:0,className:S("w-full h-10 rounded flex justify-center items-center text-white pointer border-2 border-opacity-10 cursor-pointer",t.value===s?"bg-buttons-purple border-white":"bg-authentication-inputBg border-transparent"),onClick:()=>t.onInput(s),children:n.jsx(Ks,{className:"text-xl",icon:s})},s))})]})},xh=gh;function ph(e){const[t,s]=d.useState(""),[r,i]=d.useState(Bs),[a,o]=d.useState(Bs),[l,c]=d.useState(fh),{t:u}=C(),[m,p]=d.useState(!1),g=d.useCallback(()=>{var f;p(!1);const h=t.trim();if(h.length===0){p(!0);return}(f=e.onNext)==null||f.call(e,{device:h,profile:{colorA:r,colorB:a,icon:l}})},[t,e,r,a,l]);return n.jsxs(Ze,{children:[n.jsx(et,{icon:n.jsx(Rr,{profile:{colorA:r,colorB:a,icon:l},iconClass:"text-3xl",sizeClass:"w-16 h-16"}),title:u("auth.register.information.title")??void 0,children:u("auth.register.information.header")}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(We,{label:u("auth.deviceNameLabel")??void 0,value:t,onChange:s,placeholder:u("auth.deviceNamePlaceholder")??void 0}),n.jsx(Fs,{label:u("auth.register.information.color1"),value:r,onInput:i}),n.jsx(Fs,{label:u("auth.register.information.color2"),value:a,onInput:o}),n.jsx(xh,{label:u("auth.register.information.icon"),value:l,onInput:c}),m?n.jsx("p",{className:"text-authentication-errorText",children:u("auth.login.deviceLengthError")}):null]}),n.jsx(Pe,{children:n.jsx(R,{theme:"purple",onClick:()=>g(),children:u("auth.register.information.next")})})]})}const bh=function(t){const{t:s}=C(),r=t.mnemonic.split(" "),[,i]=Ws(),[a,o]=d.useState(!1),l=zi(),c=d.useRef();function u(){i(t.mnemonic),o(!0),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>l()&&o(!1),500)}return n.jsxs("div",{className:"rounded-lg border border-authentication-border/50 ",children:[n.jsxs("div",{className:"px-4 py-2 flex justify-between border-b border-authentication-border/50",children:[n.jsx("p",{className:"font-bold text-sm text-white",children:s("auth.generate.passphraseFrameLabel")}),n.jsxs("button",{type:"button",className:"text-authentication-copyText hover:text-authentication-copyTextHover transition-colors flex gap-2 items-center cursor-pointer",onClick:()=>u(),children:[n.jsx(I,{icon:a?w.CHECKMARK:w.COPY,className:a?"text-xs":""}),n.jsx("span",{className:"text-sm",children:s("actions.copy")})]})]}),n.jsx("div",{className:"px-4 py-4 grid grid-cols-3 text-sm sm:text-base sm:grid-cols-4 gap-2",children:r.map((m,p)=>n.jsx("div",{className:"rounded-md py-2 bg-authentication-wordBackground text-white font-medium text-center",children:m},p))})]})},yh=bh;function vh(e){const t=d.useMemo(()=>El(),[]),{t:s}=C();return n.jsxs(Ze,{children:[n.jsx(et,{title:s("auth.generate.title"),icon:n.jsx(I,{icon:w.USER}),children:s("auth.generate.description")}),n.jsx(yh,{mnemonic:t}),n.jsx(Pe,{children:n.jsx(R,{theme:"purple",onClick:()=>{var r;return(r=e.onNext)==null?void 0:r.call(e,t)},children:s("auth.generate.next")})})]})}function jh(e){const t=Y(),s=ge(),r=d.useMemo(()=>s?new URL(s).hostname:void 0,[s]),i=yt(()=>s?Or(s):Promise.resolve(null),[s]),{t:a}=C();let o=n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"text-white font-bold text-lg",children:a("auth.trust.failed.title")}),n.jsx("p",{children:a("auth.trust.failed.text")})]});return i.loading&&(o=n.jsx(_e,{})),i.value&&(o=n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"text-white font-bold text-lg",children:i.value.name}),i.value.description?n.jsx("p",{className:"text-center",children:i.value.description}):null]})),n.jsxs(Ze,{children:[n.jsx(et,{title:a(r?"auth.trust.title":"auth.trust.noHostTitle"),icon:n.jsx(I,{icon:w.CIRCLE_EXCLAMATION}),children:r?n.jsx(me,{i18nKey:"auth.trust.host",values:{hostname:r},children:n.jsx("span",{className:"text-white"})}):n.jsx("p",{children:a("auth.trust.noHost")})}),r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"border border-authentication-border rounded-xl px-4 py-8 flex flex-col items-center space-y-2 my-8",children:o}),n.jsxs(Pe,{children:[n.jsx(R,{theme:"secondary",onClick:()=>t("/"),children:a("auth.trust.no")}),n.jsx(R,{theme:"purple",onClick:()=>{var l;return i.value&&((l=e.onNext)==null?void 0:l.call(e,i.value))},children:a("auth.trust.yes")})]}),n.jsx("p",{className:"text-center mt-6",children:n.jsx(me,{i18nKey:"auth.hasAccount",children:n.jsx(di,{to:"/login",children:"."})})})]}):n.jsx(Pe,{children:n.jsx(R,{theme:"purple",onClick:()=>t("/"),children:a("auth.trust.no")})})]})}function wh(e){const[t,s]=d.useState(""),{register:r,restore:i,importData:a}=Oe(),o=G(b=>b.items),l=K(b=>b.bookmarks),c=Qe(b=>b.language),u=B(b=>b.lastSelectedLanguage),m=wn(b=>b.theme),p=ge(),{t:g}=C(),{executeRecaptcha:h}=qi(),[f,v]=oe(async b=>{var T;if(!p)throw new Error(g("auth.verify.noBackendUrl")??void 0);if(!e.mnemonic||!e.userData)throw new Error(g("auth.verify.invalidData")??void 0);let y;if(e.hasCaptcha&&(y=h?await h():void 0,!y))throw new Error(g("auth.verify.recaptchaFailed")??void 0);if(b!==e.mnemonic)throw new Error(g("auth.verify.noMatch")??void 0);const j=await r({mnemonic:b,userData:e.userData,recaptchaToken:y});if(!j)throw new Error(g("auth.verify.registrationFailed")??void 0);await a(j,o,l),await jn(p,j,{applicationLanguage:c,defaultSubtitleLanguage:u??void 0,applicationTheme:m??void 0,proxyUrls:void 0}),await i(j),(T=e.onNext)==null||T.call(e)},[e,r,i]);return n.jsx(Ze,{children:n.jsxs("form",{children:[n.jsx(et,{icon:n.jsx(I,{icon:w.CIRCLE_CHECK}),title:g("auth.verify.title"),children:g("auth.verify.description")}),n.jsx(We,{label:g("auth.verify.passphraseLabel")??void 0,autoComplete:"username",name:"username",value:t,onChange:s,passwordToggleable:!0}),f.error?n.jsx("p",{className:"mt-3 text-authentication-errorText",children:f.error.message}):null,n.jsx(Pe,{children:n.jsx(R,{theme:"purple",loading:f.loading,onClick:()=>v(t),children:g("auth.verify.register")})})]})})}function kh(e){return e.siteKey?n.jsx(Qi,{reCaptchaKey:e.siteKey,children:e.children}):e.children}function Nh(){const e=Y(),[t,s]=d.useState(0),[r,i]=d.useState(null),[a,o]=d.useState(null),[l,c]=d.useState(null);return n.jsx(kh,{siteKey:l,children:n.jsxs(Xe,{children:[n.jsx(je,{subpage:!0,k:"global.pages.register"}),t===0?n.jsx(jh,{onNext:u=>{c(u.hasCaptcha&&u.captchaClientKey?u.captchaClientKey:null),s(1)}}):null,t===1?n.jsx(vh,{onNext:u=>{i(u),s(2)}}):null,t===2?n.jsx(ph,{onNext:u=>{o(u),s(3)}}):null,t===3?n.jsx(wh,{hasCaptcha:!!l,mnemonic:r,userData:a,onNext:()=>{e("/")}}):null]})})}function Sh(e){const t=Tt(),s=se(r=>r.location);return n.jsxs("div",{children:[n.jsx("div",{className:"fixed inset-x-0 z-[1000]",children:n.jsx(ai,{})}),n.jsx("div",{style:{paddingTop:s===null?`${t}px`:"0px"},className:"flex min-h-screen flex-col",children:e.children})]})}const fi=$(H(e=>({routes:[],registerRoute(t){e(s=>{s.routes.push(t)})}})));function Ch(){const e=Ae(),t=fi(s=>s.registerRoute);d.useEffect(()=>{t({path:e.pathname})},[e.pathname,t]),Gs(()=>{t({path:e.pathname})})}function cf(){const e=fi(r=>r.routes),t=Ae();return d.useMemo(()=>{const r=[...e];r.reverse();const i=r.find(a=>!a.path.startsWith("/media")&&t.pathname!==a.path&&!a.path.startsWith("/s/")&&!a.path.startsWith("/onboarding"));return(i==null?void 0:i.path)??"/"},[e,t])}const Eh=d.lazy(()=>Ke(()=>import("./DeveloperPage-DqFUgklV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));d.lazy(()=>Ke(()=>import("./TestView-W0buDyKY.js"),__vite__mapDeps([10,1,2,3,4,8,5,6,7,9])));const cn=Hs(()=>Ke(()=>import("./PlayerView-Dz3XxkAx.js"),__vite__mapDeps([11,1,2,3,5,6,7,4,12,8,9]))),gi=Hs(()=>Ke(()=>import("./Settings-5ow06v1J.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,9,12,8])));cn.preload();gi.preload();function Us(e){let{children:t}=e;const s=Ae(),r=Y();return d.useEffect(()=>{const i=s.pathname;Qt(i)&&Ko(s.pathname).then(a=>{r(a??"/",{replace:!0})})},[s.pathname,r]),Qt(s.pathname)?null:t}function Ih(){const{query:e}=un(),t=Y();return d.useEffect(()=>{e?$o(e).then(s=>{t(s??"/",{replace:!0})}):t("/",{replace:!0})},[e,t]),null}function Lh(){const{query:e}=un(),t=Y();return d.useEffect(()=>{e?t(`/browse/${e}`,{replace:!0}):t("/",{replace:!0})},[e,t]),null}function Th(){return Ch(),wc(),n.jsxs(Sh,{children:[n.jsx(yl,{}),n.jsxs(Mi,{children:[n.jsx(U,{path:"/s/:query",element:n.jsx(Ih,{})}),n.jsx(U,{path:"/search/:type",element:n.jsx(Di,{to:"/browse"})}),n.jsx(U,{path:"/search/:type/:query?",element:n.jsx(Lh,{})}),n.jsx(U,{path:"/media/:media",element:n.jsx(Us,{children:n.jsx(d.Suspense,{fallback:null,children:n.jsx(cn,{})})})}),n.jsx(U,{path:"/media/:media/:season/:episode",element:n.jsx(Us,{children:n.jsx(d.Suspense,{fallback:null,children:n.jsx(cn,{})})})}),n.jsx(U,{path:"/browse/:query?",element:n.jsx(_s,{})}),n.jsx(U,{path:"/",element:n.jsx(_s,{})}),n.jsx(U,{path:"/register",element:n.jsx(Nh,{})}),n.jsx(U,{path:"/login",element:n.jsx(eh,{})}),n.jsx(U,{path:"/about",element:n.jsx(Sc,{})}),n.jsx(U,{path:"/onboarding",element:n.jsx(sh,{})}),n.jsx(U,{path:"/onboarding/extension",element:n.jsx(uh,{})}),n.jsx(U,{path:"/onboarding/proxy",element:n.jsx(mh,{})}),Lr()?n.jsx(U,{path:"/dmca",element:n.jsx(cc,{})}):null,n.jsx(U,{path:"/settings",element:n.jsx(d.Suspense,{fallback:null,children:n.jsx(gi,{})})}),n.jsx(U,{path:"/admin",element:n.jsx(Tc,{})}),n.jsx(U,{path:"/dev",element:n.jsx(Eh,{})}),n.jsx(U,{path:"/dev/video",element:n.jsx(Tm,{})}),null,n.jsx(U,{path:"*",element:n.jsx(Pm,{})})]})]})}const Rh=5*1e3;async function Ph(e,t,s,r){for(const i of e)if(t(i.id),!!r)try{if(i.action==="delete"){await Nl(s,r,i.tmdbId);continue}if(i.action==="add"){await kl(s,r,{meta:{poster:i.poster,title:i.title??"",type:i.type??"",year:i.year??NaN},tmdbId:i.tmdbId});continue}}catch(a){console.error(`Failed to sync bookmark: ${i.tmdbId} - ${i.action}`,a)}}function Ah(){const e=K(r=>r.clearUpdateQueue),t=K(r=>r.removeUpdateItem),s=ge();return d.useEffect(()=>{e()},[e]),d.useEffect(()=>{const r=setInterval(()=>{(async()=>{if(!s)return;const i=K.getState(),a=F.getState();await Ph(i.updateQueue,t,s,a.account)})()},Rh);return()=>{clearInterval(r)}},[t,s]),null}const _h=5*1e3;async function Oh(e,t,s,r){for(const i of e)if(t(i.id),!!r)try{if(i.action==="delete"){await Ml(s,r,i.tmdbId,i.seasonId,i.episodeId);continue}if(i.action==="upsert"){await Ol(s,r,Al(i));continue}}catch(a){console.error(`Failed to sync progress: ${i.tmdbId} - ${i.action}`,a)}}function Mh(){const e=G(r=>r.clearUpdateQueue),t=G(r=>r.removeUpdateItem),s=ge();return d.useEffect(()=>{e()},[e]),d.useEffect(()=>{const r=setInterval(()=>{(async()=>{if(!s)return;const i=G.getState(),a=F.getState();await Oh(i.updateQueue,t,s,a.account)})()},_h);return()=>{clearInterval(r)}},[t,s]),null}const Dh=5*1e3;function Bh(){const e=B(s=>s.importSubtitleLanguage),t=ge();return d.useEffect(()=>{const s=setInterval(()=>{(async()=>{if(!t)return;const r=B.getState(),i=F.getState();r.lastSync.lastSelectedLanguage!==r.lastSelectedLanguage&&i.account&&r.lastSelectedLanguage&&(await jn(t,i.account,{defaultSubtitleLanguage:r.lastSelectedLanguage}),e(r.lastSelectedLanguage))})()},Dh);return()=>{clearInterval(s)}},[e,t]),null}zd();function xi(e){const t={user:"screens.loadingUser",lazy:"screens.loadingApp"},{t:s}=C();return n.jsx(_r,{iconSlot:n.jsx(_e,{}),children:s(t[e.type]??"unknown.translation")})}function pi(e){const{t}=C(),{logout:s}=Oe(),r=F(o=>o.setBackendUrl),i=d.useCallback(()=>{r(null),location.reload()},[r]),a=d.useCallback(()=>{s().then(()=>{location.reload()})},[s]);return n.jsxs(_r,{iconSlot:n.jsx(I,{className:"text-type-danger text-2xl",icon:w.WARNING}),children:[e.children,e.showResetButton?n.jsx("div",{className:"mt-6",children:n.jsx(R,{theme:"secondary",onClick:i,children:t("screens.loadingUserError.reset")})}):null,e.showLogoutButton?n.jsx("div",{className:"mt-6",children:n.jsx(R,{theme:"secondary",onClick:a,children:t("screens.loadingUserError.logout")})}):null]})}function Fh(){const e=Ql(),t=_().BACKEND_URL,s=ge(),{t:r}=C(),i=t!==s;return e.loading?n.jsx(xi,{type:"user"}):e.error?n.jsx(pi,{showResetButton:i,showLogoutButton:!i,children:r(i?"screens.loadingUserError.textWithReset":"screens.loadingUserError.text")}):n.jsx(Th,{})}function Uh(){const e=yt(async()=>{jr(Qe.getState().language),await Za()},[]),{t}=C();return e.loading?n.jsx(jc,{}):e.error?n.jsx(pi,{children:t("screens.migration.failed")}):n.jsx(Fh,{})}function Vh(e){return _().NORMAL_ROUTER?n.jsx(Ji,{children:e.children}):n.jsx(Zi,{children:e.children})}const $h=document.getElementById("root"),Hh=Yi($h);Hh.render(n.jsx(d.StrictMode,{children:n.jsxs(lc,{children:[n.jsx(ir,{}),n.jsx(Xi,{children:n.jsx(d.Suspense,{fallback:n.jsx(xi,{type:"lazy"}),children:n.jsxs(Kl,{applyGlobal:!0,children:[n.jsx(Mh,{}),n.jsx(Ah,{}),n.jsx(Bh,{}),n.jsx(Vh,{children:n.jsx(Uh,{})})]})})})]})}));export{Rr as $,nh as A,R as B,It as C,$r as D,Sn as E,Zr as F,cf as G,an as H,kn as I,en as J,Im as K,_e as L,A as M,In as N,P as O,tu as P,nu as Q,Gl as R,ge as S,Lt as T,zl as U,lf as V,ae as W,Yl as X,Cr as Y,sc as Z,Q as _,He as a,Fs as a0,xh as a1,Oe as a2,We as a3,Et as a4,$t as a5,N as a6,od as a7,id as a8,km as a9,bn as aa,di as ab,_n as ac,Rt as ad,kr as ae,vn as af,Fl as ag,_t as ah,Or as ai,sf as aj,Rc as ak,rf as al,wn as am,Qe as an,B as ao,em as ap,jn as aq,ds as ar,af as as,of as at,Xe as au,je as av,Ir as aw,rn as b,qt as c,nf as d,tr as e,tf as f,cr as g,Nn as h,Xs as i,go as j,_ as k,Lo as l,ac as m,z as n,ce as o,Kt as p,sn as q,kt as r,ef as s,Gt as t,Cn as u,Ye as v,sr as w,Zh as x,Jh as y,F as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/DeveloperPage-DqFUgklV.js","assets/vendor-Bguz3SJh.js","assets/auth-72H9TcpW.js","assets/caption-parsing-C0s0SQwl.js","assets/react-dom-D3kPhowv.js","assets/Icons-BDmmcH-N.js","assets/language-db-CEuuI_gH.js","assets/Icons-7LetCtYR.css","assets/locales-D0ZXrpVY.js","assets/hls-Di-l_7QN.js","assets/TestView-W0buDyKY.js","assets/PlayerView-Dz3XxkAx.js","assets/StatusCircle-ABtVB7XF.js","assets/Settings-5ow06v1J.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-Dz1f29Zb.js.map
